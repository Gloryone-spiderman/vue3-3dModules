{"remainingRequest":"D:\\workspace\\3d_jf\\3d_jf\\node_modules\\babel-loader\\lib\\index.js!D:\\workspace\\3d_jf\\3d_jf\\src\\views\\ThreeMap.js","dependencies":[{"path":"D:\\workspace\\3d_jf\\3d_jf\\src\\views\\ThreeMap.js","mtime":1762928477858},{"path":"D:\\workspace\\3d_jf\\3d_jf\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1762147421060},{"path":"D:\\workspace\\3d_jf\\3d_jf\\node_modules\\babel-loader\\lib\\index.js","mtime":1762147421252}],"contextDependencies":[],"result":["import \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.string.repeat\";\nimport \"core-js/modules/es6.array.fill\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/web.dom.iterable\";\nimport _classCallCheck from \"D:/workspace/3d_jf/3d_jf/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:/workspace/3d_jf/3d_jf/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _defineProperty from \"D:/workspace/3d_jf/3d_jf/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\n/*\n作者:Mr.Xie\n创建时间:2020年05月29日\n功能描述:3D机房封装\n\n使用方式\nlet props={domID:\"three-dom\"}\nthis.map = new ThreeMap(props[,dataJson]);\nthis.map.init();\n*/\nimport * as THREE from \"three\";\nimport \"imports-loader?THREE=three!threebsp\";\nimport { GLTFLoader } from \"three/examples/jsm/loaders/GLTFLoader\";\nimport { GLTFExporter } from \"three/examples/jsm/exporters/GLTFExporter\";\nimport { OBJLoader } from \"three/examples/jsm/loaders/OBJLoader\";\nimport { OBJLoader2 } from \"three/examples/jsm/loaders/OBJLoader2\";\nimport { OBJExporter } from \"three/examples/jsm/exporters/OBJExporter\";\nimport { MTLLoader } from \"three/examples/jsm/loaders/MTLLoader\";\nimport TWEEN from \"@tweenjs/tween.js\";\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls.js\";\nimport { RectAreaLightUniformsLib } from \"three/examples/jsm/lights/RectAreaLightUniformsLib\";\nimport { RectAreaLightHelper } from \"three/examples/jsm/helpers/RectAreaLightHelper\";\nimport { RenderPass } from \"three/examples/jsm/postprocessing/RenderPass\";\nimport { ShaderPass } from \"three/examples/jsm/postprocessing/ShaderPass\";\nimport { CopyShader } from \"three/examples/jsm/shaders/CopyShader\";\nimport { EffectComposer } from \"three/examples/jsm/postprocessing/EffectComposer\";\nimport { UnrealBloomPass } from \"three/examples/jsm/postprocessing/UnrealBloomPass\"; //r100及以上\n// var OrbitControls = require('three-orbit-controls')(THREE)  //r100 以下\n\nvar ThreeMap = /*#__PURE__*/function () {\n  function ThreeMap(props, dataJson) {\n    _classCallCheck(this, ThreeMap);\n\n    _defineProperty(this, \"onProgress\", function (xhr) {\n      if (xhr.lengthComputable) {\n        var percentComplete = xhr.loaded / xhr.total * 100; // console.log( Math.round( percentComplete, 2 ) + '% downloaded' );\n      }\n    });\n\n    _defineProperty(this, \"onError\", function (xhr) {});\n\n    _defineProperty(this, \"commonFunc\", {\n      _this: this,\n      //判断对象\n      hasObj: function hasObj(obj) {\n        if (obj != null && typeof obj != \"undefined\") {\n          return true;\n        } else {\n          return false;\n        }\n      },\n      //查找对象\n      findObject: function findObject(objname) {\n        var findedobj = null;\n        this.objects.forEach(function (obj, index) {\n          if (obj.name != null && obj.name != \"\" && obj.name == objname) {\n            findedobj = obj;\n            return findedobj;\n          }\n        });\n        return findedobj;\n      },\n      //获取路径\n      getPath: function getPath(file) {\n        return this._this.BASE_PATH + file;\n      },\n      //生成GUID\n      guid: function guid() {\n        return this.guidRandom() + this.guidRandom() + \"-\" + this.guidRandom() + \"-\" + this.guidRandom() + \"-\" + this.guidRandom() + \"-\" + this.guidRandom() + this.guidRandom() + this.guidRandom();\n      },\n      guidRandom: function guidRandom() {\n        return ((1 + Math.random()) * 0x10000 | 0).toString(16).substring(1);\n      }\n    });\n\n    this.props = props;\n    this.ThreeData = dataJson;\n    this.dataJson = dataJson;\n    this.objList = dataJson.objects || []; //对象列表\n\n    this.eventList = dataJson.events || {}; //事件对象列表\n\n    this.btnList = dataJson.btns || []; //按钮列表\n\n    this.alarmColor = Object.assign({\n      level1: \"#00c5ff\",\n      level2: \"#b0f604\",\n      level3: \"#fcff00\",\n      level4: \"#ff8d00\",\n      level5: \"#ff0000\"\n    }, dataJson.alarmColor);\n    this.renderer = null;\n    this.scene = null; //场景\n\n    this.camera = null;\n    this.objects = []; //存放对象\n\n    this.equipment = []; //存放设备\n\n    this.sprite = []; //存放告警精灵图标\n\n    this.cabinet = []; //存放柜子\n\n    this.dom = document.getElementById(this.props.domID);\n    this.dbclick = 0;\n    this.mouseClick = new THREE.Vector2();\n    this.raycaster = new THREE.Raycaster();\n    this.lastElement = null; //存放最后一个设备\n\n    this.tipTimer = null; //显示提示用的timer\n\n    this.tooltip = null;\n    this.lastEvent = null;\n    this.tooltipBG = \"#ACDEFE\";\n    this.progressSuccess = 0;\n    this.loadtimer = null;\n    this.BASE_PATH = \"./images/\";\n  }\n\n  _createClass(ThreeMap, [{\n    key: \"init\",\n    value: function init() {\n      this.initRenderer();\n      this.initScene();\n      this.initCamera();\n      this.initLight();\n      this.render(); // this.setHelper();\n\n      this.setControl(); // this.add();\n\n      this.InitData(); //添加3D对象、事件等\n\n      this.renderer.domElement.addEventListener(\"mousedown\", this.onDocumentMouseDown.bind(this), false);\n      this.renderer.domElement.addEventListener(\"mousemove\", this.onDocumentMouseMove.bind(this), false);\n    } //初始化渲染场景\n\n  }, {\n    key: \"initRenderer\",\n    value: function initRenderer() {\n      this.renderer = new THREE.WebGLRenderer({\n        antialias: true\n      });\n      this.renderer.setSize(this.dom.offsetWidth, this.dom.offsetHeight);\n      this.dom.appendChild(this.renderer.domElement);\n    } //初始化相机\n\n  }, {\n    key: \"initCamera\",\n    value: function initCamera() {\n      this.camera = new THREE.PerspectiveCamera(45, this.dom.offsetWidth / this.dom.offsetHeight, 1, 100000);\n      this.camera.name = \"mainCamera\";\n      this.camera.position.set(0, 1000, 1800); //默认就是以Y轴为上方的\n      // this.camera.up.x = 0;\n      // this.camera.up.y =1;\n      // this.camera.up.z =0;\n\n      this.camera.lookAt({\n        x: 0,\n        y: 0,\n        z: 0\n      });\n      this.scene.add(this.camera);\n    } //初始化场景\n\n  }, {\n    key: \"initScene\",\n    value: function initScene() {\n      this.scene = new THREE.Scene();\n      this.scene.background = new THREE.Color(0x225f93);\n    } //初始化灯光\n\n  }, {\n    key: \"initLight\",\n    value: function initLight() {\n      var light = new THREE.AmbientLight(0xcccccc);\n      light.position.set(0, 0, 0);\n      this.scene.add(light);\n      var light2 = new THREE.PointLight(0x555555);\n      light2.shadow.camera.near = 1;\n      light2.shadow.camera.far = 5000;\n      light2.position.set(0, 350, 0);\n      light2.castShadow = false; //表示这个光是可以产生阴影的\n\n      this.scene.add(light2);\n      RectAreaLightUniformsLib.init();\n      var light3 = new THREE.RectAreaLight(0x00ff00, 5, 4, 10);\n      light3.position.set(50, 50, -50);\n      light3.lookAt(0, 100, 0);\n      light3.intensity = 100;\n      light3.width = 200;\n      light3.height = 10;\n      this.scene.add(light3);\n    } //渲染\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      this.animate();\n    }\n  }, {\n    key: \"animate\",\n    value: function animate() {\n      requestAnimationFrame(this.render.bind(this));\n      this.renderer.render(this.scene, this.camera);\n    }\n  }, {\n    key: \"setHelper\",\n    value: function setHelper() {\n      //红色x,绿色y,蓝色z\n      var axesHelper = new THREE.AxisHelper(5);\n      this.scene.add(axesHelper);\n    } //鼠标拖拽控制\n\n  }, {\n    key: \"setControl\",\n    value: function setControl() {\n      this.controls = new OrbitControls(this.camera, this.dom);\n      this.controls.update();\n    }\n  }, {\n    key: \"InitData\",\n    value: function InitData() {\n      // this.Loading();\n      if (this.objList.length > 0) {\n        for (var i = 0; i < this.objList.length; i++) {\n          this.InitAddObject(this.objList[i]);\n        }\n      } // if(this.btnList.length>0){\n      //     this.InitBtn();\n      // }\n\n\n      this.createText(this.objList[0].width, this.objList[0].depth);\n      this.InitTooltip(); // this.LoadSuccess();\n    } //刷新视图\n\n  }, {\n    key: \"resetView\",\n    value: function resetView() {\n      this.dom.removeChild(this.renderer.domElement);\n      var map = new ThreeMap(this.props, this.ThreeData);\n      map.init();\n    }\n  }, {\n    key: \"Loading\",\n    value: function Loading() {\n      var div = document.createElement(\"div\");\n      div.setAttribute(\"id\", \"loading\");\n      div.style.display = \"block\";\n      div.style.position = \"absolute\";\n      div.style.left = \"0\";\n      div.style.top = \"0\";\n      div.style.width = \"100%\";\n      div.style.height = \"100%\";\n      div.style.fontSize = \"30px\";\n      div.style.zIndex = \"999\";\n      div.style.background = \"rgba(0,0,0,0.65)\";\n      var loading = document.createElement(\"div\");\n      loading.innerHTML = \"模型加载中...\";\n      loading.style.top = \"40%\";\n      loading.style.position = \"absolute\";\n      loading.style.width = \"100%\";\n      loading.style.textAlign = \"center\";\n      div.appendChild(loading);\n      this.dom.appendChild(div);\n    }\n  }, {\n    key: \"LoadSuccess\",\n    value: function LoadSuccess() {\n      var _this = this;\n\n      if (this.progressSuccess == 3) {\n        var load = this.dom.querySelector(\"#loading\");\n        load.style.display = \"none\";\n        clearTimeout(this.loadtimer);\n      } else {\n        this.loadtimer = setTimeout(function () {\n          _this.LoadSuccess();\n        }, 1000);\n      }\n    } //添加提示框\n\n  }, {\n    key: \"InitTooltip\",\n    value: function InitTooltip() {\n      this.tooltip = document.createElement(\"div\");\n      this.tooltip.setAttribute(\"id\", \"tooltip\");\n      this.tooltip.style.display = \"none\";\n      this.tooltip.style.position = \"absolute\";\n      this.tooltip.style.color = \"#000\";\n      this.tooltip.style.maxWidth = \"200px\";\n      this.tooltip.style.width = \"32px\";\n      this.tooltip.style.height = \"auto\";\n      this.tooltip.style.lineHeight = \"22px\";\n      this.tooltip.style.textAlign = \"center\";\n      this.tooltip.style.padding = \"10px\";\n      this.tooltip.style.background = this.tooltipBG;\n      this.tooltip.style.opacity = 0.8;\n      this.tooltip.style[\"border-radius\"] = \"5px\";\n      var tipdiv = document.createElement(\"div\");\n      tipdiv.setAttribute(\"id\", \"tipdiv\");\n      var tipspan = document.createElement(\"span\");\n      tipspan.style.marginLeft = \"50%\";\n      tipspan.style.bottom = \"-10px\";\n      tipspan.style.left = \"-10px\";\n      tipspan.style.position = \"absolute\";\n      tipspan.style.borderTop = \"10px solid \" + this.tooltipBG;\n      tipspan.style.borderLeft = \"10px solid transparent\";\n      tipspan.style.borderRight = \"10px solid transparent\";\n      this.tooltip.appendChild(tipspan);\n      this.tooltip.appendChild(tipdiv);\n      this.dom.appendChild(this.tooltip);\n    } //添加按钮\n\n  }, {\n    key: \"InitBtn\",\n    value: function InitBtn() {\n      var _this = this;\n\n      var count = this.btnList.length;\n      var step = 24;\n      var div = document.createElement(\"div\");\n      div.setAttribute(\"id\", \"toolbar\");\n      div.style.display = \"block\";\n      div.style.position = \"absolute\";\n      div.style.left = \"10px\";\n      div.style.top = \"75px\";\n      div.style.width = \"32px\";\n      div.style.height = count * step + step + \"px\";\n      div.style.background = \"rgba(255,255,255,0.75)\";\n      div.style[\"border-radius\"] = \"5px\";\n      this.dom.appendChild(div);\n\n      for (var i = 0; i < count; i++) {\n        var button = this.btnList[i];\n        var btnimg = button.btnimg;\n        var img = document.createElement(\"img\");\n        img.style.position = \"absolute\";\n        img.style.left = \"4px\";\n        img.style.top = step / 2 + i * step + \"px\";\n        img.style[\"pointer-events\"] = \"auto\";\n        img.style[\"cursor\"] = \"pointer\";\n        img.setAttribute(\"src\", this.commonFunc.getPath(btnimg));\n        img.style.width = \"24px\";\n        img.style.height = \"24px\";\n        img.setAttribute(\"title\", button.btnTitle);\n\n        img.onclick = function () {\n          button.clickFunction(_this);\n        };\n\n        div.appendChild(img);\n      }\n    } //添加3D对象\n\n  }, {\n    key: \"InitAddObject\",\n    value: function InitAddObject(obj) {\n      if (obj.show == null || typeof obj.show == \"undefined\" || obj.show) {\n        var tempObj = null;\n\n        switch (obj.objType) {\n          case \"cube\":\n            tempObj = this.createCube(obj);\n            this.addObject(tempObj, \"scene\");\n            break;\n\n          case \"desk\":\n            this.createObjDesk(obj);\n            break;\n\n          case \"wall\":\n            this.CreateWall(obj);\n            break;\n\n          case \"emptyCabinet\":\n            tempObj = this.createEmptyCabinet(obj);\n            this.addObject(tempObj, \"scene\");\n            break;\n\n          case \"sprite\":\n            this.createSprite(obj);\n            break;\n\n          case \"switchSprite\":\n            this.createSwitchSprite(obj);\n            break;\n\n          case \"switch\":\n            this.createSwitch(obj);\n            break;\n\n          case \"cylinderPlant\":\n            //自定义花\n            tempObj = this.createCylinderPlant(obj);\n            this.addObject(tempObj, \"scene\");\n            break;\n\n          case \"objPlant\":\n            //模型花\n            this.createObjPlant(obj);\n            break;\n\n          case \"chair\":\n            //模型花\n            this.createObjChair(obj);\n            break;\n\n          case \"objAnnihilator\":\n            //模型灭火器\n            this.createObjAnnihilator(obj);\n            break;\n\n          case \"objCamera\":\n            //模型摄像头\n            this.createObjCamera(obj);\n            break;\n        }\n      }\n    } //创建墙\n\n  }, {\n    key: \"CreateWall\",\n    value: function CreateWall(obj) {\n      var _this = this;\n\n      var commonDepth = obj.depth || 40; //墙体厚度\n\n      var commonHeight = obj.height || 100; //墙体高度\n\n      var commonWidth = obj.width || 300; //墙体宽度\n\n      var commonSkin = obj.style.skinColor || 0x98750f; //建立墙面\n\n      obj.wallData.forEach(function (wallobj, index) {\n        var wallWidth = commonWidth;\n        var wallDepth = wallobj.depth || commonDepth;\n        var positionX = ((wallobj.startDot.x || 0) + (wallobj.endDot.x || 0)) / 2;\n        var positionY = ((wallobj.startDot.y || 0) + (wallobj.endDot.y || 0)) / 2;\n        var positionZ = ((wallobj.startDot.z || 0) + (wallobj.endDot.z || 0)) / 2; //z相同 表示x方向为长度\n\n        if (wallobj.startDot.z == wallobj.endDot.z) {\n          wallWidth = Math.abs(wallobj.startDot.x - wallobj.endDot.x);\n          wallDepth = wallobj.depth || commonDepth;\n        } else if (wallobj.startDot.x == wallobj.endDot.x) {\n          wallWidth = wallobj.depth || commonDepth;\n          wallDepth = Math.abs(wallobj.startDot.z - wallobj.endDot.z);\n        }\n\n        var cubeobj = {\n          width: wallWidth,\n          height: wallobj.height || commonHeight,\n          depth: wallDepth,\n          rotation: wallobj.rotation,\n          x: positionX,\n          y: positionY,\n          z: positionZ,\n          uuid: wallobj.uuid,\n          name: wallobj.name,\n          style: {\n            skinColor: commonSkin,\n            skin: wallobj.skin\n          }\n        };\n\n        var cube = _this.createCube(cubeobj);\n\n        if (_this.commonFunc.hasObj(wallobj.children) && wallobj.children.length > 0) {\n          wallobj.children.forEach(function (walchildobj, index) {\n            var newobj = _this.CreateHole(walchildobj);\n\n            cube = _this.mergeModel(walchildobj.op, cube, newobj, commonSkin);\n          });\n        }\n\n        _this.addObject(cube, \"scene\");\n      });\n    } //模型合并 使用ThreeBSP插件mergeOP计算方式 -表示减去 +表示加上\n\n  }, {\n    key: \"mergeModel\",\n    value: function mergeModel(mergeOP, fobj, sobj, commonSkin) {\n      var fobjBSP = new ThreeBSP(fobj);\n      var sobjBSP = new ThreeBSP(sobj);\n      var resultBSP = null;\n\n      if (mergeOP == \"-\") {\n        resultBSP = fobjBSP.subtract(sobjBSP);\n      } else if (mergeOP == \"+\") {\n        var subMesh = new THREE.Mesh(sobj);\n        sobj.updateMatrix();\n        fobj.geometry.merge(sobj.geometry, sobj.matrix);\n        return fobj; //    resultBSP = fobjBSP.union(sobjBSP);\n      } else if (mergeOP == \"&\") {\n        //交集\n        resultBSP = fobjBSP.intersect(sobjBSP);\n      } else {\n        this.addObject(sobj, \"scene\");\n        return fobj;\n      }\n\n      var cubeMaterialArray = [];\n      cubeMaterialArray.push(new THREE.MeshLambertMaterial({\n        vertexColors: THREE.FaceColors\n      }));\n      var result = resultBSP.toMesh(cubeMaterialArray);\n      result.material.shading = THREE.FlatShading;\n      result.geometry.computeFaceNormals();\n      result.geometry.computeVertexNormals();\n      result.uuid = fobj.uuid + mergeOP + sobj.uuid;\n      result.name = fobj.name + mergeOP + sobj.name;\n      result.material.needsUpdate = true;\n      result.geometry.buffersNeedUpdate = true;\n      result.geometry.uvsNeedUpdate = true;\n      result.material = fobj.material;\n\n      for (var i = 0; i < result.geometry.faces.length; i++) {\n        var faceset = false;\n\n        for (var j = 0; j < fobj.geometry.faces; j++) {\n          if (result.geometry.faces[i].vertexNormals[0].x === fobj.geometry.faces[j].vertexNormals[0].x && result.geometry.faces[i].vertexNormals[0].y === fobj.geometry.faces[j].vertexNormals[0].y && result.geometry.faces[i].vertexNormals[0].z === fobj.geometry.faces[j].vertexNormals[0].z && result.geometry.faces[i].vertexNormals[1].x === fobj.geometry.faces[j].vertexNormals[1].x && result.geometry.faces[i].vertexNormals[1].y === fobj.geometry.faces[j].vertexNormals[1].y && result.geometry.faces[i].vertexNormals[1].z === fobj.geometry.faces[j].vertexNormals[1].z && result.geometry.faces[i].vertexNormals[2].x === fobj.geometry.faces[j].vertexNormals[2].x && result.geometry.faces[i].vertexNormals[2].y === fobj.geometry.faces[j].vertexNormals[2].y && result.geometry.faces[i].vertexNormals[2].z === fobj.geometry.faces[j].vertexNormals[2].z) {\n            result.geometry.faces[i].color.setHex(commonSkin);\n            result.geometry.faces[i].materialIndex = fobj.geometry.faces[j].materialIndex;\n            faceset == true;\n          }\n        }\n\n        if (faceset == false) {\n          for (var j = 0; j < sobj.geometry.faces.length; j++) {\n            if (result.geometry.faces[i].vertexNormals[0].x === sobj.geometry.faces[j].vertexNormals[0].x && result.geometry.faces[i].vertexNormals[0].y === sobj.geometry.faces[j].vertexNormals[0].y && result.geometry.faces[i].vertexNormals[0].z === sobj.geometry.faces[j].vertexNormals[0].z && result.geometry.faces[i].vertexNormals[1].x === sobj.geometry.faces[j].vertexNormals[1].x && result.geometry.faces[i].vertexNormals[1].y === sobj.geometry.faces[j].vertexNormals[1].y && result.geometry.faces[i].vertexNormals[1].z === sobj.geometry.faces[j].vertexNormals[1].z && result.geometry.faces[i].vertexNormals[2].x === sobj.geometry.faces[j].vertexNormals[2].x && result.geometry.faces[i].vertexNormals[2].y === sobj.geometry.faces[j].vertexNormals[2].y && result.geometry.faces[i].vertexNormals[2].z === sobj.geometry.faces[j].vertexNormals[2].z) {\n              result.geometry.faces[i].color.setHex(commonSkin);\n              result.geometry.faces[i].materialIndex = sobj.geometry.faces[j].materialIndex;\n              faceset = true;\n            }\n          }\n        }\n\n        if (faceset == false) {\n          //最后剩余的一点点给颜色\n          result.geometry.faces[i].color.setHex(commonSkin);\n        }\n      }\n\n      result.castShadow = true;\n      result.receiveShadow = true;\n      return result;\n    } //挖洞、玻璃、挂东西\n\n  }, {\n    key: \"CreateHole\",\n    value: function CreateHole(obj) {\n      var commonDepth = 40; //厚度\n\n      var commonHeight = 100; //高度\n\n      var commonWidth = 300; //强体高度\n\n      var commonSkin = 0x98750f; //建立墙面\n\n      var wallWidth = commonWidth;\n      var wallDepth = obj.depth || commonDepth;\n      var positionX = ((obj.startDot.x || 0) + (obj.endDot.x || 0)) / 2;\n      var positionY = ((obj.startDot.y || 0) + (obj.endDot.y || 0)) / 2;\n      var positionZ = ((obj.startDot.z || 0) + (obj.endDot.z || 0)) / 2; //z相同 表示x方向为长度\n\n      if (obj.startDot.z == obj.endDot.z) {\n        wallWidth = Math.abs(obj.startDot.x - obj.endDot.x);\n        wallDepth = obj.depth || commonDepth;\n      } else if (obj.startDot.x == obj.endDot.x) {\n        wallWidth = obj.depth || commonDepth;\n        wallDepth = Math.abs(obj.startDot.z - obj.endDot.z);\n      }\n\n      var cubeobj = {\n        width: wallWidth,\n        height: obj.height || commonHeight,\n        depth: wallDepth,\n        rotation: obj.rotation,\n        uuid: obj.uuid,\n        name: obj.name,\n        objType: obj.objType,\n        x: positionX,\n        y: positionY,\n        z: positionZ,\n        style: {\n          skinColor: obj.skinColor || commonSkin,\n          skin: obj.skin\n        }\n      };\n      var cube = this.createCube(cubeobj);\n      return cube;\n    } //创建盒子体\n\n  }, {\n    key: \"createCube\",\n    value: function createCube(obj) {\n      var width = obj.width || 1000; //x轴\n\n      var height = obj.height || 10; //y轴\n\n      var depth = obj.depth || width; //z轴\n\n      var x = obj.x || 0,\n          y = obj.y || 0,\n          z = obj.z || 0;\n      var skinColor = obj.style.hasOwnProperty(\"skinColor\") ? obj.style.skinColor : \"\"; //width：是x方向上的长度；height：是y方向上的长度；depth：是z方向上的长度；\n\n      var cubeGeometry = new THREE.CubeGeometry(width, height, depth, 0, 0, 1); //六面颜色\n\n      for (var i = 0; i < cubeGeometry.faces.length; i += 2) {\n        cubeGeometry.faces[i].color.setHex(skinColor);\n        cubeGeometry.faces[i + 1].color.setHex(skinColor);\n      } //六面纹理\n\n\n      var skin_up_obj = {\n        vertexColors: THREE.FaceColors\n      };\n      var skin_down_obj = skin_up_obj,\n          skin_fore_obj = skin_up_obj,\n          skin_behind_obj = skin_up_obj,\n          skin_left_obj = skin_up_obj,\n          skin_right_obj = skin_up_obj;\n      var skin_opacity = 1;\n\n      if (obj.style != null && typeof obj.style != \"undefined\" && obj.style.skin != null && typeof obj.style.skin != \"undefined\") {\n        //透明度\n        if (obj.style.skin.opacity != null && typeof obj.style.skin.opacity != \"undefined\") {\n          skin_opacity = obj.style.skin.opacity;\n        }\n\n        var skin_right = obj.style.skin.hasOwnProperty(\"skin_right\") && obj.style.skin.skin_right.hasOwnProperty(\"skinColor\") ? obj.style.skin.skin_right.skinColor : obj.style.skin.hasOwnProperty(\"skinColor\") ? obj.style.skin.skinColor : \"\";\n        var skin_left = obj.style.skin.hasOwnProperty(\"skin_left\") && obj.style.skin.skin_left.hasOwnProperty(\"skinColor\") ? obj.style.skin.skin_left.skinColor : obj.style.skin.hasOwnProperty(\"skinColor\") ? obj.style.skin.skinColor : \"\";\n        var skin_up = obj.style.skin.hasOwnProperty(\"skin_up\") && obj.style.skin.skin_up.hasOwnProperty(\"skinColor\") ? obj.style.skin.skin_up.skinColor : obj.style.skin.hasOwnProperty(\"skinColor\") ? obj.style.skin.skinColor : \"\";\n        var skin_down = obj.style.skin.hasOwnProperty(\"skin_down\") && obj.style.skin.skin_down.hasOwnProperty(\"skinColor\") ? obj.style.skin.skin_down.skinColor : obj.style.skin.hasOwnProperty(\"skinColor\") ? obj.style.skin.skinColor : \"\";\n        var skin_fore = obj.style.skin.hasOwnProperty(\"skin_fore\") && obj.style.skin.skin_fore.hasOwnProperty(\"skinColor\") ? obj.style.skin.skin_fore.skinColor : obj.style.skin.hasOwnProperty(\"skinColor\") ? obj.style.skin.skinColor : \"\";\n        var skin_behind = obj.style.skin.hasOwnProperty(\"skin_behind\") && obj.style.skin.skin_behind.hasOwnProperty(\"skinColor\") ? obj.style.skin.skin_behind.skinColor : obj.style.skin.hasOwnProperty(\"skinColor\") ? obj.style.skin.skinColor : \"\"; //右\n\n        skin_right_obj = this.createSkinOption(depth, height, obj.style.skin.skin_right, cubeGeometry, skin_right, 0); //左\n\n        skin_left_obj = this.createSkinOption(depth, height, obj.style.skin.skin_left, cubeGeometry, skin_left, 2); //上\n\n        skin_up_obj = this.createSkinOption(width, depth, obj.style.skin.skin_up, cubeGeometry, skin_up, 4); //下\n\n        skin_down_obj = this.createSkinOption(width, depth, obj.style.skin.skin_down, cubeGeometry, skin_down, 6); //前\n\n        skin_fore_obj = this.createSkinOption(width, height, obj.style.skin.skin_fore, cubeGeometry, skin_fore, 8); //后\n\n        skin_behind_obj = this.createSkinOption(width, height, obj.style.skin.skin_behind, cubeGeometry, skin_behind, 10);\n      }\n\n      var cubeMaterialArray = []; //右，左，上，下，前，后\n      //右：134、364；左：570、720；上：451、501；下：762、632；前：021、231；后：465、675；\n      //正面：上左上右下左下右(0123)；后面正对看：上左上右下左下右(4567)\n\n      cubeMaterialArray.push(new THREE.MeshLambertMaterial(skin_right_obj));\n      cubeMaterialArray.push(new THREE.MeshLambertMaterial(skin_left_obj));\n      cubeMaterialArray.push(new THREE.MeshLambertMaterial(skin_up_obj));\n      cubeMaterialArray.push(new THREE.MeshLambertMaterial(skin_down_obj));\n      cubeMaterialArray.push(new THREE.MeshLambertMaterial(skin_fore_obj));\n      cubeMaterialArray.push(new THREE.MeshLambertMaterial(skin_behind_obj));\n      var cube = new THREE.Mesh(cubeGeometry, cubeMaterialArray);\n      cube.castShadow = true;\n      cube.receiveShadow = true;\n      cube.uuid = obj.uuid;\n      cube.name = obj.name;\n      cube.position.set(x, y, z);\n\n      if (obj.rotation != null && typeof obj.rotation != \"undefined\" && obj.rotation.length > 0) {\n        obj.rotation.forEach(function (rotation_obj, index) {\n          // rotation: [{ direction: 'x', degree: 0.5*Math.PI }],\n          switch (rotation_obj.direction) {\n            case \"x\":\n              cube.rotateX(rotation_obj.degree);\n              break;\n\n            case \"y\":\n              cube.rotateY(rotation_obj.degree);\n              break;\n\n            case \"z\":\n              cube.rotateZ(rotation_obj.degree);\n              break;\n\n            case \"arb\":\n              //{ direction: 'arb', degree: [x,y,z,angle] }  x,y,z是向量0,1,0 表示y轴旋转\n              cube.rotateOnAxis(new THREE.Vector3(rotation_obj.degree[0], rotation_obj.degree[1], rotation_obj.degree[2]), rotation_obj.degree[3]);\n              break;\n          }\n        });\n      }\n\n      return cube;\n    } // 创建桌子\n\n  }, {\n    key: \"CreateTable\",\n    value: function CreateTable(obj) {\n      //初始以下为基点(中心点以机柜的中心为中心点)\n      var Cabinet,\n          floorHeight = 10,\n          uuid = obj.uuid || this.commonFunc.guid(); //上\n\n      var upobj = {\n        show: true,\n        uuid: \"\",\n        name: \"cubetop\",\n        objType: \"cube\",\n        width: obj.size.width,\n        height: obj.size.thick,\n        depth: obj.size.depth,\n        x: 0,\n        y: obj.size.height - obj.size.thick,\n        z: 0,\n        style: {\n          skinColor: obj.style.skinColor,\n          skin: obj.style.skin\n        }\n      };\n      var upcube = this.createCube(upobj); //左\n\n      var leftobj = {\n        show: true,\n        uuid: \"\",\n        name: \"cubeleft\",\n        objType: \"cube\",\n        width: obj.size.thick,\n        height: obj.size.height - 2 * obj.size.thick,\n        depth: obj.size.depth,\n        x: -(obj.size.width / 2 + obj.size.thick / 2) * 0.9,\n        y: -obj.size.height / 2 + obj.size.thick / 2,\n        z: 0,\n        style: {\n          skinColor: obj.style.skinColor,\n          skin: obj.style.skin\n        }\n      };\n      var leftcube = this.createCube(leftobj);\n      Cabinet = this.mergeModel(\"+\", upcube, leftcube); //右\n\n      var rightobj = {\n        show: true,\n        uuid: \"\",\n        name: \"cuberight\",\n        objType: \"cube\",\n        width: obj.size.thick,\n        height: obj.size.height - 2 * obj.size.thick,\n        depth: obj.size.depth,\n        x: (obj.size.width / 2 - obj.size.thick / 2) * 0.9,\n        y: -obj.size.height / 2 + obj.size.thick / 2,\n        z: 0,\n        style: {\n          skinColor: obj.style.skinColor,\n          skin: obj.style.skin\n        }\n      };\n      var rightcube = this.createCube(rightobj);\n      Cabinet = this.mergeModel(\"+\", Cabinet, rightcube);\n      this.addObject(Cabinet, \"object\"); //这里也得给添加到对象，不然hour的时候设备的提示信息有问题，没拉出设备放机柜顶上也提示了\n\n      var tempobj = new THREE.Object3D();\n      tempobj.add(Cabinet);\n      tempobj.name = obj.name;\n      tempobj.uuid = uuid;\n      tempobj.data = obj.data || {\n        name: obj.name,\n        alarmInfo: []\n      };\n      tempobj.position.set(obj.x || 0, (obj.y || 0) + floorHeight, obj.z || 0);\n      this.addObject(tempobj, \"object\");\n\n      if (obj.rotation != null && typeof obj.rotation != \"undefined\" && obj.rotation.length > 0) {\n        obj.rotation.forEach(function (rotation_obj, index) {\n          // rotation: [{ direction: 'x', degree: 0.5*Math.PI }],\n          switch (rotation_obj.direction) {\n            case \"x\":\n              tempobj.rotateX(rotation_obj.degree);\n              break;\n\n            case \"y\":\n              tempobj.rotateY(rotation_obj.degree);\n              break;\n\n            case \"z\":\n              tempobj.rotateZ(rotation_obj.degree);\n              break;\n\n            case \"arb\":\n              //{ direction: 'arb', degree: [x,y,z,angle] }\n              tempobj.rotateOnAxis(new THREE.Vector3(rotation_obj.degree[0], rotation_obj.degree[1], rotation_obj.degree[2]), rotation_obj.degree[3]);\n              break;\n          }\n        });\n      }\n\n      return tempobj;\n    } //创建柜子\n\n  }, {\n    key: \"createEmptyCabinet\",\n    value: function createEmptyCabinet(obj) {\n      //初始以下为基点(中心点以机柜的中心为中心点)\n      var Cabinet,\n          floorHeight = 10,\n          _this = this,\n          uuid = obj.uuid || this.commonFunc.guid(); //下\n\n\n      var downobj = {\n        show: true,\n        name: \"cubedown\",\n        uuid: \"\",\n        objType: \"cube\",\n        width: obj.size.width,\n        height: obj.size.thick,\n        depth: obj.size.depth,\n        x: 0,\n        y: -obj.size.height / 2 + obj.size.thick / 2,\n        z: 0,\n        style: {\n          skinColor: obj.style.skinColor,\n          skin: obj.style.skin\n        }\n      };\n      var downcube = this.createCube(downobj); //上\n\n      var upobj = {\n        show: true,\n        uuid: \"\",\n        name: \"cubetop\",\n        objType: \"cube\",\n        width: obj.size.width,\n        height: obj.size.thick,\n        depth: obj.size.depth,\n        x: 0,\n        y: obj.size.height - obj.size.thick,\n        z: 0,\n        style: {\n          skinColor: obj.style.skinColor,\n          skin: obj.style.skin\n        }\n      };\n      var upcube = this.createCube(upobj);\n      Cabinet = this.mergeModel(\"+\", downcube, upcube); //左\n\n      var leftobj = {\n        show: true,\n        uuid: \"\",\n        name: \"cubeleft\",\n        objType: \"cube\",\n        width: obj.size.thick,\n        height: obj.size.height - 2 * obj.size.thick,\n        depth: obj.size.depth,\n        x: -obj.size.width / 2 + obj.size.thick / 2,\n        y: obj.size.height / 2 - obj.size.thick / 2,\n        z: 0,\n        style: {\n          skinColor: obj.style.skinColor,\n          skin: obj.style.skin\n        }\n      };\n      var leftcube = this.createCube(leftobj);\n      Cabinet = this.mergeModel(\"+\", Cabinet, leftcube); //右\n\n      var rightobj = {\n        show: true,\n        uuid: \"\",\n        name: \"cuberight\",\n        objType: \"cube\",\n        width: obj.size.thick,\n        height: obj.size.height - 2 * obj.size.thick,\n        depth: obj.size.depth,\n        x: obj.size.width / 2 - obj.size.thick / 2,\n        y: obj.size.height / 2 - obj.size.thick / 2,\n        z: 0,\n        style: {\n          skinColor: obj.style.skinColor,\n          skin: obj.style.skin\n        }\n      };\n      var rightcube = this.createCube(rightobj);\n      Cabinet = this.mergeModel(\"+\", Cabinet, rightcube); //后\n\n      var behindobj = {\n        show: true,\n        uuid: \"\",\n        name: \"\",\n        objType: \"cube\",\n        width: obj.size.width,\n        height: obj.size.height - 2 * obj.size.thick,\n        depth: obj.size.thick,\n        x: 0,\n        y: obj.size.height / 2 - obj.size.thick / 2,\n        z: -obj.size.depth / 2 + obj.size.thick / 2,\n        style: {\n          skinColor: obj.style.skinColor,\n          skin: obj.style.skin\n        }\n      };\n      var behindcube = this.createCube(behindobj);\n      Cabinet = this.mergeModel(\"+\", Cabinet, behindcube);\n      this.addObject(Cabinet, \"object\"); //这里也得给添加到对象，不然hour的时候设备的提示信息有问题，没拉出设备放机柜顶上也提示了\n\n      var tempobj = new THREE.Object3D();\n      tempobj.add(Cabinet);\n      tempobj.name = obj.name;\n      tempobj.uuid = uuid;\n      tempobj.data = obj.data || {\n        name: obj.name,\n        alarmInfo: []\n      };\n      tempobj.position.set(obj.x || 0, (obj.y || 0) + floorHeight, obj.z || 0);\n      this.addObject(tempobj, \"object\");\n      this.cabinet.push(tempobj); //门\n\n      if (obj.doors != null && typeof obj.doors != \"undefined\") {\n        if (obj.doors.skins.length == 1 && obj.doors.doorname.length == 1) {\n          var doorobj = {\n            show: true,\n            uuid: \"\",\n            name: obj.doors.doorname[0],\n            objType: \"cube\",\n            depth: obj.size.thick,\n            width: obj.size.width,\n            height: obj.size.height - 2 * obj.size.thick,\n            x: 0,\n            y: 0,\n            z: obj.size.depth / 2 - obj.size.thick / 2 + 1,\n            rotation: obj.doors.rotation || null,\n            style: {\n              skinColor: obj.doors.skins[0].skinColor,\n              skin: obj.doors.skins[0]\n            }\n          };\n          var doorcube = this.createCube(doorobj);\n\n          if (obj.doors.rotation) {\n            doorcube.position.set(obj.size.width / 2, 0, obj.size.depth / 2 - obj.size.thick / 2 + 1 + obj.size.width / 2);\n          }\n\n          doorcube.tipInfo = obj.doors.tipInfo;\n          tempobj.add(doorcube);\n          this.addObject(doorcube, \"object\");\n        } else if (obj.doors.skins.length == 2 && obj.doors.doorname.length == 2) {\n          for (var i = 0; i < obj.doors.skins.length; i++) {\n            var x = i === 0 ? -obj.size.width / 4 : obj.size.width / 4;\n            var doorobj = {\n              show: true,\n              uuid: \"\",\n              name: obj.doors.doorname[i],\n              objType: \"cube\",\n              depth: obj.size.thick,\n              width: obj.size.width / 2,\n              height: obj.size.height,\n              x: x,\n              y: 0,\n              z: obj.size.depth / 2 - obj.size.thick / 2 + 1,\n              style: {\n                skinColor: obj.doors.skins[i].skinColor,\n                skin: obj.doors.skins[i]\n              }\n            };\n            var doorcube = this.createCube(doorobj);\n            tempobj.add(doorcube);\n            this.addObject(doorcube, \"object\");\n          }\n        }\n      } //机柜告警信息\n\n\n      if (this.commonFunc.hasObj(obj.data)) {\n        //文本信息\n        var width = obj.size.width || 70;\n        var height = obj.size.height || 70;\n        var canvas = document.createElement(\"canvas\");\n        canvas[\"width\"] = width;\n        canvas[\"height\"] = height;\n        var context = canvas.getContext(\"2d\");\n        context.beginPath();\n        context.rect(0, 0, width, height);\n        context.fillStyle = \"rgba(255, 255, 255, 0)\"; //canvas设置为透明\n\n        context.fill();\n\n        var marker = function marker(context, x, y, text) {\n          var color = \"#ffffff\";\n          context.font = 12 + 'px \"Microsoft Yahei\" ';\n          context.fillStyle = color;\n          context.textAlign = \"center\";\n          context.textBaseline = \"middle\";\n          context.strokeStyle = color;\n          context.fillText(text, x, y);\n        };\n\n        marker(context, width / 2, height / 2, obj.data.name);\n        var alarmobj = {\n          width: width,\n          height: height,\n          imgurl: canvas,\n          y: obj.size.height / 2 + 1,\n          transparent: true,\n          opacity: 0.8,\n          rotation: [{\n            direction: \"x\",\n            degree: -0.5 * Math.PI\n          }]\n        };\n        var text = this.createPlaneGeometry(alarmobj);\n        tempobj.add(text); //告警信息\n      }\n\n      if (this.commonFunc.hasObj(obj.children) && obj.children.length > 0) {\n        var equipmentUUID = [];\n        obj.children.forEach(function (service, index) {\n          var serviceuuid = service.uuid || _this.commonFunc.guid();\n\n          service.x = obj.x;\n          service.z = obj.z;\n          service.y = service.y + floorHeight + (obj.y - (obj.size.height - 2 * obj.size.thick) / 2);\n          service.rotation = obj.rotation || null;\n\n          var newobj = _this.createCube(service);\n\n          newobj.data = service.data;\n          newobj.data[\"cabinetUUID\"] = uuid;\n          newobj.uuid = serviceuuid;\n          equipmentUUID.push(serviceuuid);\n\n          _this.addObject(newobj);\n\n          _this.equipment.push(newobj);\n        });\n        tempobj.data[\"equipmentUUID\"] = equipmentUUID;\n      }\n\n      if (obj.rotation != null && typeof obj.rotation != \"undefined\" && obj.rotation.length > 0) {\n        obj.rotation.forEach(function (rotation_obj, index) {\n          // rotation: [{ direction: 'x', degree: 0.5*Math.PI }],\n          switch (rotation_obj.direction) {\n            case \"x\":\n              tempobj.rotateX(rotation_obj.degree);\n              break;\n\n            case \"y\":\n              tempobj.rotateY(rotation_obj.degree);\n              break;\n\n            case \"z\":\n              tempobj.rotateZ(rotation_obj.degree);\n              break;\n\n            case \"arb\":\n              //{ direction: 'arb', degree: [x,y,z,angle] }\n              tempobj.rotateOnAxis(new THREE.Vector3(rotation_obj.degree[0], rotation_obj.degree[1], rotation_obj.degree[2]), rotation_obj.degree[3]);\n              break;\n          }\n        });\n      }\n\n      return tempobj;\n    } //创建圆柱体\n\n  }, {\n    key: \"createCylinderPlant\",\n    value: function createCylinderPlant(obj) {\n      var _this = this;\n\n      var radiusTop = obj.radiusTop || 20; //顶面的半径\n\n      var radiusBottom = obj.radiusBottom || 20; //底面的半径\n\n      var height = obj.height || 100; //高度\n\n      var radiusSegments = obj.radiusSegments || 8;\n      var heightSegments = obj.heightSegments || 1;\n      var openEnded = obj.openEnded || false;\n      var x = obj.x || 0,\n          y = obj.y || 0,\n          z = obj.z || 0;\n      var skinColor = obj.style.skinColor || 0x98750f; //创建圆柱体\n\n      var cylinderGeo = new THREE.CylinderGeometry(radiusTop, radiusBottom, height, radiusSegments, heightSegments, openEnded); // console.log(cylinderGeo)\n\n      var cylinderMat = new THREE.MeshLambertMaterial({\n        //创建材料\n        color: skinColor,\n        wireframe: false\n      }); //创建圆柱体网格模型\n\n      var cylinder = new THREE.Mesh(cylinderGeo, cylinderMat);\n      cylinder.position.set(x, y, z); //设置圆柱坐标\n\n      if (this.commonFunc.hasObj(obj.children) && obj.children.length > 0) {\n        obj.children.forEach(function (childobj, index) {\n          var newobj;\n\n          if (childobj.objType == \"plane\") {\n            newobj = _this.createPlaneGeometry(childobj);\n          } else {\n            newobj = _this.createCylinderPlant(childobj);\n          }\n\n          _this.addObject(newobj, \"scene\"); // cylinder = _this.mergeModel('+', cylinder, newobj,skinColor);\n\n        });\n      }\n\n      return cylinder;\n    } //创建平面\n\n  }, {\n    key: \"createPlaneGeometry\",\n    value: function createPlaneGeometry(obj) {\n      var texture;\n      var transparent = obj.transparent;\n\n      if (obj.transparent !== false) {\n        transparent = true;\n      }\n\n      if (typeof obj.imgurl == \"string\") {\n        //传入的材质是图片路径，使用 textureloader加载图片作为材质\n        var loader = new THREE.TextureLoader(); // loader.setCrossOrigin(this.crossOrigin);\n\n        var imgurl = obj.imgurl;\n\n        if (obj.imgurl.indexOf(\"data:image/\") == -1) {\n          imgurl = this.commonFunc.getPath(obj.imgurl);\n        }\n\n        texture = loader.load(imgurl, function () {}, undefined, function () {});\n      } else {\n        texture = new THREE.CanvasTexture(obj.imgurl);\n      }\n\n      var MaterParam = {\n        //材质的参数\n        map: texture,\n        side: obj.side || THREE.DoubleSide,\n        // side:THREE.FrontSide,\n        transparent: transparent,\n        opacity: obj.opacity || 1\n      };\n\n      if (obj.blending) {\n        MaterParam.blending = THREE.AdditiveBlending; //使用饱和度叠加渲染\n      }\n\n      var plane = new THREE.Mesh(new THREE.PlaneGeometry(obj.width, obj.height, 1, 1), new THREE.MeshBasicMaterial(MaterParam));\n      plane.position.x = obj.x || 0;\n      plane.position.y = obj.y || 0;\n      plane.position.z = obj.z || 0;\n\n      if (obj.rotation != null && typeof obj.rotation != \"undefined\" && obj.rotation.length > 0) {\n        obj.rotation.forEach(function (rotation_obj, index) {\n          // rotation: [{ direction: 'x', degree: 0.5*Math.PI }],\n          switch (rotation_obj.direction) {\n            case \"x\":\n              plane.rotateX(rotation_obj.degree);\n              break;\n\n            case \"y\":\n              plane.rotateY(rotation_obj.degree);\n              break;\n\n            case \"z\":\n              plane.rotateZ(rotation_obj.degree);\n              break;\n\n            case \"arb\":\n              //{ direction: 'arb', degree: [x,y,z,angle] }  x,y,z是向量0,1,0 表示y轴旋转\n              plane.rotateOnAxis(new THREE.Vector3(rotation_obj.degree[0], rotation_obj.degree[1], rotation_obj.degree[2]), rotation_obj.degree[3]);\n              break;\n          }\n        });\n      }\n\n      return plane;\n    } //模型植物加载\n\n  }, {\n    key: \"createObjPlant\",\n    value: function createObjPlant(obj) {\n      var _this = this;\n\n      var mtlLoader = new MTLLoader();\n      mtlLoader.load(_this.commonFunc.getPath(\"plant/plant.mtl\"), function (materials) {\n        materials.preload();\n        var objLoader = new OBJLoader();\n        console.log(materials);\n        objLoader.setMaterials(materials);\n        objLoader.load(_this.commonFunc.getPath(\"plant/plant.obj\"), function (object) {\n          obj.children.forEach(function (childobj) {\n            var newobj = object.clone();\n\n            if (!newobj.objHandle) {\n              if (childobj.objHandle) {\n                newobj.objHandle = childobj.objHandle;\n              } else if (obj.objHandle) {\n                newobj.objHandle = obj.objHandle;\n              }\n            }\n\n            newobj = _this.handleObj(newobj);\n            newobj.position.set(childobj.x || 0, childobj.y || 0, childobj.z || 0);\n\n            _this.scene.add(newobj);\n          });\n          _this.progressSuccess += 1;\n        }, _this.onProgress, _this.onError);\n      });\n    } // 创建椅子\n\n  }, {\n    key: \"createObjChair\",\n    value: function createObjChair(obj) {\n      var _this = this;\n\n      var mtlLoader = new MTLLoader();\n      mtlLoader.load(_this.commonFunc.getPath(\"chair/chair.mtl\"), function (materials) {\n        materials.preload();\n        var objLoader = new OBJLoader();\n        objLoader.setMaterials(materials);\n        objLoader.load(_this.commonFunc.getPath(\"chair/chair.obj\"), function (object) {\n          obj.children.forEach(function (childobj) {\n            var newobj = object.clone();\n\n            if (!newobj.objHandle) {\n              if (childobj.objHandle) {\n                newobj.objHandle = childobj.objHandle;\n              } else if (obj.objHandle) {\n                newobj.objHandle = obj.objHandle;\n              }\n            }\n\n            newobj = _this.handleObj(newobj);\n            newobj.position.set(childobj.x || 0, childobj.y || 0, childobj.z || 0);\n\n            _this.scene.add(newobj);\n          });\n          _this.progressSuccess += 1;\n        }, _this.onProgress, _this.onError);\n      });\n    } // 创建桌子\n\n  }, {\n    key: \"createObjDesk\",\n    value: function createObjDesk(obj) {\n      var _this = this;\n\n      var mtlLoader = new MTLLoader();\n      mtlLoader.load(_this.commonFunc.getPath(\"desk/desk.mtl\"), function (materials) {\n        // materials['materialsInfo']['Bamboo_Wood']['map_kd'] = _this.BASE_PATH + 'desk/bamboo-wood-semigloss-albedo.png'\n        // materials['materialsInfo']['Bamboo_Wood']['map_ns'] = _this.BASE_PATH + 'bamboo-wood-semigloss-roughness.png'\n        // materials['materialsInfo']['Bamboo_Wood']['refl'] = _this.BASE_PATH + 'bamboo-wood-semigloss-metal.png'\n        materials.preload();\n        var objLoader = new OBJLoader();\n        objLoader.setMaterials(materials);\n        objLoader.load(_this.commonFunc.getPath(\"desk/desk.obj\"), function (object) {\n          obj.children.forEach(function (childobj) {\n            var newobj = object.clone();\n\n            if (!newobj.objHandle) {\n              if (childobj.objHandle) {\n                newobj.objHandle = childobj.objHandle;\n              } else if (obj.objHandle) {\n                newobj.objHandle = obj.objHandle;\n              }\n            }\n\n            newobj = _this.handleObj(newobj);\n            newobj.position.set(childobj.x || 0, childobj.y || 0, childobj.z || 0);\n\n            _this.scene.add(newobj);\n          });\n          _this.progressSuccess += 1;\n        }, _this.onProgress, _this.onError);\n      });\n    } //模型灭火器\n\n  }, {\n    key: \"createObjAnnihilator\",\n    value: function createObjAnnihilator(obj) {\n      var _this = this;\n\n      var mtlLoader = new MTLLoader();\n      mtlLoader.load(_this.commonFunc.getPath(\"annihilator/annihilator.mtl\"), function (materials) {\n        materials.preload();\n        var objLoader = new OBJLoader();\n        objLoader.setMaterials(materials);\n        objLoader.load(_this.commonFunc.getPath(\"annihilator/annihilator.obj\"), function (object) {\n          obj.children.forEach(function (childobj) {\n            var newobj = object.clone();\n\n            if (!newobj.objHandle) {\n              if (childobj.objHandle) {\n                newobj.objHandle = childobj.objHandle;\n              } else if (obj.objHandle) {\n                newobj.objHandle = obj.objHandle;\n              }\n            }\n\n            newobj = _this.handleObj(newobj);\n            newobj.position.set(childobj.x || 0, childobj.y || 0, childobj.z || 0);\n\n            _this.scene.add(newobj);\n          });\n          _this.progressSuccess += 1;\n        }, _this.onProgress, _this.onError);\n      });\n    } //摄像头\n\n  }, {\n    key: \"createObjCamera\",\n    value: function createObjCamera(obj) {\n      var _this = this;\n\n      var mtlLoader = new MTLLoader();\n      mtlLoader.load(_this.commonFunc.getPath(\"camera/camera.mtl\"), function (materials) {\n        materials.preload();\n        var objLoader = new OBJLoader();\n        objLoader.setMaterials(materials);\n        objLoader.load(_this.commonFunc.getPath(\"camera/camera.obj\"), function (object) {\n          obj.children.forEach(function (childobj) {\n            var newobj = object.clone();\n\n            if (!newobj.objHandle) {\n              if (childobj.objHandle) {\n                newobj.objHandle = childobj.objHandle;\n              } else if (obj.objHandle) {\n                newobj.objHandle = obj.objHandle;\n              }\n            }\n\n            newobj = _this.handleObj(newobj);\n            newobj.position.set(childobj.x || 0, childobj.y || 0, childobj.z || 0);\n\n            _this.scene.add(newobj);\n          });\n          _this.progressSuccess += 1;\n        }, _this.onProgress, _this.onError);\n      });\n    }\n  }, {\n    key: \"handleObj\",\n    value: function handleObj(obj) {\n      if (obj.objHandle != null && typeof obj.objHandle != \"undefined\" && obj.objHandle.length > 0) {\n        obj.objHandle.forEach(function (childobj) {\n          // objHandle: [{ direction: 'x', ratio: 0.5 ,degree:0.5*Math.PI}],\n          switch (childobj.direction) {\n            case \"x\":\n              if (childobj.ratio) {\n                obj.scale.x = childobj.ratio;\n              }\n\n              if (childobj.degree) {\n                obj.rotateX(childobj.degree);\n              }\n\n              break;\n\n            case \"y\":\n              if (childobj.ratio) {\n                obj.scale.y = childobj.ratio;\n              }\n\n              if (childobj.degree) {\n                obj.rotateY(childobj.degree);\n              }\n\n              break;\n\n            case \"z\":\n              if (childobj.ratio) {\n                obj.scale.z = childobj.ratio;\n              }\n\n              if (childobj.degree) {\n                obj.rotateZ(childobj.degree);\n              }\n\n              break;\n\n            case \"arb\":\n              //{ direction: 'arb', handleScale: [0.01,0.01,0.01], handleRotale: [0,1,0,0.5*Math.PI]}\n              if (childobj.handleScale && childobj.handleScale.length == 3) {\n                obj.scale.set(childobj.handleScale[0], childobj.handleScale[1], childobj.handleScale[2]);\n              }\n\n              if (childobj.handleRotale && childobj.handleRotale.length == 4) {\n                obj.rotateOnAxis(new THREE.Vector3(childobj.handleRotale[0], childobj.handleRotale[1], childobj.handleRotale[2]), childobj.handleRotale[3]);\n              }\n\n              break;\n          }\n        });\n      }\n\n      return obj;\n    } //进度通知\n\n  }, {\n    key: \"changePivot\",\n    //设置旋转中心\n    value: function changePivot(obj, x, y, z) {\n      var tempobj = new THREE.Object3D();\n      tempobj.position.set(obj.position.x + x, obj.position.y + y, obj.position.z + z);\n      obj.position.set(-x, -y, -z);\n      tempobj.add(obj);\n      return tempobj;\n    } //添加对象\n\n  }, {\n    key: \"addObject\",\n    value: function addObject(obj, info) {\n      if (info) {\n        if (info == \"object\") {\n          this.objects.push(obj);\n        }\n\n        if (info == \"scene\") {\n          this.scene.add(obj);\n        }\n      } else {\n        this.objects.push(obj);\n        this.scene.add(obj);\n      }\n    } //创建皮肤材质操作\n\n  }, {\n    key: \"createSkinOption\",\n    value: function createSkinOption(width, height, obj, cube, cubeColor, cubefacenub) {\n      if (this.commonFunc.hasObj(obj)) {\n        if (this.commonFunc.hasObj(obj.imgUrl)) {\n          var MaterParam = {\n            color: cubeColor,\n            map: this.createSkin(width, height, obj),\n            opacity: obj.opacity || 1\n          };\n\n          if (obj.transparent) {\n            MaterParam.transparent = obj.transparent;\n          }\n\n          if (obj.blending) {\n            MaterParam.blending = THREE.AdditiveBlending; //使用饱和度叠加渲染\n          }\n\n          return MaterParam;\n        } else {\n          if (this.commonFunc.hasObj(obj.skinColor)) {\n            cube.faces[cubefacenub].color.setHex(obj.skinColor);\n            cube.faces[cubefacenub + 1].color.setHex(obj.skinColor);\n          }\n\n          return {\n            vertexColors: THREE.FaceColors\n          };\n        }\n      } else {\n        return {\n          vertexColors: THREE.FaceColors\n        };\n      }\n    } //使用材质图片\n\n  }, {\n    key: \"createSkin\",\n    value: function createSkin(width, height, obj) {\n      var imgwidth = 128,\n          imgheight = 128;\n\n      if (obj.width != null && typeof obj.width != \"undefined\") {\n        imgwidth = obj.width;\n      }\n\n      if (obj.height != null && typeof obj.height != \"undefined\") {\n        imgheight = obj.height;\n      }\n\n      var texture = new THREE.TextureLoader().load(this.commonFunc.getPath(obj.imgUrl));\n      var repeat = false;\n\n      if (obj.repeatx != null && typeof obj.repeatx != \"undefined\" && obj.repeatx == true) {\n        texture.wrapS = THREE.RepeatWrapping;\n        repeat = true;\n      }\n\n      if (obj.repeaty != null && typeof obj.repeaty != \"undefined\" && obj.repeaty == true) {\n        texture.wrapT = THREE.RepeatWrapping;\n        repeat = true;\n      }\n\n      if (repeat) {\n        texture.repeat.set(width / imgwidth, height / imgheight);\n      }\n\n      return texture;\n    } //创建文字\n\n  }, {\n    key: \"createText\",\n    value: function createText(floorWidth, floorHeight) {\n      var canvas = document.createElement(\"canvas\");\n      canvas[\"width\"] = 1024;\n      canvas[\"height\"] = 1024;\n      var context = canvas.getContext(\"2d\");\n      context.beginPath();\n      context.rect(0, 0, 1024, 1024);\n      context.fillStyle = \"rgba(255, 255, 255, 0)\"; //canvas设置为透明\n\n      context.fill();\n\n      var marker = function marker(context, text, text2, x, y) {\n        var color = \"#0B2F3A\"; //'#0B2F3A';//'#FE642E';\n\n        context.font = 30 + 'px \"Microsoft Yahei\" ';\n        context.fillStyle = color;\n        context.textAlign = \"center\";\n        context.textBaseline = \"middle\"; //context.shadowBlur = 30;\n\n        context.strokeStyle = color;\n        context.lineWidth = 3;\n        context.strokeText(text, x, y);\n        if (!text2) return;\n        y += 30;\n        color = \"#FE642E\";\n        context.font = 16 + 'px \"Microsoft Yahei\" ';\n        context.fillStyle = color;\n        context.textAlign = \"center\";\n        context.textBaseline = \"middle\";\n        context.fillText(text2, x, y);\n      };\n\n      marker(context, \"阿里巴巴\", \"ip待分配\", 500, 380);\n      marker(context, \"腾讯\", \"192.168.1.150\", 500, 495);\n      marker(context, \"依米康·龙控\", \"192.168.1.100\", 500, 610);\n      var obj = {\n        width: floorHeight,\n        height: floorWidth,\n        imgurl: canvas,\n        y: 6,\n        transparent: true,\n        opacity: 0.8,\n        rotation: [{\n          direction: \"x\",\n          degree: -0.5 * Math.PI\n        }, {\n          direction: \"z\",\n          degree: 0.5 * Math.PI\n        }]\n      };\n      var text = this.createPlaneGeometry(obj);\n      this.scene.add(text);\n    } //更新告警状态\n\n  }, {\n    key: \"updateAlarmStatus\",\n    value: function updateAlarmStatus(arr) {\n      for (var i = 0; i < this.equipment.length; i++) {\n        for (var j = 0; j < arr.length; j++) {\n          if (arr[j].devid == this.equipment[i].data.devid && arr[j].pointid == this.equipment[i].data.pointid) {\n            for (var m = 0; m < this.sprite.length; m++) {\n              if (this.sprite[m].data.cabinetUUID == this.equipment[i].data.cabinetUUID) {\n                this.changeCabinetAlarmObj(arr[j], m, i);\n              }\n            }\n          }\n        }\n      }\n    } //更新机柜的告警对象\n\n  }, {\n    key: \"changeCabinetAlarmObj\",\n    value: function changeCabinetAlarmObj(obj, spriteIndex, equipmentIndex) {\n      var arr = this.sprite[spriteIndex].data.alarmInfo;\n      this.sprite[spriteIndex].material.map;\n\n      if (obj.isalarm) {\n        if (Number(this.sprite[spriteIndex].data.level) < Number(obj.level)) {\n          this.sprite[spriteIndex].data.level = obj.level;\n          this.sprite[spriteIndex].material.color.set(this.alarmColor[\"level\" + obj.level]);\n        }\n\n        var flag = true; //默认是新的告警\n\n        for (var i = 0; i < arr.length; i++) {\n          if (arr[i].devid == obj.devid && arr[i].pointid == obj.pointid) {\n            //已经存在的告警再次告警\n            arr.splice(i, 1, obj);\n            flag = false;\n          }\n        }\n\n        if (flag) {\n          arr.push(obj);\n        }\n\n        if (this.equipment[equipmentIndex].material.length > 0) {\n          for (var _i = 0; _i < this.equipment[equipmentIndex].material.length; _i++) {\n            this.equipment[equipmentIndex].material[_i].color.set(this.alarmColor[\"level\" + obj.level]);\n          }\n        }\n\n        this.equipment[equipmentIndex].data.isalarm = true;\n        this.sprite[spriteIndex].visible = obj.isalarm;\n        var info = obj.name + obj.alarmInfo;\n        this.alarmPlay(info);\n      } else {\n        if (arr.length > 0) {\n          for (var _i2 = 0; _i2 < arr.length; _i2++) {\n            if (arr[_i2].devid == obj.devid && arr[_i2].pointid == obj.pointid) {\n              arr.splice(_i2, 1);\n            }\n          }\n\n          if (arr.length > 0) {\n            var levelArr = [];\n\n            for (var _i3 = 0; _i3 < arr.length; _i3++) {\n              levelArr.push(arr[_i3].level);\n            }\n\n            var max = Math.max.apply(Math, levelArr);\n            this.sprite[spriteIndex].data.level = max;\n            this.sprite[spriteIndex].material.color.set(this.alarmColor[\"level\" + max]);\n          } else {\n            this.sprite[spriteIndex].data.level = \"1\";\n            this.sprite[spriteIndex].visible = false;\n          }\n        }\n\n        if (this.equipment[equipmentIndex].material.length > 0) {\n          for (var _i4 = 0; _i4 < this.equipment[equipmentIndex].material.length; _i4++) {\n            this.equipment[equipmentIndex].material[_i4].color.set(\"#ffffff\");\n          }\n        }\n      }\n    } //告警播放\n\n  }, {\n    key: \"alarmPlay\",\n    value: function alarmPlay(info) {\n      var utterThis = new window.SpeechSynthesisUtterance();\n      utterThis.text = info;\n      utterThis.lang = \"zh-CN\"; //使用语言\n\n      utterThis.pitch = 2; //表示说话的音高，数值，范围从0（最小）到2（最大）。默认值为1\n\n      utterThis.rate = 1; // 语速，数值，默认值是1，范围是0.1到10，表示语速的倍数，例如2表示正常语速的两倍\n\n      utterThis.volume = 1; //声音的音量，区间范围是0到1，默认是1\n\n      window.speechSynthesis.speak(utterThis);\n    }\n  }, {\n    key: \"onDocumentMouseDown\",\n\n    /*\n     *事件部分\n     */\n    //鼠标按下事件\n    value: function onDocumentMouseDown(event) {\n      this.dbclick++;\n\n      var _this = this;\n\n      setTimeout(function () {\n        _this.dbclick = 0;\n      }, 500);\n      event.preventDefault();\n\n      if (this.dbclick >= 2) {\n        // 将鼠标位置归一化为设备坐标。x 和 y 方向的取值范围是 (-1 to +1)\n        this.mouseClick.x = event.offsetX / this.dom.offsetWidth * 2 - 1;\n        this.mouseClick.y = -(event.offsetY / this.dom.offsetHeight) * 2 + 1;\n        this.raycaster.setFromCamera(this.mouseClick, this.camera);\n        var intersects = this.raycaster.intersectObjects(this.objects);\n        var point = this.raycaster.intersectObjects(this.scene.children)[0];\n        console.log(point.point.x, point.point.z);\n\n        if (intersects.length > 0) {\n          this.controls.enabled = false;\n          var SELECTED = intersects[0].object;\n\n          if (this.eventList != null && this.eventList.dbclick != null && this.eventList.dbclick.length > 0) {\n            this.eventList.dbclick.forEach(function (_obj, index) {\n              if (\"string\" == typeof _obj.obj_name) {\n                if (_obj.obj_name == SELECTED.name) {\n                  _obj.obj_event(SELECTED, _this);\n                }\n              } else if (_obj.findObject != null || \"function\" == typeof _obj.findObject) {\n                if (_obj.findObject(SELECTED.name)) {\n                  _obj.obj_event(SELECTED, _this);\n                }\n              }\n            });\n          }\n\n          this.controls.enabled = true;\n        }\n      }\n    }\n  }, {\n    key: \"openCloseDoor\",\n    value: function openCloseDoor(obj, x, y, z, info) {\n      console.log(obj);\n      var doorstate = \"close\";\n      var tempobj = null;\n\n      if (obj.doorState != null && typeof obj.doorState != \"undefined\") {\n        doorstate = obj.doorState;\n        tempobj = obj.parent;\n      } else {\n        console.log(\"add parent\");\n        var objparent = obj.parent;\n        tempobj = new THREE.Object3D();\n        tempobj.position.set(obj.position.x + x, obj.position.y + y, obj.position.z + z);\n        obj.position.set(-x, -y, -z);\n        tempobj.add(obj);\n        objparent.add(tempobj);\n      }\n\n      obj.doorState = doorstate == \"close\" ? \"open\" : \"close\";\n\n      if (info == \"left\" || info == \"right\") {\n        var sign = info == \"left\" ? 1 : -1;\n\n        if (obj.doorState == \"close\") {\n          tempobj.rotateOnAxis(new THREE.Vector3(0, 1, 0), 0.5 * sign * Math.PI);\n        } else {\n          tempobj.rotateOnAxis(new THREE.Vector3(0, 1, 0), -0.5 * sign * Math.PI);\n        }\n      } else if (info == \"outin\") {\n        //沿点击的法向量移动\n        // var intersects = this.raycaster.intersectObjects([obj]);\n        // if (intersects.length > 0) {\n        //     // 射线位置赋值给移动网格模型\n        //     tempobj.position.copy(intersects[0].point);\n        //     // 沿着法线方向平移移动的网格模型\n        //     var normal = intersects[0].face.normal;// 当前位置曲面法线\n        //     tempobj.translateOnAxis(normal,50); //平移50\n        // }\n        var targetPos = new THREE.Vector3(1, 0, 0); // var euler = new THREE.Euler( 1, 0,0);\n        // var matrix = new THREE.Matrix4();  //创建一个4维矩阵\n        // matrix.lookAt(obj.position.clone() , obj.position.clone() , targetPos) //设置朝向\n        // matrix.multiply(new THREE.Matrix4().makeRotationFromEuler(euler))\n        // var toRot = new THREE.Quaternion().setFromRotationMatrix(matrix)\n        // tempobj.translateOnAxis(toRot,50);\n\n        if (obj.doorState == \"close\") {\n          tempobj.translateOnAxis(targetPos, -obj.geometry.parameters.depth + 20);\n        } else {\n          tempobj.translateOnAxis(targetPos, obj.geometry.parameters.depth - 20);\n        } //使用四元素朝某个角度移动\n        // var targetPos = new THREE.Vector3(0,0,1)   //目标位置点\n        // var offsetAngle = Math.PI/2  //目标移动时的朝向偏移\n        // // var obj =  你的三维模型(或者其他物体对象，object3D ,group ,或者mesh对象)\n        // //以下代码在多段路径时可重复执行\n        // var matrix = new THREE.Matrix4()  //创建一个4维矩阵\n        // matrix.lookAt(obj.position.clone() , obj.position.clone() ,targetPos) //设置朝向\n        // matrix.multiply(new THREE.Matrix4().makeRotationFromEuler(new THREE.Euler(0 , offsetAngle , 0 )))\n        // var toRot = new THREE.Quaternion().setFromRotationMatrix(matrix)  //计算出需要进行旋转的四元数值\n        // tempobj.translateOnAxis(toRot,50);\n        // if(obj.doorState==\"close\"){\n        //     tempobj.translateOnAxis(new THREE.Vector3(0, 0, 1),-obj.geometry.parameters.depth);\n        // }else{\n        //     tempobj.translateOnAxis(new THREE.Vector3(0, 0, 1),obj.geometry.parameters.depth);\n        // }\n\n      }\n    } //开关左门\n\n  }, {\n    key: \"openLeftDoor\",\n    value: function openLeftDoor(_obj, func) {\n      this.openCloseDoor(_obj, -_obj.geometry.parameters.width / 2, 0, 0, \"left\");\n    } //开关右门\n\n  }, {\n    key: \"openRightDoor\",\n    value: function openRightDoor(_obj, func) {\n      this.openCloseDoor(_obj, _obj.geometry.parameters.width / 2, 0, 0, \"right\");\n    } //开关机柜门\n\n  }, {\n    key: \"openCabinetDoor\",\n    value: function openCabinetDoor(_obj, func) {\n      this.openCloseDoor(_obj, _obj.geometry.parameters.width / 2, 0, _obj.geometry.parameters.depth / 2, \"right\");\n    } //拉出放回设备\n\n  }, {\n    key: \"openEquipmentDoor\",\n    value: function openEquipmentDoor(_obj, func) {\n      this.openCloseDoor(_obj, 0, 0, _obj.geometry.parameters.depth / 2, \"outin\");\n    } //鼠标移动\n\n  }, {\n    key: \"onDocumentMouseMove\",\n    value: function onDocumentMouseMove(event) {\n      var _this = this;\n\n      var currentElement = null;\n      this.mouseClick.x = event.offsetX / this.dom.offsetWidth * 2 - 1;\n      this.mouseClick.y = -(event.offsetY / this.dom.offsetHeight) * 2 + 1;\n      this.raycaster.setFromCamera(this.mouseClick, this.camera);\n      var intersects = this.raycaster.intersectObjects(this.objects);\n\n      if (intersects.length > 0) {\n        var SELECTED = intersects[0].object; // console.log(SELECTED)\n\n        if (SELECTED.name.toString().indexOf(\"equipment\") != -1 || SELECTED.name.toString().indexOf(\"spriteAlarm\") != -1) {\n          currentElement = SELECTED;\n        }\n      }\n\n      if (this.lastElement != currentElement) {\n        clearTimeout(this.tipTimer);\n\n        if (currentElement) {\n          this.tipTimer = setTimeout(function () {\n            // console.log(currentElement)\n            var tipInfo = \"\";\n\n            if (currentElement.name.toString().indexOf(\"equipment\") != -1) {\n              tipInfo = currentElement.data.tipInfo;\n              _this.tooltip.style.background = _this.tooltipBG;\n              _this.tooltip.querySelector(\"span\").style.borderTop = \"10px solid \" + _this.tooltipBG;\n            }\n\n            if (currentElement.name.toString().indexOf(\"spriteAlarm\") != -1) {\n              // console.log(currentElement)\n              tipInfo = currentElement.data.tipInfo;\n              _this.tooltip.style.background = _this.tooltipBG;\n              _this.tooltip.querySelector(\"span\").style.borderTop = \"10px solid \" + _this.tooltipBG;\n            }\n\n            var tiplen = tipInfo.length;\n            _this.tooltip.querySelector(\"#tipdiv\").innerHTML = tipInfo;\n            _this.tooltip.style.width = tiplen * 15 + \"px\";\n            _this.tooltip.style.display = \"block\";\n            _this.tooltip.style.left = _this.lastEvent.pageX - _this.tooltip.clientWidth / 2 + \"px\";\n            _this.tooltip.style.top = _this.lastEvent.pageY - _this.tooltip.clientHeight - 15 + \"px\";\n          }, 1000);\n        }\n      } //设置上一次的网元为当前网元\n\n\n      this.lastElement = currentElement; //如果当前鼠标下没有网元，隐藏tooltip\n\n      if (currentElement == null) {\n        _this.tooltip.style.display = \"none\";\n      } //设置每次移动时鼠标的事件对象\n\n\n      this.lastEvent = event;\n    } //测试\n\n  }, {\n    key: \"add\",\n    value: function add() {\n      var _this = this; //测试生成obj带材质\n      // this.createObjContainMtl()\n      //3,测点管道\n      // var points = [];\n      // points.push(new THREE.Vector3(0, 0, -10));\n      // points.push(new THREE.Vector3(0, 0, 10));\n      // var curvePath = new THREE.CatmullRomCurve3(points);\n      // var geometry = new THREE.TubeGeometry( curvePath, 20, 2, 8, false );\n      // var material = new THREE.MeshBasicMaterial( { color: 0xff0000 ,side:THREE.DoubleSide } );\n      // var mesh = new THREE.Mesh( geometry, material );\n      // this.scene.add( mesh );\n      ////自定义管道\n      // var cylinderGeo = new THREE.CylinderGeometry(4, 4 ,20 ,48,48);\n      // var cylinderMat = new THREE.MeshLambertMaterial({\n      //     color:0xffffff,\n      //     side:THREE.DoubleSide,\n      //     // map: this.createSkin(64,64,{imgurl:\"./images/rack_inside.png\"})\n      // });\n      // var cylinderMat2 = new THREE.MeshLambertMaterial({\n      //     color:0xffffff,\n      //     side:THREE.DoubleSide,\n      //     // map: this.createSkin(64,64,{imgurl:\"./images/test/camera.png\"})\n      // });\n      // var cylinder = new THREE.Mesh(cylinderGeo, cylinderMat);\n      // var cubeGeometry = new THREE.CubeGeometry(6.5, 20, 6.5, 0, 0, 1);\n      // var cube = new THREE.Mesh(cubeGeometry, cylinderMat);\n      // var pipe = this.mergeModel('+',cylinder,cube);\n      // var cylinderGeo1 = new THREE.CylinderGeometry(3.5, 3.5 ,20 ,48,48);\n      // var cylinder1 = new THREE.Mesh(cylinderGeo1, cylinderMat);\n      // pipe=this.mergeModel(\"-\",pipe,cylinder1);\n      // var cylinderGeo2 = new THREE.CylinderGeometry(2.5, 2.5 ,20 ,48,48);\n      // var cylinder2 = new THREE.Mesh(cylinderGeo2, cylinderMat2);\n      // pipe=this.mergeModel(\"+\",pipe,cylinder2);\n      // pipe.rotateX(0.5*Math.PI);\n      // this.scene.add(pipe);//网格模型添加到场景中\n      //4.测试加载模型\n      // var texture = new THREE.TextureLoader().load( './images/test/metal.png' );\n      // var texture1 = new THREE.TextureLoader().load( './images/test/camera_light.png' );\n      // var texture2 = new THREE.TextureLoader().load( './images/test/camera_dot.png' );\n      // var loader =new OBJLoader();\n      // loader.load( './images/test/camera.obj', function ( group ) {\n      //     console.log(group)\n      //     group.traverse( function ( child ) {\n      //         console.log(child)\n      //         if ( child instanceof THREE.Mesh) {\n      //             if(child.name==\"archmodels95_044_001\"){\n      //                 child.material.map = texture;\n      //             }else if(child.name==\"archmodels95_044_003\"){\n      //                 child.material.map = texture1;\n      //             }else{\n      //                 child.material.map = texture2;\n      //             }\n      //         }\n      //     });\n      //     _this.scene.add( group );\n      // })\n      //测试加载材质模型\n      // var mtlLoader = new MTLLoader();\n      // mtlLoader.load('./images/test/plant.mtl', function(materials) {\n      //     materials.preload();\n      //     console.log(materials)-\n      //     var objLoader = new OBJLoader();\n      //     objLoader.setMaterials(materials);\n      //     objLoader.load('./images/test/plant.obj', function(object) {\n      //         console.log(object)\n      //         _this.scene.add(object);\n      //     }, onProgress, onError);\n      // });\n      // var onProgress = function(xhr) {\n      //     if (xhr.lengthComputable) {\n      //         var percentComplete = xhr.loaded / xhr.total * 100;\n      //         console.log(Math.round(percentComplete, 2) + '% 已经加载')\n      //     }\n      // }\n      // var onError =function(){}\n      //1、测试ThreeBSP用的\n      //几何体对象\n      // let cylinder = new THREE.CylinderGeometry(50,50,5,40);//圆柱\n      // let box = new THREE.BoxGeometry(40,5,40);//立方体\n      // //材质对象\n      // let material=new THREE.MeshPhongMaterial({color:0x0000ff});\n      // //网格模型对象\n      // let cylinderMesh=new THREE.Mesh(cylinder,material);//圆柱\n      // let boxMesh=new THREE.Mesh(box,material);//立方体\n      // //包装成ThreeBSP对象\n      // let cylinderBSP = new ThreeBSP(cylinderMesh);\n      // let boxBSP = new ThreeBSP(boxMesh);\n      // let result = cylinderBSP.subtract(boxBSP);\n      // //ThreeBSP对象转化为网格模型对象\n      // let mesh = result.toMesh();\n      // this.scene.add(mesh);//网格模型添加到场景中\n      // //2、试圆柱体贴图\n      // //创建圆柱体\n      // var cylinderGeo = new THREE.CylinderGeometry(28, 30 ,200 ,48,48);\n      // cylinderGeo.computeBoundingBox();\n      // var max = cylinderGeo.boundingBox.max,\n      //         min = cylinderGeo.boundingBox.min;\n      //         console.log(cylinderGeo)\n      //         console.log(max)\n      //         console.log(min)\n      // var offset = new THREE.Vector2(0 - min.x, 0 - min.y);\n      // var range = new THREE.Vector2(max.x - min.x, max.y - min.y);\n      // var faces = cylinderGeo.faces;\n      // cylinderGeo.faceVertexUvs[0] = [];\n      // for (var i = 0; i < faces.length ; i++) {\n      //     var v1 = cylinderGeo.vertices[faces[i].a],\n      //             v2 = cylinderGeo.vertices[faces[i].b],\n      //             v3 = cylinderGeo.vertices[faces[i].c];\n      //     cylinderGeo.faceVertexUvs[0].push([\n      //         new THREE.Vector2((v1.x + offset.x) / range.x, (v1.y + offset.y) / range.y),\n      //         new THREE.Vector2((v2.x + offset.x) / range.x, (v2.y + offset.y) / range.y),\n      //         new THREE.Vector2((v3.x + offset.x) / range.x, (v3.y + offset.y) / range.y)\n      //     ]);\n      // }\n      // cylinderGeo.uvsNeedUpdate = true;\n      // console.log(cylinderGeo)\n      // var cylinderMat = new THREE.MeshLambertMaterial({//创建材料\n      //     color:0xffffff,\n      //     wireframe:false,\n      //     opacity: 0.1,\n      //     map: this.createSkin(60,200,{imgurl:\"./images/aircondition.png\"})\n      // });\n      // //创建圆柱体网格模型\n      // var cylinder = new THREE.Mesh(cylinderGeo, cylinderMat);\n      // this.scene.add(cylinder);//网格模型添加到场景中\n\n    } //测试自己生成obj文件带mtl材质的\n\n  }, {\n    key: \"createObjContainMtl\",\n    value: function createObjContainMtl() {\n      //如果obj文件没有包含材质关联的时候，自己生成带材质的关联obj文件\n      var _this = this;\n\n      var leaftexture = new THREE.TextureLoader().load(\"./images/plant/Archmodels66_leaf_33.jpg\");\n      var soiltexture = new THREE.TextureLoader().load(\"./images/plant/Archmodels66_dirt_1.jpg\");\n      var barktexture = new THREE.TextureLoader().load(\"./images/plant/Archmodels66_bark_1.jpg\");\n      var jardinieretexture = new THREE.TextureLoader().load(\"./images/plant/Archmodels66_jardiniere.jpg\");\n      var objLoader = new OBJLoader();\n      objLoader.load(\"./images/plant/plant.obj\", function (object) {\n        object.traverse(function (child) {\n          if (child instanceof THREE.Mesh) {\n            child.material = new THREE.MeshBasicMaterial({\n              color: 0xffffff\n            });\n\n            if (child.name == \"3DXY_geometry_769\" || child.name == \"3DXY_geometry_773\") {\n              child.material.name = \"wire_153228214\";\n              child.material.map = leaftexture;\n            } else if (child.name == \"3DXY_geometry_772\" || child.name == \"3DXY_geometry_776\" || child.name == \"3DXY_geometry_777\" || child.name == \"3DXY_geometry_778\") {\n              child.material.name = \"wire_108008136\";\n              child.material.map = barktexture;\n            } else if (child.name == \"3DXY_geometry_774\" || child.name == \"3DXY_geometry_775\") {\n              child.material.name = \"wire_177148027\";\n              child.material.map = soiltexture;\n            } else if (child.name == \"3DXY_geometry_770\") {\n              child.material.name = \"wire_198225087\";\n              child.material.map = jardinieretexture;\n            }\n          }\n        }); // _this.scene.add(object)\n\n        var objExporter = new OBJExporter();\n        var output = objExporter.parse(object);\n        var link = document.createElement(\"a\");\n        link.style.display = \"none\";\n        document.body.appendChild(link);\n        link.href = URL.createObjectURL(new Blob([output], {\n          type: \"text/plain\"\n        }));\n        link.download = \"object.obj\";\n        link.click(); //然后自己制作mtl文件就可以了\n      }, this.onProgress, this.onError);\n    } //测试GLTF文件\n\n  }, {\n    key: \"exportGLTF\",\n    value: function exportGLTF() {\n      var box = new THREE.BoxGeometry(40, 5, 40);\n      var material = new THREE.MeshPhongMaterial({\n        color: 0x0000ff\n      });\n      var obj = new THREE.Mesh(box, material); //立方体\n      // 单个模型数据 GLTF导出\n\n      var gltfExporter = new GLTFExporter();\n      gltfExporter.parse(obj, function (result) {\n        console.log(result);\n        var output = JSON.stringify(result, null, 2);\n        var link = document.createElement(\"a\");\n        link.style.display = \"none\";\n        document.body.appendChild(link);\n        link.href = URL.createObjectURL(new Blob([output], {\n          type: \"text/plain\"\n        }));\n        link.download = \"object.gltf\";\n        link.click();\n      }); //加载GLTF\n\n      var _this = this;\n\n      var loader = new GLTFLoader();\n      loader.load(\"./images/test/object.gltf\", function (gltf) {\n        console.log(\"控制台查看加载gltf文件返回的对象结构\", gltf);\n        console.log(\"gltf对象场景属性\", gltf.scene);\n        console.log(\"gltf对象相机属性\", gltf.cameras);\n\n        _this.scene.add(gltf.scene);\n      });\n    } //测试OBJ文件\n\n  }, {\n    key: \"exportOBJ\",\n    value: function exportOBJ() {\n      var box = new THREE.BoxGeometry(40, 5, 40);\n      var material = new THREE.MeshPhongMaterial({\n        color: 0x0000ff\n      });\n      var obj = new THREE.Mesh(box, material); //立方体\n      // 单个模型数据 OBJ导出\n\n      var objExporter = new OBJExporter();\n      var output = objExporter.parse(obj);\n      var link = document.createElement(\"a\");\n      link.style.display = \"none\";\n      document.body.appendChild(link);\n      link.href = URL.createObjectURL(new Blob([output], {\n        type: \"text/plain\"\n      }));\n      link.download = \"object.obj\";\n      link.click(); //加载OBJ\n\n      var _this = this;\n\n      var loader = new OBJLoader();\n      var loader2 = new OBJLoader2();\n      loader.load(\"./images/test/object.obj\", function (obj) {\n        console.log(obj);\n\n        _this.scene.add(obj);\n      }); // loader2.load( './images/test/object.obj', function ( obj ) {\n      //     _this.scene.add( obj );\n      // })\n    }\n    /* 创建字体精灵 */\n    // makeTextSprite(message, parameters) {\n    //\n    //     if ( parameters === undefined ) parameters = {};\n    //\n    //     var fontface = parameters.hasOwnProperty(\"fontface\") ?\n    //         parameters[\"fontface\"] : \"Arial\";\n    //\n    //     /* 字体大小 */\n    //     var fontsize = parameters.hasOwnProperty(\"fontsize\") ?\n    //         parameters[\"fontsize\"] : 20;\n    //\n    //     /* 边框厚度 */\n    //     var borderThickness = parameters.hasOwnProperty(\"borderThickness\") ?\n    //         parameters[\"borderThickness\"] : 4;\n    //\n    //     /* 边框颜色 */\n    //     var borderColor = parameters.hasOwnProperty(\"borderColor\") ?\n    //         parameters[\"borderColor\"] : { r:0, g:0, b:0, a:1.0 };\n    //\n    //     /* 背景颜色 */\n    //     var backgroundColor = parameters.hasOwnProperty(\"backgroundColor\") ?\n    //         parameters[\"backgroundColor\"] : { r: 97, g: 139, b: 249, a: 1 };\n    //\n    //     /* 创建画布 */\n    //     var canvas = document.createElement('canvas');\n    //     var context = canvas.getContext('2d');\n    //\n    //     /* 字体加粗 */\n    //     context.font = fontsize + \"px \" + fontface;\n    //\n    //     /* 获取文字的大小数据，高度取决于文字的大小 */\n    //     var metrics = context.measureText( message );\n    //     var textWidth = metrics.width;\n    //\n    //     /* 背景颜色 */\n    //     context.fillStyle   = \"rgba(\" + backgroundColor.r + \",\" + backgroundColor.g + \",\"\n    //         + backgroundColor.b + \",\" + backgroundColor.a + \")\";\n    //\n    //     /* 边框的颜色 */\n    //     context.strokeStyle = \"rgba(\" + borderColor.r + \",\" + borderColor.g + \",\"\n    //         + borderColor.b + \",\" + borderColor.a + \")\";\n    //     context.lineWidth = borderThickness;\n    //\n    //     /* 绘制圆角矩形 */\n    //     this.roundRect(context, borderThickness/2, borderThickness/2, textWidth + borderThickness, fontsize * 1.4 + borderThickness, 6);\n    //\n    //     /* 字体颜色 */\n    //     context.fillStyle = \"rgba(0, 0, 0, 1.0)\";\n    //     context.fillText( message, borderThickness, fontsize + borderThickness);\n    //\n    //     /* 画布内容用于纹理贴图 */\n    //     var texture = new THREE.Texture(canvas);\n    //     texture.needsUpdate = true;\n    //\n    //     var spriteMaterial = new THREE.SpriteMaterial({ map: texture } );\n    //     var sprite = new THREE.Sprite( spriteMaterial );\n    //\n    //     /* 缩放比例 */\n    //     sprite.scale.set(10,5,0);\n    //\n    //     return sprite;\n    // }\n\n  }, {\n    key: \"makeTexture\",\n    value: function makeTexture(data) {\n      var fontface = \"Arial\";\n      /* 字体大小 */\n\n      var fontsize = 40;\n      /* 边框厚度 */\n\n      var borderThickness = 4;\n      /* 边框颜色 */\n\n      var borderColor = {\n        r: 0,\n        g: 0,\n        b: 0,\n        a: 1.0\n      };\n      /* 背景颜色 */\n      // const backgroundColor = { r: 97, g: 139, b: 249, a: 1 }\n\n      var backgroundColor = {\n        r: 255,\n        g: 0,\n        b: 0,\n        a: 1\n      };\n      /* 创建画布 */\n\n      var canvas = document.createElement(\"canvas\");\n      var context = canvas.getContext(\"2d\");\n      /* 字体加粗 */\n\n      context.font = fontsize + \"px \" + fontface;\n      /* 获取文字的大小数据，高度取决于文字的大小 */\n\n      var metrics = [];\n      data.forEach(function (ele) {\n        metrics.push(context.measureText((ele.name ? ele.name + \": \" : \"\") + ele.value)); // metrics.push(context.measureText('温度：45℃'))\n      });\n      var textWidth = metrics[0].width;\n      metrics.forEach(function (ele) {\n        if (ele.width > textWidth) {\n          textWidth = ele.width;\n        }\n      });\n      /* 背景颜色 */\n\n      context.fillStyle = data[0].background || \"rgba(\" + backgroundColor.r + \",\" + backgroundColor.g + \",\" + backgroundColor.b + \",\" + backgroundColor.a + \")\";\n      /* 边框的颜色 */\n\n      context.strokeStyle = \"rgba(\" + borderColor.r + \",\" + borderColor.g + \",\" + borderColor.b + \",\" + borderColor.a + \")\";\n      context.lineWidth = borderThickness;\n      /* 绘制圆角矩形 */\n\n      this.roundRect(context, borderThickness / 2, borderThickness / 2, textWidth * 1.2, (fontsize + 10) * (metrics.length + 0.2) + borderThickness * metrics.length, 6);\n      /* 字体颜色 */\n\n      canvas.style.letterSpacing = \"5px\";\n\n      for (var i = 0; i < data.length; i++) {\n        // context.fillStyle = data[i].color\n        // context.fillStyle = data[i].color || '#fff'\n        context.fillStyle = \"#000\";\n        var text = data[i].value;\n\n        if (data[i].name) {\n          text = data[i].name + \":\" + text;\n        }\n\n        context.fillText(\" \" + text + \" \", borderThickness, fontsize * (i + 1) + borderThickness);\n      }\n      /* 画布内容用于纹理贴图 */\n\n\n      var texture = new THREE.Texture(canvas);\n      texture.needsUpdate = true;\n      return texture;\n    }\n  }, {\n    key: \"createSprite\",\n    value: function createSprite(obj) {\n      // let sprite = this.makeTextSprite(' 温度：' + 12 + '℃ 湿度：' + 12% + ' ')\n      var texture = this.makeTexture([{\n        name: \"湿度\",\n        value: \"24.15%\"\n      }, {\n        name: \"温度\",\n        value: \"29.02°C\"\n      }]);\n      var spriteMaterial = new THREE.SpriteMaterial({\n        map: texture\n      });\n      var sprite = new THREE.Sprite(spriteMaterial);\n      sprite.position.set(obj.x + 50, obj.y + 24, obj.z - 20); // const geometry = new THREE.PlaneGeometry(300, 300, 1, 1);\n      // sprite.geometry = geometry\n\n      sprite.scale.set(300, 100, 1); // 控制精灵大小，比如可视化中精灵大小表征数据大小 只需要设置x、y两个分量就可以\n\n      sprite.data = obj.data; //告警等级默认给1，给最低告警\n\n      sprite.name = \"spriteAlarm\";\n      sprite.visible = true;\n      this.addObject(sprite);\n      this.sprite.push(sprite);\n    }\n  }, {\n    key: \"createSwitchSprite\",\n    value: function createSwitchSprite(obj) {\n      var sprite = this.makeTextSprite(\" 温度：\" + 12 + \"℃ 湿度：\" + 12 % +\" \");\n      sprite.position.set(obj.x + 50, obj.y + 24, obj.z - 20);\n      sprite.scale.set(300, 100, 1); // 控制精灵大小，比如可视化中精灵大小表征数据大小 只需要设置x、y两个分量就可以\n\n      sprite.data = obj.data; //告警等级默认给1，给最低告警\n\n      sprite.name = \"spriteAlarm\";\n      sprite.visible = true;\n      this.addObject(sprite);\n      this.sprite.push(sprite);\n    }\n  }, {\n    key: \"createSwitch\",\n    value: function createSwitch(obj) {\n      var switchObj = null;\n      var bottomObj = {\n        show: true,\n        name: \"cubedown\",\n        uuid: \"\",\n        objType: \"cube\",\n        width: 30,\n        height: 30,\n        depth: 10,\n        x: 0,\n        y: 0,\n        z: 0,\n        style: {\n          skinColor: 0x02e0f3\n        }\n      };\n      var bottomCube = this.createCube(bottomObj);\n      var buttonObj = {\n        show: true,\n        name: \"cubedown\",\n        uuid: \"\",\n        objType: \"cube\",\n        width: 20,\n        height: 20,\n        depth: 5,\n        rotation: [{\n          direction: \"x\",\n          degree: -Math.PI / 10\n        }],\n        x: 0,\n        y: 0,\n        z: 5,\n        style: {\n          skinColor: obj.style.skinColor || 0xf8ede2\n        }\n      };\n      var buttonCube = this.createCube(buttonObj);\n      switchObj = this.mergeModel(\"+\", bottomCube, buttonCube);\n      switchObj.position.set(obj.x, obj.y, obj.z);\n      switchObj.objHandle = obj.objHandle;\n      switchObj = this.handleObj(switchObj);\n      this.addObject(switchObj);\n    }\n    /* 绘制圆角矩形 */\n\n  }, {\n    key: \"roundRect\",\n    value: function roundRect(ctx, x, y, w, h, r) {\n      ctx.beginPath();\n      ctx.moveTo(x + r, y);\n      ctx.lineTo(x + w - r, y);\n      ctx.quadraticCurveTo(x + w, y, x + w, y + r);\n      ctx.lineTo(x + w, y + h - r);\n      ctx.quadraticCurveTo(x + w, y + h, x + w - r, y + h);\n      ctx.lineTo(x + r, y + h);\n      ctx.quadraticCurveTo(x, y + h, x, y + h - r);\n      ctx.lineTo(x, y + r);\n      ctx.quadraticCurveTo(x, y, x + r, y);\n      ctx.closePath();\n      ctx.fill();\n      ctx.stroke();\n    }\n  }]);\n\n  return ThreeMap;\n}();\n\nexport { ThreeMap as default };",{"version":3,"sources":["D:/workspace/3d_jf/3d_jf/src/views/ThreeMap.js"],"names":["THREE","GLTFLoader","GLTFExporter","OBJLoader","OBJLoader2","OBJExporter","MTLLoader","TWEEN","OrbitControls","RectAreaLightUniformsLib","RectAreaLightHelper","RenderPass","ShaderPass","CopyShader","EffectComposer","UnrealBloomPass","ThreeMap","props","dataJson","xhr","lengthComputable","percentComplete","loaded","total","_this","hasObj","obj","findObject","objname","findedobj","objects","forEach","index","name","getPath","file","BASE_PATH","guid","guidRandom","Math","random","toString","substring","ThreeData","objList","eventList","events","btnList","btns","alarmColor","Object","assign","level1","level2","level3","level4","level5","renderer","scene","camera","equipment","sprite","cabinet","dom","document","getElementById","domID","dbclick","mouseClick","Vector2","raycaster","Raycaster","lastElement","tipTimer","tooltip","lastEvent","tooltipBG","progressSuccess","loadtimer","initRenderer","initScene","initCamera","initLight","render","setControl","InitData","domElement","addEventListener","onDocumentMouseDown","bind","onDocumentMouseMove","WebGLRenderer","antialias","setSize","offsetWidth","offsetHeight","appendChild","PerspectiveCamera","position","set","lookAt","x","y","z","add","Scene","background","Color","light","AmbientLight","light2","PointLight","shadow","near","far","castShadow","init","light3","RectAreaLight","intensity","width","height","animate","requestAnimationFrame","axesHelper","AxisHelper","controls","update","length","i","InitAddObject","createText","depth","InitTooltip","removeChild","map","div","createElement","setAttribute","style","display","left","top","fontSize","zIndex","loading","innerHTML","textAlign","load","querySelector","clearTimeout","setTimeout","LoadSuccess","color","maxWidth","lineHeight","padding","opacity","tipdiv","tipspan","marginLeft","bottom","borderTop","borderLeft","borderRight","count","step","button","btnimg","img","commonFunc","btnTitle","onclick","clickFunction","show","tempObj","objType","createCube","addObject","createObjDesk","CreateWall","createEmptyCabinet","createSprite","createSwitchSprite","createSwitch","createCylinderPlant","createObjPlant","createObjChair","createObjAnnihilator","createObjCamera","commonDepth","commonHeight","commonWidth","commonSkin","skinColor","wallData","wallobj","wallWidth","wallDepth","positionX","startDot","endDot","positionY","positionZ","abs","cubeobj","rotation","uuid","skin","cube","children","walchildobj","newobj","CreateHole","mergeModel","op","mergeOP","fobj","sobj","fobjBSP","ThreeBSP","sobjBSP","resultBSP","subtract","subMesh","Mesh","updateMatrix","geometry","merge","matrix","intersect","cubeMaterialArray","push","MeshLambertMaterial","vertexColors","FaceColors","result","toMesh","material","shading","FlatShading","computeFaceNormals","computeVertexNormals","needsUpdate","buffersNeedUpdate","uvsNeedUpdate","faces","faceset","j","vertexNormals","setHex","materialIndex","receiveShadow","hasOwnProperty","cubeGeometry","CubeGeometry","skin_up_obj","skin_down_obj","skin_fore_obj","skin_behind_obj","skin_left_obj","skin_right_obj","skin_opacity","skin_right","skin_left","skin_up","skin_down","skin_fore","skin_behind","createSkinOption","rotation_obj","direction","rotateX","degree","rotateY","rotateZ","rotateOnAxis","Vector3","Cabinet","floorHeight","upobj","size","thick","upcube","leftobj","leftcube","rightobj","rightcube","tempobj","Object3D","data","alarmInfo","downobj","downcube","behindobj","behindcube","doors","skins","doorname","doorobj","doorcube","tipInfo","canvas","context","getContext","beginPath","rect","fillStyle","fill","marker","text","font","textBaseline","strokeStyle","fillText","alarmobj","imgurl","transparent","PI","createPlaneGeometry","equipmentUUID","service","serviceuuid","radiusTop","radiusBottom","radiusSegments","heightSegments","openEnded","cylinderGeo","CylinderGeometry","cylinderMat","wireframe","cylinder","childobj","texture","loader","TextureLoader","indexOf","undefined","CanvasTexture","MaterParam","side","DoubleSide","blending","AdditiveBlending","plane","PlaneGeometry","MeshBasicMaterial","mtlLoader","materials","preload","objLoader","console","log","setMaterials","object","clone","objHandle","handleObj","onProgress","onError","ratio","scale","handleScale","handleRotale","info","cubeColor","cubefacenub","imgUrl","createSkin","imgwidth","imgheight","repeat","repeatx","wrapS","RepeatWrapping","repeaty","wrapT","floorWidth","text2","lineWidth","strokeText","arr","devid","pointid","m","cabinetUUID","changeCabinetAlarmObj","spriteIndex","equipmentIndex","isalarm","Number","level","flag","splice","visible","alarmPlay","levelArr","max","utterThis","window","SpeechSynthesisUtterance","lang","pitch","rate","volume","speechSynthesis","speak","event","preventDefault","offsetX","offsetY","setFromCamera","intersects","intersectObjects","point","enabled","SELECTED","_obj","obj_name","obj_event","doorstate","doorState","parent","objparent","sign","targetPos","translateOnAxis","parameters","func","openCloseDoor","currentElement","tiplen","pageX","clientWidth","pageY","clientHeight","leaftexture","soiltexture","barktexture","jardinieretexture","traverse","child","objExporter","output","parse","link","body","href","URL","createObjectURL","Blob","type","download","click","box","BoxGeometry","MeshPhongMaterial","gltfExporter","JSON","stringify","gltf","cameras","loader2","fontface","fontsize","borderThickness","borderColor","r","g","b","a","backgroundColor","metrics","ele","measureText","value","textWidth","roundRect","letterSpacing","Texture","makeTexture","spriteMaterial","SpriteMaterial","Sprite","makeTextSprite","switchObj","bottomObj","bottomCube","buttonObj","buttonCube","ctx","w","h","moveTo","lineTo","quadraticCurveTo","closePath","stroke"],"mappings":"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CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACD,K,CACD;;;;0CACsB;AACpB;AACA,UAAIA,KAAK,GAAG,IAAZ;;AACA,UAAI6Z,WAAW,GAAG,IAAIrb,KAAK,CAACgV,aAAV,GAA0B5L,IAA1B,CAChB,yCADgB,CAAlB;AAGA,UAAIkS,WAAW,GAAG,IAAItb,KAAK,CAACgV,aAAV,GAA0B5L,IAA1B,CAChB,wCADgB,CAAlB;AAGA,UAAImS,WAAW,GAAG,IAAIvb,KAAK,CAACgV,aAAV,GAA0B5L,IAA1B,CAChB,wCADgB,CAAlB;AAGA,UAAIoS,iBAAiB,GAAG,IAAIxb,KAAK,CAACgV,aAAV,GAA0B5L,IAA1B,CACtB,4CADsB,CAAxB;AAGA,UAAI2M,SAAS,GAAG,IAAI5V,SAAJ,EAAhB;AACA4V,MAAAA,SAAS,CAAC3M,IAAV,CACE,0BADF,EAEE,UAAS+M,MAAT,EAAiB;AACfA,QAAAA,MAAM,CAACsF,QAAP,CAAgB,UAASC,KAAT,EAAgB;AAC9B,cAAIA,KAAK,YAAY1b,KAAK,CAACiO,IAA3B,EAAiC;AAC/ByN,YAAAA,KAAK,CAAC5M,QAAN,GAAiB,IAAI9O,KAAK,CAAC2V,iBAAV,CAA4B;AAAElM,cAAAA,KAAK,EAAE;AAAT,aAA5B,CAAjB;;AACA,gBACEiS,KAAK,CAACzZ,IAAN,IAAc,mBAAd,IACAyZ,KAAK,CAACzZ,IAAN,IAAc,mBAFhB,EAGE;AACAyZ,cAAAA,KAAK,CAAC5M,QAAN,CAAe7M,IAAf,GAAsB,gBAAtB;AACAyZ,cAAAA,KAAK,CAAC5M,QAAN,CAAevG,GAAf,GAAqB8S,WAArB;AACD,aAND,MAMO,IACLK,KAAK,CAACzZ,IAAN,IAAc,mBAAd,IACAyZ,KAAK,CAACzZ,IAAN,IAAc,mBADd,IAEAyZ,KAAK,CAACzZ,IAAN,IAAc,mBAFd,IAGAyZ,KAAK,CAACzZ,IAAN,IAAc,mBAJT,EAKL;AACAyZ,cAAAA,KAAK,CAAC5M,QAAN,CAAe7M,IAAf,GAAsB,gBAAtB;AACAyZ,cAAAA,KAAK,CAAC5M,QAAN,CAAevG,GAAf,GAAqBgT,WAArB;AACD,aARM,MAQA,IACLG,KAAK,CAACzZ,IAAN,IAAc,mBAAd,IACAyZ,KAAK,CAACzZ,IAAN,IAAc,mBAFT,EAGL;AACAyZ,cAAAA,KAAK,CAAC5M,QAAN,CAAe7M,IAAf,GAAsB,gBAAtB;AACAyZ,cAAAA,KAAK,CAAC5M,QAAN,CAAevG,GAAf,GAAqB+S,WAArB;AACD,aANM,MAMA,IAAII,KAAK,CAACzZ,IAAN,IAAc,mBAAlB,EAAuC;AAC5CyZ,cAAAA,KAAK,CAAC5M,QAAN,CAAe7M,IAAf,GAAsB,gBAAtB;AACAyZ,cAAAA,KAAK,CAAC5M,QAAN,CAAevG,GAAf,GAAqBiT,iBAArB;AACD;AACF;AACF,SA5BD,EADe,CA8Bf;;AACA,YAAIG,WAAW,GAAG,IAAItb,WAAJ,EAAlB;AACA,YAAIub,MAAM,GAAGD,WAAW,CAACE,KAAZ,CAAkB1F,MAAlB,CAAb;AACA,YAAI2F,IAAI,GAAG9X,QAAQ,CAACyE,aAAT,CAAuB,GAAvB,CAAX;AACAqT,QAAAA,IAAI,CAACnT,KAAL,CAAWC,OAAX,GAAqB,MAArB;AACA5E,QAAAA,QAAQ,CAAC+X,IAAT,CAAc/V,WAAd,CAA0B8V,IAA1B;AACAA,QAAAA,IAAI,CAACE,IAAL,GAAYC,GAAG,CAACC,eAAJ,CACV,IAAIC,IAAJ,CAAS,CAACP,MAAD,CAAT,EAAmB;AAAEQ,UAAAA,IAAI,EAAE;AAAR,SAAnB,CADU,CAAZ;AAGAN,QAAAA,IAAI,CAACO,QAAL,GAAgB,YAAhB;AACAP,QAAAA,IAAI,CAACQ,KAAL,GAxCe,CAyCf;AACD,OA5CH,EA6CE,KAAK/F,UA7CP,EA8CE,KAAKC,OA9CP;AAgDD,K,CACD;;;;iCACa;AACX,UAAI+F,GAAG,GAAG,IAAIvc,KAAK,CAACwc,WAAV,CAAsB,EAAtB,EAA0B,CAA1B,EAA6B,EAA7B,CAAV;AACA,UAAI1N,QAAQ,GAAG,IAAI9O,KAAK,CAACyc,iBAAV,CAA4B;AAAEhT,QAAAA,KAAK,EAAE;AAAT,OAA5B,CAAf;AACA,UAAI/H,GAAG,GAAG,IAAI1B,KAAK,CAACiO,IAAV,CAAesO,GAAf,EAAoBzN,QAApB,CAAV,CAHW,CAG8B;AACzC;;AACA,UAAI4N,YAAY,GAAG,IAAIxc,YAAJ,EAAnB;AACAwc,MAAAA,YAAY,CAACb,KAAb,CAAmBna,GAAnB,EAAwB,UAASkN,MAAT,EAAiB;AACvCoH,QAAAA,OAAO,CAACC,GAAR,CAAYrH,MAAZ;AACA,YAAIgN,MAAM,GAAGe,IAAI,CAACC,SAAL,CAAehO,MAAf,EAAuB,IAAvB,EAA6B,CAA7B,CAAb;AACA,YAAIkN,IAAI,GAAG9X,QAAQ,CAACyE,aAAT,CAAuB,GAAvB,CAAX;AACAqT,QAAAA,IAAI,CAACnT,KAAL,CAAWC,OAAX,GAAqB,MAArB;AACA5E,QAAAA,QAAQ,CAAC+X,IAAT,CAAc/V,WAAd,CAA0B8V,IAA1B;AACAA,QAAAA,IAAI,CAACE,IAAL,GAAYC,GAAG,CAACC,eAAJ,CACV,IAAIC,IAAJ,CAAS,CAACP,MAAD,CAAT,EAAmB;AAAEQ,UAAAA,IAAI,EAAE;AAAR,SAAnB,CADU,CAAZ;AAGAN,QAAAA,IAAI,CAACO,QAAL,GAAgB,aAAhB;AACAP,QAAAA,IAAI,CAACQ,KAAL;AACD,OAXD,EANW,CAkBX;;AACA,UAAI9a,KAAK,GAAG,IAAZ;;AACA,UAAIuT,MAAM,GAAG,IAAI9U,UAAJ,EAAb;AACA8U,MAAAA,MAAM,CAAC3L,IAAP,CAAY,2BAAZ,EAAyC,UAASyT,IAAT,EAAe;AACtD7G,QAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ,EAAoC4G,IAApC;AACA7G,QAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAA0B4G,IAAI,CAACnZ,KAA/B;AACAsS,QAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAA0B4G,IAAI,CAACC,OAA/B;;AACAtb,QAAAA,KAAK,CAACkC,KAAN,CAAY8C,GAAZ,CAAgBqW,IAAI,CAACnZ,KAArB;AACD,OALD;AAMD,K,CACD;;;;gCACY;AACV,UAAI6Y,GAAG,GAAG,IAAIvc,KAAK,CAACwc,WAAV,CAAsB,EAAtB,EAA0B,CAA1B,EAA6B,EAA7B,CAAV;AACA,UAAI1N,QAAQ,GAAG,IAAI9O,KAAK,CAACyc,iBAAV,CAA4B;AAAEhT,QAAAA,KAAK,EAAE;AAAT,OAA5B,CAAf;AACA,UAAI/H,GAAG,GAAG,IAAI1B,KAAK,CAACiO,IAAV,CAAesO,GAAf,EAAoBzN,QAApB,CAAV,CAHU,CAG+B;AACzC;;AACA,UAAI6M,WAAW,GAAG,IAAItb,WAAJ,EAAlB;AACA,UAAIub,MAAM,GAAGD,WAAW,CAACE,KAAZ,CAAkBna,GAAlB,CAAb;AACA,UAAIoa,IAAI,GAAG9X,QAAQ,CAACyE,aAAT,CAAuB,GAAvB,CAAX;AACAqT,MAAAA,IAAI,CAACnT,KAAL,CAAWC,OAAX,GAAqB,MAArB;AACA5E,MAAAA,QAAQ,CAAC+X,IAAT,CAAc/V,WAAd,CAA0B8V,IAA1B;AACAA,MAAAA,IAAI,CAACE,IAAL,GAAYC,GAAG,CAACC,eAAJ,CAAoB,IAAIC,IAAJ,CAAS,CAACP,MAAD,CAAT,EAAmB;AAAEQ,QAAAA,IAAI,EAAE;AAAR,OAAnB,CAApB,CAAZ;AACAN,MAAAA,IAAI,CAACO,QAAL,GAAgB,YAAhB;AACAP,MAAAA,IAAI,CAACQ,KAAL,GAZU,CAaV;;AACA,UAAI9a,KAAK,GAAG,IAAZ;;AACA,UAAIuT,MAAM,GAAG,IAAI5U,SAAJ,EAAb;AACA,UAAI4c,OAAO,GAAG,IAAI3c,UAAJ,EAAd;AACA2U,MAAAA,MAAM,CAAC3L,IAAP,CAAY,0BAAZ,EAAwC,UAAS1H,GAAT,EAAc;AACpDsU,QAAAA,OAAO,CAACC,GAAR,CAAYvU,GAAZ;;AACAF,QAAAA,KAAK,CAACkC,KAAN,CAAY8C,GAAZ,CAAgB9E,GAAhB;AACD,OAHD,EAjBU,CAqBV;AACA;AACA;AACD;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;gCACYwQ,I,EAAM;AAChB,UAAM8K,QAAQ,GAAG,OAAjB;AAEA;;AACA,UAAMC,QAAQ,GAAG,EAAjB;AAEA;;AACA,UAAMC,eAAe,GAAG,CAAxB;AAEA;;AACA,UAAMC,WAAW,GAAG;AAAEC,QAAAA,CAAC,EAAE,CAAL;AAAQC,QAAAA,CAAC,EAAE,CAAX;AAAcC,QAAAA,CAAC,EAAE,CAAjB;AAAoBC,QAAAA,CAAC,EAAE;AAAvB,OAApB;AAEA;AACA;;AACA,UAAMC,eAAe,GAAG;AAAEJ,QAAAA,CAAC,EAAE,GAAL;AAAUC,QAAAA,CAAC,EAAE,CAAb;AAAgBC,QAAAA,CAAC,EAAE,CAAnB;AAAsBC,QAAAA,CAAC,EAAE;AAAzB,OAAxB;AAEA;;AACA,UAAMzK,MAAM,GAAG9O,QAAQ,CAACyE,aAAT,CAAuB,QAAvB,CAAf;AACA,UAAMsK,OAAO,GAAGD,MAAM,CAACE,UAAP,CAAkB,IAAlB,CAAhB;AAEA;;AACAD,MAAAA,OAAO,CAACQ,IAAR,GAAe0J,QAAQ,GAAG,KAAX,GAAmBD,QAAlC;AAEA;;AACA,UAAMS,OAAO,GAAG,EAAhB;AACAvL,MAAAA,IAAI,CAACnQ,OAAL,CAAa,UAAC2b,GAAD,EAAS;AACpBD,QAAAA,OAAO,CAACjP,IAAR,CACEuE,OAAO,CAAC4K,WAAR,CAAoB,CAACD,GAAG,CAACzb,IAAJ,GAAWyb,GAAG,CAACzb,IAAJ,GAAW,IAAtB,GAA6B,EAA9B,IAAoCyb,GAAG,CAACE,KAA5D,CADF,EADoB,CAIpB;AACD,OALD;AAOA,UAAIC,SAAS,GAAGJ,OAAO,CAAC,CAAD,CAAP,CAAWjW,KAA3B;AACAiW,MAAAA,OAAO,CAAC1b,OAAR,CAAgB,UAAC2b,GAAD,EAAS;AACvB,YAAIA,GAAG,CAAClW,KAAJ,GAAYqW,SAAhB,EAA2B;AACzBA,UAAAA,SAAS,GAAGH,GAAG,CAAClW,KAAhB;AACD;AACF,OAJD;AAMA;;AACAuL,MAAAA,OAAO,CAACI,SAAR,GACEjB,IAAI,CAAC,CAAD,CAAJ,CAAQxL,UAAR,IACA,UACE8W,eAAe,CAACJ,CADlB,GAEE,GAFF,GAGEI,eAAe,CAACH,CAHlB,GAIE,GAJF,GAKEG,eAAe,CAACF,CALlB,GAME,GANF,GAOEE,eAAe,CAACD,CAPlB,GAQE,GAVJ;AAYA;;AACAxK,MAAAA,OAAO,CAACU,WAAR,GACE,UACA0J,WAAW,CAACC,CADZ,GAEA,GAFA,GAGAD,WAAW,CAACE,CAHZ,GAIA,GAJA,GAKAF,WAAW,CAACG,CALZ,GAMA,GANA,GAOAH,WAAW,CAACI,CAPZ,GAQA,GATF;AAUAxK,MAAAA,OAAO,CAAC6E,SAAR,GAAoBsF,eAApB;AAEA;;AACA,WAAKY,SAAL,CACE/K,OADF,EAEEmK,eAAe,GAAG,CAFpB,EAGEA,eAAe,GAAG,CAHpB,EAIEW,SAAS,GAAG,GAJd,EAKE,CAACZ,QAAQ,GAAG,EAAZ,KAAmBQ,OAAO,CAACzV,MAAR,GAAiB,GAApC,IACEkV,eAAe,GAAGO,OAAO,CAACzV,MAN9B,EAOE,CAPF;AAUA;;AACA8K,MAAAA,MAAM,CAACnK,KAAP,CAAaoV,aAAb,GAA6B,KAA7B;;AACA,WAAK,IAAI9V,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGiK,IAAI,CAAClK,MAAzB,EAAiCC,CAAC,EAAlC,EAAsC;AACpC;AACA;AACA8K,QAAAA,OAAO,CAACI,SAAR,GAAoB,MAApB;AACA,YAAIG,IAAI,GAAGpB,IAAI,CAACjK,CAAD,CAAJ,CAAQ2V,KAAnB;;AACA,YAAI1L,IAAI,CAACjK,CAAD,CAAJ,CAAQhG,IAAZ,EAAkB;AAChBqR,UAAAA,IAAI,GAAGpB,IAAI,CAACjK,CAAD,CAAJ,CAAQhG,IAAR,GAAe,GAAf,GAAqBqR,IAA5B;AACD;;AACDP,QAAAA,OAAO,CAACW,QAAR,CACE,MAAMJ,IAAN,GAAa,GADf,EAEE4J,eAFF,EAGED,QAAQ,IAAIhV,CAAC,GAAG,CAAR,CAAR,GAAqBiV,eAHvB;AAKD;AAED;;;AACA,UAAMpI,OAAO,GAAG,IAAI9U,KAAK,CAACge,OAAV,CAAkBlL,MAAlB,CAAhB;AACAgC,MAAAA,OAAO,CAAC3F,WAAR,GAAsB,IAAtB;AAEA,aAAO2F,OAAP;AACD;;;iCAEYpT,G,EAAK;AAChB;AACA,UAAMoT,OAAO,GAAG,KAAKmJ,WAAL,CAAiB,CAC/B;AACEhc,QAAAA,IAAI,EAAE,IADR;AAEE2b,QAAAA,KAAK,EAAE;AAFT,OAD+B,EAK/B;AACE3b,QAAAA,IAAI,EAAE,IADR;AAEE2b,QAAAA,KAAK,EAAE;AAFT,OAL+B,CAAjB,CAAhB;AAUA,UAAMM,cAAc,GAAG,IAAIle,KAAK,CAACme,cAAV,CAAyB;AAAE5V,QAAAA,GAAG,EAAEuM;AAAP,OAAzB,CAAvB;AACA,UAAMjR,MAAM,GAAG,IAAI7D,KAAK,CAACoe,MAAV,CAAiBF,cAAjB,CAAf;AACAra,MAAAA,MAAM,CAACqC,QAAP,CAAgBC,GAAhB,CAAoBzE,GAAG,CAAC2E,CAAJ,GAAQ,EAA5B,EAAgC3E,GAAG,CAAC4E,CAAJ,GAAQ,EAAxC,EAA4C5E,GAAG,CAAC6E,CAAJ,GAAQ,EAApD,EAdgB,CAehB;AACA;;AACA1C,MAAAA,MAAM,CAAC6S,KAAP,CAAavQ,GAAb,CAAiB,GAAjB,EAAsB,GAAtB,EAA2B,CAA3B,EAjBgB,CAiBe;;AAC/BtC,MAAAA,MAAM,CAACqO,IAAP,GAAcxQ,GAAG,CAACwQ,IAAlB,CAlBgB,CAkBQ;;AAExBrO,MAAAA,MAAM,CAAC5B,IAAP,GAAc,aAAd;AACA4B,MAAAA,MAAM,CAAC8U,OAAP,GAAiB,IAAjB;AACA,WAAKzN,SAAL,CAAerH,MAAf;AACA,WAAKA,MAAL,CAAY2K,IAAZ,CAAiB3K,MAAjB;AACD;;;uCAEkBnC,G,EAAK;AACtB,UAAImC,MAAM,GAAG,KAAKwa,cAAL,CAAoB,SAAS,EAAT,GAAc,OAAd,GAAyB,KAAK,CAAC,GAAnD,CAAb;AACAxa,MAAAA,MAAM,CAACqC,QAAP,CAAgBC,GAAhB,CAAoBzE,GAAG,CAAC2E,CAAJ,GAAQ,EAA5B,EAAgC3E,GAAG,CAAC4E,CAAJ,GAAQ,EAAxC,EAA4C5E,GAAG,CAAC6E,CAAJ,GAAQ,EAApD;AACA1C,MAAAA,MAAM,CAAC6S,KAAP,CAAavQ,GAAb,CAAiB,GAAjB,EAAsB,GAAtB,EAA2B,CAA3B,EAHsB,CAGS;;AAC/BtC,MAAAA,MAAM,CAACqO,IAAP,GAAcxQ,GAAG,CAACwQ,IAAlB,CAJsB,CAIE;;AACxBrO,MAAAA,MAAM,CAAC5B,IAAP,GAAc,aAAd;AACA4B,MAAAA,MAAM,CAAC8U,OAAP,GAAiB,IAAjB;AACA,WAAKzN,SAAL,CAAerH,MAAf;AACA,WAAKA,MAAL,CAAY2K,IAAZ,CAAiB3K,MAAjB;AACD;;;iCAEYnC,G,EAAK;AAChB,UAAI4c,SAAS,GAAG,IAAhB;AACA,UAAIC,SAAS,GAAG;AACdzT,QAAAA,IAAI,EAAE,IADQ;AAEd7I,QAAAA,IAAI,EAAE,UAFQ;AAGd8K,QAAAA,IAAI,EAAE,EAHQ;AAId/B,QAAAA,OAAO,EAAE,MAJK;AAKdxD,QAAAA,KAAK,EAAE,EALO;AAMdC,QAAAA,MAAM,EAAE,EANM;AAOdW,QAAAA,KAAK,EAAE,EAPO;AAQd/B,QAAAA,CAAC,EAAE,CARW;AASdC,QAAAA,CAAC,EAAE,CATW;AAUdC,QAAAA,CAAC,EAAE,CAVW;AAWdoC,QAAAA,KAAK,EAAE;AACLuD,UAAAA,SAAS,EAAE;AADN;AAXO,OAAhB;AAeA,UAAIsS,UAAU,GAAG,KAAKvT,UAAL,CAAgBsT,SAAhB,CAAjB;AACA,UAAIE,SAAS,GAAG;AACd3T,QAAAA,IAAI,EAAE,IADQ;AAEd7I,QAAAA,IAAI,EAAE,UAFQ;AAGd8K,QAAAA,IAAI,EAAE,EAHQ;AAId/B,QAAAA,OAAO,EAAE,MAJK;AAKdxD,QAAAA,KAAK,EAAE,EALO;AAMdC,QAAAA,MAAM,EAAE,EANM;AAOdW,QAAAA,KAAK,EAAE,CAPO;AAQd0E,QAAAA,QAAQ,EAAE,CACR;AACEiE,UAAAA,SAAS,EAAE,GADb;AAEEE,UAAAA,MAAM,EAAE,CAAC1O,IAAI,CAACuR,EAAN,GAAW;AAFrB,SADQ,CARI;AAcdzN,QAAAA,CAAC,EAAE,CAdW;AAedC,QAAAA,CAAC,EAAE,CAfW;AAgBdC,QAAAA,CAAC,EAAE,CAhBW;AAiBdoC,QAAAA,KAAK,EAAE;AACLuD,UAAAA,SAAS,EAAExK,GAAG,CAACiH,KAAJ,CAAUuD,SAAV,IAAuB;AAD7B;AAjBO,OAAhB;AAqBA,UAAIwS,UAAU,GAAG,KAAKzT,UAAL,CAAgBwT,SAAhB,CAAjB;AACAH,MAAAA,SAAS,GAAG,KAAKhR,UAAL,CAAgB,GAAhB,EAAqBkR,UAArB,EAAiCE,UAAjC,CAAZ;AAEAJ,MAAAA,SAAS,CAACpY,QAAV,CAAmBC,GAAnB,CAAuBzE,GAAG,CAAC2E,CAA3B,EAA8B3E,GAAG,CAAC4E,CAAlC,EAAqC5E,GAAG,CAAC6E,CAAzC;AACA+X,MAAAA,SAAS,CAACjI,SAAV,GAAsB3U,GAAG,CAAC2U,SAA1B;AACAiI,MAAAA,SAAS,GAAG,KAAKhI,SAAL,CAAegI,SAAf,CAAZ;AACA,WAAKpT,SAAL,CAAeoT,SAAf;AACD;AAED;;;;8BACUK,G,EAAKtY,C,EAAGC,C,EAAGsY,C,EAAGC,C,EAAGzB,C,EAAG;AAC5BuB,MAAAA,GAAG,CAAC1L,SAAJ;AACA0L,MAAAA,GAAG,CAACG,MAAJ,CAAWzY,CAAC,GAAG+W,CAAf,EAAkB9W,CAAlB;AACAqY,MAAAA,GAAG,CAACI,MAAJ,CAAW1Y,CAAC,GAAGuY,CAAJ,GAAQxB,CAAnB,EAAsB9W,CAAtB;AACAqY,MAAAA,GAAG,CAACK,gBAAJ,CAAqB3Y,CAAC,GAAGuY,CAAzB,EAA4BtY,CAA5B,EAA+BD,CAAC,GAAGuY,CAAnC,EAAsCtY,CAAC,GAAG8W,CAA1C;AACAuB,MAAAA,GAAG,CAACI,MAAJ,CAAW1Y,CAAC,GAAGuY,CAAf,EAAkBtY,CAAC,GAAGuY,CAAJ,GAAQzB,CAA1B;AACAuB,MAAAA,GAAG,CAACK,gBAAJ,CAAqB3Y,CAAC,GAAGuY,CAAzB,EAA4BtY,CAAC,GAAGuY,CAAhC,EAAmCxY,CAAC,GAAGuY,CAAJ,GAAQxB,CAA3C,EAA8C9W,CAAC,GAAGuY,CAAlD;AACAF,MAAAA,GAAG,CAACI,MAAJ,CAAW1Y,CAAC,GAAG+W,CAAf,EAAkB9W,CAAC,GAAGuY,CAAtB;AACAF,MAAAA,GAAG,CAACK,gBAAJ,CAAqB3Y,CAArB,EAAwBC,CAAC,GAAGuY,CAA5B,EAA+BxY,CAA/B,EAAkCC,CAAC,GAAGuY,CAAJ,GAAQzB,CAA1C;AACAuB,MAAAA,GAAG,CAACI,MAAJ,CAAW1Y,CAAX,EAAcC,CAAC,GAAG8W,CAAlB;AACAuB,MAAAA,GAAG,CAACK,gBAAJ,CAAqB3Y,CAArB,EAAwBC,CAAxB,EAA2BD,CAAC,GAAG+W,CAA/B,EAAkC9W,CAAlC;AACAqY,MAAAA,GAAG,CAACM,SAAJ;AACAN,MAAAA,GAAG,CAACvL,IAAJ;AACAuL,MAAAA,GAAG,CAACO,MAAJ;AACD;;;;;;SAl4EkBle,Q","sourcesContent":["/*\n作者:Mr.Xie\n创建时间:2020年05月29日\n功能描述:3D机房封装\n\n使用方式\nlet props={domID:\"three-dom\"}\nthis.map = new ThreeMap(props[,dataJson]);\nthis.map.init();\n*/\nimport * as THREE from \"three\";\nimport \"imports-loader?THREE=three!threebsp\";\nimport { GLTFLoader } from \"three/examples/jsm/loaders/GLTFLoader\";\nimport { GLTFExporter } from \"three/examples/jsm/exporters/GLTFExporter\";\nimport { OBJLoader } from \"three/examples/jsm/loaders/OBJLoader\";\nimport { OBJLoader2 } from \"three/examples/jsm/loaders/OBJLoader2\";\nimport { OBJExporter } from \"three/examples/jsm/exporters/OBJExporter\";\nimport { MTLLoader } from \"three/examples/jsm/loaders/MTLLoader\";\nimport TWEEN from \"@tweenjs/tween.js\";\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls.js\";\nimport { RectAreaLightUniformsLib } from \"three/examples/jsm/lights/RectAreaLightUniformsLib\";\nimport { RectAreaLightHelper } from \"three/examples/jsm/helpers/RectAreaLightHelper\";\nimport { RenderPass } from \"three/examples/jsm/postprocessing/RenderPass\";\nimport { ShaderPass } from \"three/examples/jsm/postprocessing/ShaderPass\";\nimport { CopyShader } from \"three/examples/jsm/shaders/CopyShader\";\nimport { EffectComposer } from \"three/examples/jsm/postprocessing/EffectComposer\";\nimport { UnrealBloomPass } from \"three/examples/jsm/postprocessing/UnrealBloomPass\"; //r100及以上\n// var OrbitControls = require('three-orbit-controls')(THREE)  //r100 以下\nexport default class ThreeMap {\n  constructor(props, dataJson) {\n    this.props = props;\n    this.ThreeData = dataJson;\n    this.dataJson = dataJson;\n    this.objList = dataJson.objects || []; //对象列表\n    this.eventList = dataJson.events || {}; //事件对象列表\n    this.btnList = dataJson.btns || []; //按钮列表\n    this.alarmColor = Object.assign(\n      {\n        level1: \"#00c5ff\",\n        level2: \"#b0f604\",\n        level3: \"#fcff00\",\n        level4: \"#ff8d00\",\n        level5: \"#ff0000\",\n      },\n      dataJson.alarmColor\n    );\n    this.renderer = null;\n\n    this.scene = null; //场景\n    this.camera = null;\n    this.objects = []; //存放对象\n    this.equipment = []; //存放设备\n    this.sprite = []; //存放告警精灵图标\n    this.cabinet = []; //存放柜子\n    this.dom = document.getElementById(this.props.domID);\n    this.dbclick = 0;\n    this.mouseClick = new THREE.Vector2();\n    this.raycaster = new THREE.Raycaster();\n    this.lastElement = null; //存放最后一个设备\n    this.tipTimer = null; //显示提示用的timer\n    this.tooltip = null;\n    this.lastEvent = null;\n    this.tooltipBG = \"#ACDEFE\";\n\n    this.progressSuccess = 0;\n    this.loadtimer = null;\n    this.BASE_PATH = \"./images/\";\n  }\n  init() {\n    this.initRenderer();\n    this.initScene();\n    this.initCamera();\n    this.initLight();\n    this.render();\n    // this.setHelper();\n    this.setControl();\n    // this.add();\n    this.InitData(); //添加3D对象、事件等\n    this.renderer.domElement.addEventListener(\n      \"mousedown\",\n      this.onDocumentMouseDown.bind(this),\n      false\n    );\n    this.renderer.domElement.addEventListener(\n      \"mousemove\",\n      this.onDocumentMouseMove.bind(this),\n      false\n    );\n  }\n\n  //初始化渲染场景\n  initRenderer() {\n    this.renderer = new THREE.WebGLRenderer({ antialias: true });\n    this.renderer.setSize(this.dom.offsetWidth, this.dom.offsetHeight);\n    this.dom.appendChild(this.renderer.domElement);\n  }\n  //初始化相机\n  initCamera() {\n    this.camera = new THREE.PerspectiveCamera(\n      45,\n      this.dom.offsetWidth / this.dom.offsetHeight,\n      1,\n      100000\n    );\n    this.camera.name = \"mainCamera\";\n    this.camera.position.set(0, 1000, 1800);\n    //默认就是以Y轴为上方的\n    // this.camera.up.x = 0;\n    // this.camera.up.y =1;\n    // this.camera.up.z =0;\n    this.camera.lookAt({ x: 0, y: 0, z: 0 });\n    this.scene.add(this.camera);\n  }\n  //初始化场景\n  initScene() {\n    this.scene = new THREE.Scene();\n    this.scene.background = new THREE.Color(0x225f93);\n  }\n  //初始化灯光\n  initLight() {\n    var light = new THREE.AmbientLight(0xcccccc);\n    light.position.set(0, 0, 0);\n    this.scene.add(light);\n    var light2 = new THREE.PointLight(0x555555);\n    light2.shadow.camera.near = 1;\n    light2.shadow.camera.far = 5000;\n    light2.position.set(0, 350, 0);\n    light2.castShadow = false; //表示这个光是可以产生阴影的\n    this.scene.add(light2);\n    RectAreaLightUniformsLib.init();\n    let light3 = new THREE.RectAreaLight(0x00ff00, 5, 4, 10);\n    light3.position.set(50, 50, -50);\n    light3.lookAt(0, 100, 0);\n    light3.intensity = 100;\n    light3.width = 200;\n    light3.height = 10;\n    this.scene.add(light3);\n  }\n  //渲染\n  render() {\n    this.animate();\n  }\n  animate() {\n    requestAnimationFrame(this.render.bind(this));\n    this.renderer.render(this.scene, this.camera);\n  }\n  setHelper() {\n    //红色x,绿色y,蓝色z\n    const axesHelper = new THREE.AxisHelper(5);\n    this.scene.add(axesHelper);\n  }\n  //鼠标拖拽控制\n  setControl() {\n    this.controls = new OrbitControls(this.camera, this.dom);\n    this.controls.update();\n  }\n  InitData() {\n    // this.Loading();\n    if (this.objList.length > 0) {\n      for (let i = 0; i < this.objList.length; i++) {\n        this.InitAddObject(this.objList[i]);\n      }\n    }\n    // if(this.btnList.length>0){\n    //     this.InitBtn();\n    // }\n    this.createText(this.objList[0].width, this.objList[0].depth);\n    this.InitTooltip();\n    // this.LoadSuccess();\n  }\n  //刷新视图\n  resetView() {\n    this.dom.removeChild(this.renderer.domElement);\n    var map = new ThreeMap(this.props, this.ThreeData);\n    map.init();\n  }\n  Loading() {\n    var div = document.createElement(\"div\");\n    div.setAttribute(\"id\", \"loading\");\n    div.style.display = \"block\";\n    div.style.position = \"absolute\";\n    div.style.left = \"0\";\n    div.style.top = \"0\";\n    div.style.width = \"100%\";\n    div.style.height = \"100%\";\n    div.style.fontSize = \"30px\";\n    div.style.zIndex = \"999\";\n    div.style.background = \"rgba(0,0,0,0.65)\";\n    let loading = document.createElement(\"div\");\n    loading.innerHTML = \"模型加载中...\";\n    loading.style.top = \"40%\";\n    loading.style.position = \"absolute\";\n    loading.style.width = \"100%\";\n    loading.style.textAlign = \"center\";\n    div.appendChild(loading);\n    this.dom.appendChild(div);\n  }\n  LoadSuccess() {\n    let _this = this;\n    if (this.progressSuccess == 3) {\n      let load = this.dom.querySelector(\"#loading\");\n      load.style.display = \"none\";\n      clearTimeout(this.loadtimer);\n    } else {\n      this.loadtimer = setTimeout(function() {\n        _this.LoadSuccess();\n      }, 1000);\n    }\n  }\n  //添加提示框\n  InitTooltip() {\n    this.tooltip = document.createElement(\"div\");\n    this.tooltip.setAttribute(\"id\", \"tooltip\");\n    this.tooltip.style.display = \"none\";\n    this.tooltip.style.position = \"absolute\";\n    this.tooltip.style.color = \"#000\";\n    this.tooltip.style.maxWidth = \"200px\";\n    this.tooltip.style.width = \"32px\";\n    this.tooltip.style.height = \"auto\";\n    this.tooltip.style.lineHeight = \"22px\";\n    this.tooltip.style.textAlign = \"center\";\n    this.tooltip.style.padding = \"10px\";\n    this.tooltip.style.background = this.tooltipBG;\n    this.tooltip.style.opacity = 0.8;\n    this.tooltip.style[\"border-radius\"] = \"5px\";\n    let tipdiv = document.createElement(\"div\");\n    tipdiv.setAttribute(\"id\", \"tipdiv\");\n    let tipspan = document.createElement(\"span\");\n    tipspan.style.marginLeft = \"50%\";\n    tipspan.style.bottom = \"-10px\";\n    tipspan.style.left = \"-10px\";\n    tipspan.style.position = \"absolute\";\n    tipspan.style.borderTop = \"10px solid \" + this.tooltipBG;\n    tipspan.style.borderLeft = \"10px solid transparent\";\n    tipspan.style.borderRight = \"10px solid transparent\";\n    this.tooltip.appendChild(tipspan);\n    this.tooltip.appendChild(tipdiv);\n    this.dom.appendChild(this.tooltip);\n  }\n  //添加按钮\n  InitBtn() {\n    var _this = this;\n    var count = this.btnList.length;\n    var step = 24;\n\n    var div = document.createElement(\"div\");\n    div.setAttribute(\"id\", \"toolbar\");\n    div.style.display = \"block\";\n    div.style.position = \"absolute\";\n    div.style.left = \"10px\";\n    div.style.top = \"75px\";\n    div.style.width = \"32px\";\n    div.style.height = count * step + step + \"px\";\n    div.style.background = \"rgba(255,255,255,0.75)\";\n    div.style[\"border-radius\"] = \"5px\";\n    this.dom.appendChild(div);\n\n    for (var i = 0; i < count; i++) {\n      var button = this.btnList[i];\n      var btnimg = button.btnimg;\n      var img = document.createElement(\"img\");\n      img.style.position = \"absolute\";\n      img.style.left = \"4px\";\n      img.style.top = step / 2 + i * step + \"px\";\n      img.style[\"pointer-events\"] = \"auto\";\n      img.style[\"cursor\"] = \"pointer\";\n      img.setAttribute(\"src\", this.commonFunc.getPath(btnimg));\n      img.style.width = \"24px\";\n      img.style.height = \"24px\";\n      img.setAttribute(\"title\", button.btnTitle);\n      img.onclick = function() {\n        button.clickFunction(_this);\n      };\n      div.appendChild(img);\n    }\n  }\n  //添加3D对象\n  InitAddObject(obj) {\n    if (obj.show == null || typeof obj.show == \"undefined\" || obj.show) {\n      let tempObj = null;\n      switch (obj.objType) {\n        case \"cube\":\n          tempObj = this.createCube(obj);\n          this.addObject(tempObj, \"scene\");\n          break;\n        case \"desk\":\n          this.createObjDesk(obj);\n          break;\n        case \"wall\":\n          this.CreateWall(obj);\n          break;\n        case \"emptyCabinet\":\n          tempObj = this.createEmptyCabinet(obj);\n          this.addObject(tempObj, \"scene\");\n          break;\n        case \"sprite\":\n          this.createSprite(obj);\n          break;\n        case \"switchSprite\":\n          this.createSwitchSprite(obj);\n          break;\n        case \"switch\":\n          this.createSwitch(obj);\n          break;\n        case \"cylinderPlant\": //自定义花\n          tempObj = this.createCylinderPlant(obj);\n          this.addObject(tempObj, \"scene\");\n          break;\n        case \"objPlant\": //模型花\n          this.createObjPlant(obj);\n          break;\n        case \"chair\": //模型花\n          this.createObjChair(obj);\n          break;\n        case \"objAnnihilator\": //模型灭火器\n          this.createObjAnnihilator(obj);\n          break;\n        case \"objCamera\": //模型摄像头\n          this.createObjCamera(obj);\n          break;\n      }\n    }\n  }\n  //创建墙\n  CreateWall(obj) {\n    let _this = this;\n    var commonDepth = obj.depth || 40; //墙体厚度\n    var commonHeight = obj.height || 100; //墙体高度\n    var commonWidth = obj.width || 300; //墙体宽度\n    var commonSkin = obj.style.skinColor || 0x98750f;\n    //建立墙面\n    obj.wallData.forEach(function(wallobj, index) {\n      var wallWidth = commonWidth;\n      var wallDepth = wallobj.depth || commonDepth;\n      var positionX = ((wallobj.startDot.x || 0) + (wallobj.endDot.x || 0)) / 2;\n      var positionY = ((wallobj.startDot.y || 0) + (wallobj.endDot.y || 0)) / 2;\n      var positionZ = ((wallobj.startDot.z || 0) + (wallobj.endDot.z || 0)) / 2;\n      //z相同 表示x方向为长度\n      if (wallobj.startDot.z == wallobj.endDot.z) {\n        wallWidth = Math.abs(wallobj.startDot.x - wallobj.endDot.x);\n        wallDepth = wallobj.depth || commonDepth;\n      } else if (wallobj.startDot.x == wallobj.endDot.x) {\n        wallWidth = wallobj.depth || commonDepth;\n        wallDepth = Math.abs(wallobj.startDot.z - wallobj.endDot.z);\n      }\n      var cubeobj = {\n        width: wallWidth,\n        height: wallobj.height || commonHeight,\n        depth: wallDepth,\n        rotation: wallobj.rotation,\n        x: positionX,\n        y: positionY,\n        z: positionZ,\n        uuid: wallobj.uuid,\n        name: wallobj.name,\n        style: {\n          skinColor: commonSkin,\n          skin: wallobj.skin,\n        },\n      };\n      var cube = _this.createCube(cubeobj);\n      if (\n        _this.commonFunc.hasObj(wallobj.children) &&\n        wallobj.children.length > 0\n      ) {\n        wallobj.children.forEach(function(walchildobj, index) {\n          var newobj = _this.CreateHole(walchildobj);\n          cube = _this.mergeModel(walchildobj.op, cube, newobj, commonSkin);\n        });\n      }\n      _this.addObject(cube, \"scene\");\n    });\n  }\n  //模型合并 使用ThreeBSP插件mergeOP计算方式 -表示减去 +表示加上\n  mergeModel(mergeOP, fobj, sobj, commonSkin) {\n    var fobjBSP = new ThreeBSP(fobj);\n    var sobjBSP = new ThreeBSP(sobj);\n    var resultBSP = null;\n    if (mergeOP == \"-\") {\n      resultBSP = fobjBSP.subtract(sobjBSP);\n    } else if (mergeOP == \"+\") {\n      var subMesh = new THREE.Mesh(sobj);\n      sobj.updateMatrix();\n      fobj.geometry.merge(sobj.geometry, sobj.matrix);\n      return fobj;\n      //    resultBSP = fobjBSP.union(sobjBSP);\n    } else if (mergeOP == \"&\") {\n      //交集\n      resultBSP = fobjBSP.intersect(sobjBSP);\n    } else {\n      this.addObject(sobj, \"scene\");\n      return fobj;\n    }\n    var cubeMaterialArray = [];\n    cubeMaterialArray.push(\n      new THREE.MeshLambertMaterial({\n        vertexColors: THREE.FaceColors,\n      })\n    );\n    var result = resultBSP.toMesh(cubeMaterialArray);\n    result.material.shading = THREE.FlatShading;\n    result.geometry.computeFaceNormals();\n    result.geometry.computeVertexNormals();\n    result.uuid = fobj.uuid + mergeOP + sobj.uuid;\n    result.name = fobj.name + mergeOP + sobj.name;\n    result.material.needsUpdate = true;\n    result.geometry.buffersNeedUpdate = true;\n    result.geometry.uvsNeedUpdate = true;\n\n    result.material = fobj.material;\n\n    for (var i = 0; i < result.geometry.faces.length; i++) {\n      var faceset = false;\n      for (var j = 0; j < fobj.geometry.faces; j++) {\n        if (\n          result.geometry.faces[i].vertexNormals[0].x ===\n            fobj.geometry.faces[j].vertexNormals[0].x &&\n          result.geometry.faces[i].vertexNormals[0].y ===\n            fobj.geometry.faces[j].vertexNormals[0].y &&\n          result.geometry.faces[i].vertexNormals[0].z ===\n            fobj.geometry.faces[j].vertexNormals[0].z &&\n          result.geometry.faces[i].vertexNormals[1].x ===\n            fobj.geometry.faces[j].vertexNormals[1].x &&\n          result.geometry.faces[i].vertexNormals[1].y ===\n            fobj.geometry.faces[j].vertexNormals[1].y &&\n          result.geometry.faces[i].vertexNormals[1].z ===\n            fobj.geometry.faces[j].vertexNormals[1].z &&\n          result.geometry.faces[i].vertexNormals[2].x ===\n            fobj.geometry.faces[j].vertexNormals[2].x &&\n          result.geometry.faces[i].vertexNormals[2].y ===\n            fobj.geometry.faces[j].vertexNormals[2].y &&\n          result.geometry.faces[i].vertexNormals[2].z ===\n            fobj.geometry.faces[j].vertexNormals[2].z\n        ) {\n          result.geometry.faces[i].color.setHex(commonSkin);\n          result.geometry.faces[i].materialIndex =\n            fobj.geometry.faces[j].materialIndex;\n          faceset == true;\n        }\n      }\n      if (faceset == false) {\n        for (var j = 0; j < sobj.geometry.faces.length; j++) {\n          if (\n            result.geometry.faces[i].vertexNormals[0].x ===\n              sobj.geometry.faces[j].vertexNormals[0].x &&\n            result.geometry.faces[i].vertexNormals[0].y ===\n              sobj.geometry.faces[j].vertexNormals[0].y &&\n            result.geometry.faces[i].vertexNormals[0].z ===\n              sobj.geometry.faces[j].vertexNormals[0].z &&\n            result.geometry.faces[i].vertexNormals[1].x ===\n              sobj.geometry.faces[j].vertexNormals[1].x &&\n            result.geometry.faces[i].vertexNormals[1].y ===\n              sobj.geometry.faces[j].vertexNormals[1].y &&\n            result.geometry.faces[i].vertexNormals[1].z ===\n              sobj.geometry.faces[j].vertexNormals[1].z &&\n            result.geometry.faces[i].vertexNormals[2].x ===\n              sobj.geometry.faces[j].vertexNormals[2].x &&\n            result.geometry.faces[i].vertexNormals[2].y ===\n              sobj.geometry.faces[j].vertexNormals[2].y &&\n            result.geometry.faces[i].vertexNormals[2].z ===\n              sobj.geometry.faces[j].vertexNormals[2].z\n          ) {\n            result.geometry.faces[i].color.setHex(commonSkin);\n            result.geometry.faces[i].materialIndex =\n              sobj.geometry.faces[j].materialIndex;\n            faceset = true;\n          }\n        }\n      }\n      if (faceset == false) {\n        //最后剩余的一点点给颜色\n        result.geometry.faces[i].color.setHex(commonSkin);\n      }\n    }\n\n    result.castShadow = true;\n    result.receiveShadow = true;\n    return result;\n  }\n  //挖洞、玻璃、挂东西\n  CreateHole(obj) {\n    var commonDepth = 40; //厚度\n    var commonHeight = 100; //高度\n    var commonWidth = 300; //强体高度\n    var commonSkin = 0x98750f;\n    //建立墙面\n    var wallWidth = commonWidth;\n    var wallDepth = obj.depth || commonDepth;\n    var positionX = ((obj.startDot.x || 0) + (obj.endDot.x || 0)) / 2;\n    var positionY = ((obj.startDot.y || 0) + (obj.endDot.y || 0)) / 2;\n    var positionZ = ((obj.startDot.z || 0) + (obj.endDot.z || 0)) / 2;\n    //z相同 表示x方向为长度\n    if (obj.startDot.z == obj.endDot.z) {\n      wallWidth = Math.abs(obj.startDot.x - obj.endDot.x);\n      wallDepth = obj.depth || commonDepth;\n    } else if (obj.startDot.x == obj.endDot.x) {\n      wallWidth = obj.depth || commonDepth;\n      wallDepth = Math.abs(obj.startDot.z - obj.endDot.z);\n    }\n    var cubeobj = {\n      width: wallWidth,\n      height: obj.height || commonHeight,\n      depth: wallDepth,\n      rotation: obj.rotation,\n      uuid: obj.uuid,\n      name: obj.name,\n      objType: obj.objType,\n      x: positionX,\n      y: positionY,\n      z: positionZ,\n      style: {\n        skinColor: obj.skinColor || commonSkin,\n        skin: obj.skin,\n      },\n    };\n    var cube = this.createCube(cubeobj);\n    return cube;\n  }\n  //创建盒子体\n  createCube(obj) {\n    var width = obj.width || 1000; //x轴\n    var height = obj.height || 10; //y轴\n    var depth = obj.depth || width; //z轴\n    var x = obj.x || 0,\n      y = obj.y || 0,\n      z = obj.z || 0;\n    var skinColor = obj.style.hasOwnProperty(\"skinColor\")\n      ? obj.style.skinColor\n      : \"\";\n    //width：是x方向上的长度；height：是y方向上的长度；depth：是z方向上的长度；\n    var cubeGeometry = new THREE.CubeGeometry(width, height, depth, 0, 0, 1);\n\n    //六面颜色\n    for (var i = 0; i < cubeGeometry.faces.length; i += 2) {\n      cubeGeometry.faces[i].color.setHex(skinColor);\n      cubeGeometry.faces[i + 1].color.setHex(skinColor);\n    }\n    //六面纹理\n    var skin_up_obj = {\n      vertexColors: THREE.FaceColors,\n    };\n    var skin_down_obj = skin_up_obj,\n      skin_fore_obj = skin_up_obj,\n      skin_behind_obj = skin_up_obj,\n      skin_left_obj = skin_up_obj,\n      skin_right_obj = skin_up_obj;\n    var skin_opacity = 1;\n    if (\n      obj.style != null &&\n      typeof obj.style != \"undefined\" &&\n      obj.style.skin != null &&\n      typeof obj.style.skin != \"undefined\"\n    ) {\n      //透明度\n      if (\n        obj.style.skin.opacity != null &&\n        typeof obj.style.skin.opacity != \"undefined\"\n      ) {\n        skin_opacity = obj.style.skin.opacity;\n      }\n      let skin_right =\n        obj.style.skin.hasOwnProperty(\"skin_right\") &&\n        obj.style.skin.skin_right.hasOwnProperty(\"skinColor\")\n          ? obj.style.skin.skin_right.skinColor\n          : obj.style.skin.hasOwnProperty(\"skinColor\")\n          ? obj.style.skin.skinColor\n          : \"\";\n      let skin_left =\n        obj.style.skin.hasOwnProperty(\"skin_left\") &&\n        obj.style.skin.skin_left.hasOwnProperty(\"skinColor\")\n          ? obj.style.skin.skin_left.skinColor\n          : obj.style.skin.hasOwnProperty(\"skinColor\")\n          ? obj.style.skin.skinColor\n          : \"\";\n      let skin_up =\n        obj.style.skin.hasOwnProperty(\"skin_up\") &&\n        obj.style.skin.skin_up.hasOwnProperty(\"skinColor\")\n          ? obj.style.skin.skin_up.skinColor\n          : obj.style.skin.hasOwnProperty(\"skinColor\")\n          ? obj.style.skin.skinColor\n          : \"\";\n      let skin_down =\n        obj.style.skin.hasOwnProperty(\"skin_down\") &&\n        obj.style.skin.skin_down.hasOwnProperty(\"skinColor\")\n          ? obj.style.skin.skin_down.skinColor\n          : obj.style.skin.hasOwnProperty(\"skinColor\")\n          ? obj.style.skin.skinColor\n          : \"\";\n      let skin_fore =\n        obj.style.skin.hasOwnProperty(\"skin_fore\") &&\n        obj.style.skin.skin_fore.hasOwnProperty(\"skinColor\")\n          ? obj.style.skin.skin_fore.skinColor\n          : obj.style.skin.hasOwnProperty(\"skinColor\")\n          ? obj.style.skin.skinColor\n          : \"\";\n      let skin_behind =\n        obj.style.skin.hasOwnProperty(\"skin_behind\") &&\n        obj.style.skin.skin_behind.hasOwnProperty(\"skinColor\")\n          ? obj.style.skin.skin_behind.skinColor\n          : obj.style.skin.hasOwnProperty(\"skinColor\")\n          ? obj.style.skin.skinColor\n          : \"\";\n\n      //右\n      skin_right_obj = this.createSkinOption(\n        depth,\n        height,\n        obj.style.skin.skin_right,\n        cubeGeometry,\n        skin_right,\n        0\n      );\n      //左\n      skin_left_obj = this.createSkinOption(\n        depth,\n        height,\n        obj.style.skin.skin_left,\n        cubeGeometry,\n        skin_left,\n        2\n      );\n      //上\n      skin_up_obj = this.createSkinOption(\n        width,\n        depth,\n        obj.style.skin.skin_up,\n        cubeGeometry,\n        skin_up,\n        4\n      );\n      //下\n      skin_down_obj = this.createSkinOption(\n        width,\n        depth,\n        obj.style.skin.skin_down,\n        cubeGeometry,\n        skin_down,\n        6\n      );\n      //前\n      skin_fore_obj = this.createSkinOption(\n        width,\n        height,\n        obj.style.skin.skin_fore,\n        cubeGeometry,\n        skin_fore,\n        8\n      );\n      //后\n      skin_behind_obj = this.createSkinOption(\n        width,\n        height,\n        obj.style.skin.skin_behind,\n        cubeGeometry,\n        skin_behind,\n        10\n      );\n    }\n    var cubeMaterialArray = []; //右，左，上，下，前，后\n    //右：134、364；左：570、720；上：451、501；下：762、632；前：021、231；后：465、675；\n    //正面：上左上右下左下右(0123)；后面正对看：上左上右下左下右(4567)\n    cubeMaterialArray.push(new THREE.MeshLambertMaterial(skin_right_obj));\n    cubeMaterialArray.push(new THREE.MeshLambertMaterial(skin_left_obj));\n    cubeMaterialArray.push(new THREE.MeshLambertMaterial(skin_up_obj));\n    cubeMaterialArray.push(new THREE.MeshLambertMaterial(skin_down_obj));\n    cubeMaterialArray.push(new THREE.MeshLambertMaterial(skin_fore_obj));\n    cubeMaterialArray.push(new THREE.MeshLambertMaterial(skin_behind_obj));\n\n    var cube = new THREE.Mesh(cubeGeometry, cubeMaterialArray);\n    cube.castShadow = true;\n    cube.receiveShadow = true;\n    cube.uuid = obj.uuid;\n    cube.name = obj.name;\n    cube.position.set(x, y, z);\n    if (\n      obj.rotation != null &&\n      typeof obj.rotation != \"undefined\" &&\n      obj.rotation.length > 0\n    ) {\n      obj.rotation.forEach(function(rotation_obj, index) {\n        // rotation: [{ direction: 'x', degree: 0.5*Math.PI }],\n        switch (rotation_obj.direction) {\n          case \"x\":\n            cube.rotateX(rotation_obj.degree);\n            break;\n          case \"y\":\n            cube.rotateY(rotation_obj.degree);\n            break;\n          case \"z\":\n            cube.rotateZ(rotation_obj.degree);\n            break;\n          case \"arb\": //{ direction: 'arb', degree: [x,y,z,angle] }  x,y,z是向量0,1,0 表示y轴旋转\n            cube.rotateOnAxis(\n              new THREE.Vector3(\n                rotation_obj.degree[0],\n                rotation_obj.degree[1],\n                rotation_obj.degree[2]\n              ),\n              rotation_obj.degree[3]\n            );\n            break;\n        }\n      });\n    }\n    return cube;\n  }\n  // 创建桌子\n  CreateTable(obj) {\n    //初始以下为基点(中心点以机柜的中心为中心点)\n    var Cabinet,\n      floorHeight = 10,\n      uuid = obj.uuid || this.commonFunc.guid();\n\n    //上\n    var upobj = {\n      show: true,\n      uuid: \"\",\n      name: \"cubetop\",\n      objType: \"cube\",\n      width: obj.size.width,\n      height: obj.size.thick,\n      depth: obj.size.depth,\n      x: 0,\n      y: obj.size.height - obj.size.thick,\n      z: 0,\n      style: {\n        skinColor: obj.style.skinColor,\n        skin: obj.style.skin,\n      },\n    };\n    var upcube = this.createCube(upobj);\n\n    //左\n    var leftobj = {\n      show: true,\n      uuid: \"\",\n      name: \"cubeleft\",\n      objType: \"cube\",\n      width: obj.size.thick,\n      height: obj.size.height - 2 * obj.size.thick,\n      depth: obj.size.depth,\n      x: -(obj.size.width / 2 + obj.size.thick / 2) * 0.9,\n      y: -obj.size.height / 2 + obj.size.thick / 2,\n      z: 0,\n      style: {\n        skinColor: obj.style.skinColor,\n        skin: obj.style.skin,\n      },\n    };\n    var leftcube = this.createCube(leftobj);\n    Cabinet = this.mergeModel(\"+\", upcube, leftcube);\n\n    //右\n    var rightobj = {\n      show: true,\n      uuid: \"\",\n      name: \"cuberight\",\n      objType: \"cube\",\n      width: obj.size.thick,\n      height: obj.size.height - 2 * obj.size.thick,\n      depth: obj.size.depth,\n      x: (obj.size.width / 2 - obj.size.thick / 2) * 0.9,\n      y: -obj.size.height / 2 + obj.size.thick / 2,\n      z: 0,\n      style: {\n        skinColor: obj.style.skinColor,\n        skin: obj.style.skin,\n      },\n    };\n    var rightcube = this.createCube(rightobj);\n    Cabinet = this.mergeModel(\"+\", Cabinet, rightcube);\n\n    this.addObject(Cabinet, \"object\"); //这里也得给添加到对象，不然hour的时候设备的提示信息有问题，没拉出设备放机柜顶上也提示了\n\n    var tempobj = new THREE.Object3D();\n    tempobj.add(Cabinet);\n    tempobj.name = obj.name;\n    tempobj.uuid = uuid;\n    tempobj.data = obj.data || { name: obj.name, alarmInfo: [] };\n    tempobj.position.set(obj.x || 0, (obj.y || 0) + floorHeight, obj.z || 0);\n    this.addObject(tempobj, \"object\");\n\n    if (\n      obj.rotation != null &&\n      typeof obj.rotation != \"undefined\" &&\n      obj.rotation.length > 0\n    ) {\n      obj.rotation.forEach(function(rotation_obj, index) {\n        // rotation: [{ direction: 'x', degree: 0.5*Math.PI }],\n        switch (rotation_obj.direction) {\n          case \"x\":\n            tempobj.rotateX(rotation_obj.degree);\n            break;\n          case \"y\":\n            tempobj.rotateY(rotation_obj.degree);\n            break;\n          case \"z\":\n            tempobj.rotateZ(rotation_obj.degree);\n            break;\n          case \"arb\": //{ direction: 'arb', degree: [x,y,z,angle] }\n            tempobj.rotateOnAxis(\n              new THREE.Vector3(\n                rotation_obj.degree[0],\n                rotation_obj.degree[1],\n                rotation_obj.degree[2]\n              ),\n              rotation_obj.degree[3]\n            );\n            break;\n        }\n      });\n    }\n    return tempobj;\n  }\n  //创建柜子\n  createEmptyCabinet(obj) {\n    //初始以下为基点(中心点以机柜的中心为中心点)\n    var Cabinet,\n      floorHeight = 10,\n      _this = this,\n      uuid = obj.uuid || this.commonFunc.guid();\n    //下\n    var downobj = {\n      show: true,\n      name: \"cubedown\",\n      uuid: \"\",\n      objType: \"cube\",\n      width: obj.size.width,\n      height: obj.size.thick,\n      depth: obj.size.depth,\n      x: 0,\n      y: -obj.size.height / 2 + obj.size.thick / 2,\n      z: 0,\n      style: {\n        skinColor: obj.style.skinColor,\n        skin: obj.style.skin,\n      },\n    };\n    var downcube = this.createCube(downobj);\n\n    //上\n    var upobj = {\n      show: true,\n      uuid: \"\",\n      name: \"cubetop\",\n      objType: \"cube\",\n      width: obj.size.width,\n      height: obj.size.thick,\n      depth: obj.size.depth,\n      x: 0,\n      y: obj.size.height - obj.size.thick,\n      z: 0,\n      style: {\n        skinColor: obj.style.skinColor,\n        skin: obj.style.skin,\n      },\n    };\n    var upcube = this.createCube(upobj);\n\n    Cabinet = this.mergeModel(\"+\", downcube, upcube);\n\n    //左\n    var leftobj = {\n      show: true,\n      uuid: \"\",\n      name: \"cubeleft\",\n      objType: \"cube\",\n      width: obj.size.thick,\n      height: obj.size.height - 2 * obj.size.thick,\n      depth: obj.size.depth,\n      x: -obj.size.width / 2 + obj.size.thick / 2,\n      y: obj.size.height / 2 - obj.size.thick / 2,\n      z: 0,\n      style: {\n        skinColor: obj.style.skinColor,\n        skin: obj.style.skin,\n      },\n    };\n    var leftcube = this.createCube(leftobj);\n    Cabinet = this.mergeModel(\"+\", Cabinet, leftcube);\n\n    //右\n    var rightobj = {\n      show: true,\n      uuid: \"\",\n      name: \"cuberight\",\n      objType: \"cube\",\n      width: obj.size.thick,\n      height: obj.size.height - 2 * obj.size.thick,\n      depth: obj.size.depth,\n      x: obj.size.width / 2 - obj.size.thick / 2,\n      y: obj.size.height / 2 - obj.size.thick / 2,\n      z: 0,\n      style: {\n        skinColor: obj.style.skinColor,\n        skin: obj.style.skin,\n      },\n    };\n    var rightcube = this.createCube(rightobj);\n    Cabinet = this.mergeModel(\"+\", Cabinet, rightcube);\n\n    //后\n    var behindobj = {\n      show: true,\n      uuid: \"\",\n      name: \"\",\n      objType: \"cube\",\n      width: obj.size.width,\n      height: obj.size.height - 2 * obj.size.thick,\n      depth: obj.size.thick,\n      x: 0,\n      y: obj.size.height / 2 - obj.size.thick / 2,\n      z: -obj.size.depth / 2 + obj.size.thick / 2,\n      style: {\n        skinColor: obj.style.skinColor,\n        skin: obj.style.skin,\n      },\n    };\n    var behindcube = this.createCube(behindobj);\n    Cabinet = this.mergeModel(\"+\", Cabinet, behindcube);\n    this.addObject(Cabinet, \"object\"); //这里也得给添加到对象，不然hour的时候设备的提示信息有问题，没拉出设备放机柜顶上也提示了\n\n    var tempobj = new THREE.Object3D();\n    tempobj.add(Cabinet);\n    tempobj.name = obj.name;\n    tempobj.uuid = uuid;\n    tempobj.data = obj.data || { name: obj.name, alarmInfo: [] };\n    tempobj.position.set(obj.x || 0, (obj.y || 0) + floorHeight, obj.z || 0);\n    this.addObject(tempobj, \"object\");\n    this.cabinet.push(tempobj);\n    //门\n    if (obj.doors != null && typeof obj.doors != \"undefined\") {\n      if (obj.doors.skins.length == 1 && obj.doors.doorname.length == 1) {\n        var doorobj = {\n          show: true,\n          uuid: \"\",\n          name: obj.doors.doorname[0],\n          objType: \"cube\",\n          depth: obj.size.thick,\n          width: obj.size.width,\n          height: obj.size.height - 2 * obj.size.thick,\n          x: 0,\n          y: 0,\n          z: obj.size.depth / 2 - obj.size.thick / 2 + 1,\n          rotation: obj.doors.rotation || null,\n          style: {\n            skinColor: obj.doors.skins[0].skinColor,\n            skin: obj.doors.skins[0],\n          },\n        };\n        var doorcube = this.createCube(doorobj);\n        if (obj.doors.rotation) {\n          doorcube.position.set(\n            obj.size.width / 2,\n            0,\n            obj.size.depth / 2 - obj.size.thick / 2 + 1 + obj.size.width / 2\n          );\n        }\n        doorcube.tipInfo = obj.doors.tipInfo;\n        tempobj.add(doorcube);\n        this.addObject(doorcube, \"object\");\n      } else if (\n        obj.doors.skins.length == 2 &&\n        obj.doors.doorname.length == 2\n      ) {\n        for (let i = 0; i < obj.doors.skins.length; i++) {\n          let x = i === 0 ? -obj.size.width / 4 : obj.size.width / 4;\n          var doorobj = {\n            show: true,\n            uuid: \"\",\n            name: obj.doors.doorname[i],\n            objType: \"cube\",\n            depth: obj.size.thick,\n            width: obj.size.width / 2,\n            height: obj.size.height,\n            x: x,\n            y: 0,\n            z: obj.size.depth / 2 - obj.size.thick / 2 + 1,\n            style: {\n              skinColor: obj.doors.skins[i].skinColor,\n              skin: obj.doors.skins[i],\n            },\n          };\n          var doorcube = this.createCube(doorobj);\n          tempobj.add(doorcube);\n          this.addObject(doorcube, \"object\");\n        }\n      }\n    }\n    //机柜告警信息\n    if (this.commonFunc.hasObj(obj.data)) {\n      //文本信息\n      var width = obj.size.width || 70;\n      var height = obj.size.height || 70;\n      var canvas = document.createElement(\"canvas\");\n      canvas[\"width\"] = width;\n      canvas[\"height\"] = height;\n      var context = canvas.getContext(\"2d\");\n      context.beginPath();\n      context.rect(0, 0, width, height);\n      context.fillStyle = \"rgba(255, 255, 255, 0)\"; //canvas设置为透明\n      context.fill();\n\n      var marker = function(context, x, y, text) {\n        var color = \"#ffffff\";\n        context.font = 12 + 'px \"Microsoft Yahei\" ';\n        context.fillStyle = color;\n        context.textAlign = \"center\";\n        context.textBaseline = \"middle\";\n        context.strokeStyle = color;\n        context.fillText(text, x, y);\n      };\n      marker(context, width / 2, height / 2, obj.data.name);\n      var alarmobj = {\n        width: width,\n        height: height,\n        imgurl: canvas,\n        y: obj.size.height / 2 + 1,\n        transparent: true,\n        opacity: 0.8,\n        rotation: [{ direction: \"x\", degree: -0.5 * Math.PI }],\n      };\n      var text = this.createPlaneGeometry(alarmobj);\n      tempobj.add(text);\n      //告警信息\n    }\n    if (this.commonFunc.hasObj(obj.children) && obj.children.length > 0) {\n      let equipmentUUID = [];\n      obj.children.forEach(function(service, index) {\n        let serviceuuid = service.uuid || _this.commonFunc.guid();\n        service.x = obj.x;\n        service.z = obj.z;\n        service.y =\n          service.y +\n          floorHeight +\n          (obj.y - (obj.size.height - 2 * obj.size.thick) / 2);\n        service.rotation = obj.rotation || null;\n        var newobj = _this.createCube(service);\n        newobj.data = service.data;\n        newobj.data[\"cabinetUUID\"] = uuid;\n        newobj.uuid = serviceuuid;\n        equipmentUUID.push(serviceuuid);\n        _this.addObject(newobj);\n        _this.equipment.push(newobj);\n      });\n      tempobj.data[\"equipmentUUID\"] = equipmentUUID;\n    }\n    if (\n      obj.rotation != null &&\n      typeof obj.rotation != \"undefined\" &&\n      obj.rotation.length > 0\n    ) {\n      obj.rotation.forEach(function(rotation_obj, index) {\n        // rotation: [{ direction: 'x', degree: 0.5*Math.PI }],\n        switch (rotation_obj.direction) {\n          case \"x\":\n            tempobj.rotateX(rotation_obj.degree);\n            break;\n          case \"y\":\n            tempobj.rotateY(rotation_obj.degree);\n            break;\n          case \"z\":\n            tempobj.rotateZ(rotation_obj.degree);\n            break;\n          case \"arb\": //{ direction: 'arb', degree: [x,y,z,angle] }\n            tempobj.rotateOnAxis(\n              new THREE.Vector3(\n                rotation_obj.degree[0],\n                rotation_obj.degree[1],\n                rotation_obj.degree[2]\n              ),\n              rotation_obj.degree[3]\n            );\n            break;\n        }\n      });\n    }\n    return tempobj;\n  }\n  //创建圆柱体\n  createCylinderPlant(obj) {\n    var _this = this;\n    var radiusTop = obj.radiusTop || 20; //顶面的半径\n    var radiusBottom = obj.radiusBottom || 20; //底面的半径\n    var height = obj.height || 100; //高度\n    var radiusSegments = obj.radiusSegments || 8;\n    var heightSegments = obj.heightSegments || 1;\n    var openEnded = obj.openEnded || false;\n    var x = obj.x || 0,\n      y = obj.y || 0,\n      z = obj.z || 0;\n    var skinColor = obj.style.skinColor || 0x98750f;\n    //创建圆柱体\n    var cylinderGeo = new THREE.CylinderGeometry(\n      radiusTop,\n      radiusBottom,\n      height,\n      radiusSegments,\n      heightSegments,\n      openEnded\n    );\n    // console.log(cylinderGeo)\n    var cylinderMat = new THREE.MeshLambertMaterial({\n      //创建材料\n      color: skinColor,\n      wireframe: false,\n    });\n    //创建圆柱体网格模型\n    var cylinder = new THREE.Mesh(cylinderGeo, cylinderMat);\n    cylinder.position.set(x, y, z); //设置圆柱坐标\n    if (this.commonFunc.hasObj(obj.children) && obj.children.length > 0) {\n      obj.children.forEach(function(childobj, index) {\n        var newobj;\n        if (childobj.objType == \"plane\") {\n          newobj = _this.createPlaneGeometry(childobj);\n        } else {\n          newobj = _this.createCylinderPlant(childobj);\n        }\n        _this.addObject(newobj, \"scene\");\n        // cylinder = _this.mergeModel('+', cylinder, newobj,skinColor);\n      });\n    }\n    return cylinder;\n  }\n  //创建平面\n  createPlaneGeometry(obj) {\n    var texture;\n    var transparent = obj.transparent;\n    if (obj.transparent !== false) {\n      transparent = true;\n    }\n    if (typeof obj.imgurl == \"string\") {\n      //传入的材质是图片路径，使用 textureloader加载图片作为材质\n      var loader = new THREE.TextureLoader();\n      // loader.setCrossOrigin(this.crossOrigin);\n      var imgurl = obj.imgurl;\n      if (obj.imgurl.indexOf(\"data:image/\") == -1) {\n        imgurl = this.commonFunc.getPath(obj.imgurl);\n      }\n      texture = loader.load(\n        imgurl,\n        function() {},\n        undefined,\n        function() {}\n      );\n    } else {\n      texture = new THREE.CanvasTexture(obj.imgurl);\n    }\n    var MaterParam = {\n      //材质的参数\n      map: texture,\n      side: obj.side || THREE.DoubleSide,\n      // side:THREE.FrontSide,\n      transparent: transparent,\n      opacity: obj.opacity || 1,\n    };\n    if (obj.blending) {\n      MaterParam.blending = THREE.AdditiveBlending; //使用饱和度叠加渲染\n    }\n    var plane = new THREE.Mesh(\n      new THREE.PlaneGeometry(obj.width, obj.height, 1, 1),\n      new THREE.MeshBasicMaterial(MaterParam)\n    );\n    plane.position.x = obj.x || 0;\n    plane.position.y = obj.y || 0;\n    plane.position.z = obj.z || 0;\n    if (\n      obj.rotation != null &&\n      typeof obj.rotation != \"undefined\" &&\n      obj.rotation.length > 0\n    ) {\n      obj.rotation.forEach(function(rotation_obj, index) {\n        // rotation: [{ direction: 'x', degree: 0.5*Math.PI }],\n        switch (rotation_obj.direction) {\n          case \"x\":\n            plane.rotateX(rotation_obj.degree);\n            break;\n          case \"y\":\n            plane.rotateY(rotation_obj.degree);\n            break;\n          case \"z\":\n            plane.rotateZ(rotation_obj.degree);\n            break;\n          case \"arb\": //{ direction: 'arb', degree: [x,y,z,angle] }  x,y,z是向量0,1,0 表示y轴旋转\n            plane.rotateOnAxis(\n              new THREE.Vector3(\n                rotation_obj.degree[0],\n                rotation_obj.degree[1],\n                rotation_obj.degree[2]\n              ),\n              rotation_obj.degree[3]\n            );\n            break;\n        }\n      });\n    }\n    return plane;\n  }\n  //模型植物加载\n  createObjPlant(obj) {\n    let _this = this;\n    var mtlLoader = new MTLLoader();\n    mtlLoader.load(_this.commonFunc.getPath(\"plant/plant.mtl\"), function(\n      materials\n    ) {\n      materials.preload();\n      var objLoader = new OBJLoader();\n      console.log(materials);\n      objLoader.setMaterials(materials);\n      objLoader.load(\n        _this.commonFunc.getPath(\"plant/plant.obj\"),\n        function(object) {\n          obj.children.forEach(function(childobj) {\n            var newobj = object.clone();\n            if (!newobj.objHandle) {\n              if (childobj.objHandle) {\n                newobj.objHandle = childobj.objHandle;\n              } else if (obj.objHandle) {\n                newobj.objHandle = obj.objHandle;\n              }\n            }\n            newobj = _this.handleObj(newobj);\n            newobj.position.set(\n              childobj.x || 0,\n              childobj.y || 0,\n              childobj.z || 0\n            );\n            _this.scene.add(newobj);\n          });\n          _this.progressSuccess += 1;\n        },\n        _this.onProgress,\n        _this.onError\n      );\n    });\n  }\n  // 创建椅子\n  createObjChair(obj) {\n    let _this = this;\n    var mtlLoader = new MTLLoader();\n    mtlLoader.load(_this.commonFunc.getPath(\"chair/chair.mtl\"), function(\n      materials\n    ) {\n      materials.preload();\n      var objLoader = new OBJLoader();\n      objLoader.setMaterials(materials);\n      objLoader.load(\n        _this.commonFunc.getPath(\"chair/chair.obj\"),\n        function(object) {\n          obj.children.forEach(function(childobj) {\n            var newobj = object.clone();\n            if (!newobj.objHandle) {\n              if (childobj.objHandle) {\n                newobj.objHandle = childobj.objHandle;\n              } else if (obj.objHandle) {\n                newobj.objHandle = obj.objHandle;\n              }\n            }\n            newobj = _this.handleObj(newobj);\n            newobj.position.set(\n              childobj.x || 0,\n              childobj.y || 0,\n              childobj.z || 0\n            );\n            _this.scene.add(newobj);\n          });\n          _this.progressSuccess += 1;\n        },\n        _this.onProgress,\n        _this.onError\n      );\n    });\n  }\n  // 创建桌子\n  createObjDesk(obj) {\n    let _this = this;\n    var mtlLoader = new MTLLoader();\n    mtlLoader.load(_this.commonFunc.getPath(\"desk/desk.mtl\"), function(\n      materials\n    ) {\n      // materials['materialsInfo']['Bamboo_Wood']['map_kd'] = _this.BASE_PATH + 'desk/bamboo-wood-semigloss-albedo.png'\n      // materials['materialsInfo']['Bamboo_Wood']['map_ns'] = _this.BASE_PATH + 'bamboo-wood-semigloss-roughness.png'\n      // materials['materialsInfo']['Bamboo_Wood']['refl'] = _this.BASE_PATH + 'bamboo-wood-semigloss-metal.png'\n      materials.preload();\n      var objLoader = new OBJLoader();\n\n      objLoader.setMaterials(materials);\n\n      objLoader.load(\n        _this.commonFunc.getPath(\"desk/desk.obj\"),\n        function(object) {\n          obj.children.forEach(function(childobj) {\n            var newobj = object.clone();\n            if (!newobj.objHandle) {\n              if (childobj.objHandle) {\n                newobj.objHandle = childobj.objHandle;\n              } else if (obj.objHandle) {\n                newobj.objHandle = obj.objHandle;\n              }\n            }\n            newobj = _this.handleObj(newobj);\n            newobj.position.set(\n              childobj.x || 0,\n              childobj.y || 0,\n              childobj.z || 0\n            );\n            _this.scene.add(newobj);\n          });\n          _this.progressSuccess += 1;\n        },\n        _this.onProgress,\n        _this.onError\n      );\n    });\n  }\n  //模型灭火器\n  createObjAnnihilator(obj) {\n    let _this = this;\n    var mtlLoader = new MTLLoader();\n    mtlLoader.load(\n      _this.commonFunc.getPath(\"annihilator/annihilator.mtl\"),\n      function(materials) {\n        materials.preload();\n        var objLoader = new OBJLoader();\n        objLoader.setMaterials(materials);\n        objLoader.load(\n          _this.commonFunc.getPath(\"annihilator/annihilator.obj\"),\n          function(object) {\n            obj.children.forEach(function(childobj) {\n              var newobj = object.clone();\n              if (!newobj.objHandle) {\n                if (childobj.objHandle) {\n                  newobj.objHandle = childobj.objHandle;\n                } else if (obj.objHandle) {\n                  newobj.objHandle = obj.objHandle;\n                }\n              }\n              newobj = _this.handleObj(newobj);\n              newobj.position.set(\n                childobj.x || 0,\n                childobj.y || 0,\n                childobj.z || 0\n              );\n              _this.scene.add(newobj);\n            });\n            _this.progressSuccess += 1;\n          },\n          _this.onProgress,\n          _this.onError\n        );\n      }\n    );\n  }\n  //摄像头\n  createObjCamera(obj) {\n    var _this = this;\n    var mtlLoader = new MTLLoader();\n    mtlLoader.load(_this.commonFunc.getPath(\"camera/camera.mtl\"), function(\n      materials\n    ) {\n      materials.preload();\n      var objLoader = new OBJLoader();\n      objLoader.setMaterials(materials);\n      objLoader.load(\n        _this.commonFunc.getPath(\"camera/camera.obj\"),\n        function(object) {\n          obj.children.forEach(function(childobj) {\n            var newobj = object.clone();\n            if (!newobj.objHandle) {\n              if (childobj.objHandle) {\n                newobj.objHandle = childobj.objHandle;\n              } else if (obj.objHandle) {\n                newobj.objHandle = obj.objHandle;\n              }\n            }\n            newobj = _this.handleObj(newobj);\n            newobj.position.set(\n              childobj.x || 0,\n              childobj.y || 0,\n              childobj.z || 0\n            );\n            _this.scene.add(newobj);\n          });\n          _this.progressSuccess += 1;\n        },\n        _this.onProgress,\n        _this.onError\n      );\n    });\n  }\n  handleObj(obj) {\n    if (\n      obj.objHandle != null &&\n      typeof obj.objHandle != \"undefined\" &&\n      obj.objHandle.length > 0\n    ) {\n      obj.objHandle.forEach(function(childobj) {\n        // objHandle: [{ direction: 'x', ratio: 0.5 ,degree:0.5*Math.PI}],\n        switch (childobj.direction) {\n          case \"x\":\n            if (childobj.ratio) {\n              obj.scale.x = childobj.ratio;\n            }\n            if (childobj.degree) {\n              obj.rotateX(childobj.degree);\n            }\n            break;\n          case \"y\":\n            if (childobj.ratio) {\n              obj.scale.y = childobj.ratio;\n            }\n            if (childobj.degree) {\n              obj.rotateY(childobj.degree);\n            }\n            break;\n          case \"z\":\n            if (childobj.ratio) {\n              obj.scale.z = childobj.ratio;\n            }\n            if (childobj.degree) {\n              obj.rotateZ(childobj.degree);\n            }\n            break;\n          case \"arb\": //{ direction: 'arb', handleScale: [0.01,0.01,0.01], handleRotale: [0,1,0,0.5*Math.PI]}\n            if (childobj.handleScale && childobj.handleScale.length == 3) {\n              obj.scale.set(\n                childobj.handleScale[0],\n                childobj.handleScale[1],\n                childobj.handleScale[2]\n              );\n            }\n            if (childobj.handleRotale && childobj.handleRotale.length == 4) {\n              obj.rotateOnAxis(\n                new THREE.Vector3(\n                  childobj.handleRotale[0],\n                  childobj.handleRotale[1],\n                  childobj.handleRotale[2]\n                ),\n                childobj.handleRotale[3]\n              );\n            }\n            break;\n        }\n      });\n    }\n    return obj;\n  }\n  //进度通知\n  onProgress = function(xhr) {\n    if (xhr.lengthComputable) {\n      var percentComplete = (xhr.loaded / xhr.total) * 100;\n      // console.log( Math.round( percentComplete, 2 ) + '% downloaded' );\n    }\n  };\n  //报错通知\n  onError = function(xhr) {};\n  //设置旋转中心\n  changePivot(obj, x, y, z) {\n    let tempobj = new THREE.Object3D();\n    tempobj.position.set(\n      obj.position.x + x,\n      obj.position.y + y,\n      obj.position.z + z\n    );\n    obj.position.set(-x, -y, -z);\n    tempobj.add(obj);\n    return tempobj;\n  }\n  //添加对象\n  addObject(obj, info) {\n    if (info) {\n      if (info == \"object\") {\n        this.objects.push(obj);\n      }\n      if (info == \"scene\") {\n        this.scene.add(obj);\n      }\n    } else {\n      this.objects.push(obj);\n      this.scene.add(obj);\n    }\n  }\n  //创建皮肤材质操作\n  createSkinOption(width, height, obj, cube, cubeColor, cubefacenub) {\n    if (this.commonFunc.hasObj(obj)) {\n      if (this.commonFunc.hasObj(obj.imgUrl)) {\n        var MaterParam = {\n          color: cubeColor,\n          map: this.createSkin(width, height, obj),\n          opacity: obj.opacity || 1,\n        };\n        if (obj.transparent) {\n          MaterParam.transparent = obj.transparent;\n        }\n        if (obj.blending) {\n          MaterParam.blending = THREE.AdditiveBlending; //使用饱和度叠加渲染\n        }\n        return MaterParam;\n      } else {\n        if (this.commonFunc.hasObj(obj.skinColor)) {\n          cube.faces[cubefacenub].color.setHex(obj.skinColor);\n          cube.faces[cubefacenub + 1].color.setHex(obj.skinColor);\n        }\n        return {\n          vertexColors: THREE.FaceColors,\n        };\n      }\n    } else {\n      return {\n        vertexColors: THREE.FaceColors,\n      };\n    }\n  }\n  //使用材质图片\n  createSkin(width, height, obj) {\n    var imgwidth = 128,\n      imgheight = 128;\n    if (obj.width != null && typeof obj.width != \"undefined\") {\n      imgwidth = obj.width;\n    }\n    if (obj.height != null && typeof obj.height != \"undefined\") {\n      imgheight = obj.height;\n    }\n    var texture = new THREE.TextureLoader().load(\n      this.commonFunc.getPath(obj.imgUrl)\n    );\n    var repeat = false;\n    if (\n      obj.repeatx != null &&\n      typeof obj.repeatx != \"undefined\" &&\n      obj.repeatx == true\n    ) {\n      texture.wrapS = THREE.RepeatWrapping;\n      repeat = true;\n    }\n    if (\n      obj.repeaty != null &&\n      typeof obj.repeaty != \"undefined\" &&\n      obj.repeaty == true\n    ) {\n      texture.wrapT = THREE.RepeatWrapping;\n      repeat = true;\n    }\n    if (repeat) {\n      texture.repeat.set(width / imgwidth, height / imgheight);\n    }\n    return texture;\n  }\n  //创建文字\n  createText(floorWidth, floorHeight) {\n    var canvas = document.createElement(\"canvas\");\n    canvas[\"width\"] = 1024;\n    canvas[\"height\"] = 1024;\n    var context = canvas.getContext(\"2d\");\n    context.beginPath();\n    context.rect(0, 0, 1024, 1024);\n    context.fillStyle = \"rgba(255, 255, 255, 0)\"; //canvas设置为透明\n    context.fill();\n\n    var marker = function(context, text, text2, x, y) {\n      var color = \"#0B2F3A\"; //'#0B2F3A';//'#FE642E';\n      context.font = 30 + 'px \"Microsoft Yahei\" ';\n      context.fillStyle = color;\n      context.textAlign = \"center\";\n      context.textBaseline = \"middle\";\n      //context.shadowBlur = 30;\n      context.strokeStyle = color;\n      context.lineWidth = 3;\n      context.strokeText(text, x, y);\n\n      if (!text2) return;\n      y += 30;\n      color = \"#FE642E\";\n      context.font = 16 + 'px \"Microsoft Yahei\" ';\n      context.fillStyle = color;\n      context.textAlign = \"center\";\n      context.textBaseline = \"middle\";\n      context.fillText(text2, x, y);\n    };\n    marker(context, \"阿里巴巴\", \"ip待分配\", 500, 380);\n    marker(context, \"腾讯\", \"192.168.1.150\", 500, 495);\n    marker(context, \"依米康·龙控\", \"192.168.1.100\", 500, 610);\n    var obj = {\n      width: floorHeight,\n      height: floorWidth,\n      imgurl: canvas,\n      y: 6,\n      transparent: true,\n      opacity: 0.8,\n      rotation: [\n        { direction: \"x\", degree: -0.5 * Math.PI },\n        { direction: \"z\", degree: 0.5 * Math.PI },\n      ],\n    };\n    var text = this.createPlaneGeometry(obj);\n    this.scene.add(text);\n  }\n  //更新告警状态\n  updateAlarmStatus(arr) {\n    for (let i = 0; i < this.equipment.length; i++) {\n      for (let j = 0; j < arr.length; j++) {\n        if (\n          arr[j].devid == this.equipment[i].data.devid &&\n          arr[j].pointid == this.equipment[i].data.pointid\n        ) {\n          for (let m = 0; m < this.sprite.length; m++) {\n            if (\n              this.sprite[m].data.cabinetUUID ==\n              this.equipment[i].data.cabinetUUID\n            ) {\n              this.changeCabinetAlarmObj(arr[j], m, i);\n            }\n          }\n        }\n      }\n    }\n  }\n  //更新机柜的告警对象\n  changeCabinetAlarmObj(obj, spriteIndex, equipmentIndex) {\n    let arr = this.sprite[spriteIndex].data.alarmInfo;\n\n    this.sprite[spriteIndex].material.map;\n    if (obj.isalarm) {\n      if (Number(this.sprite[spriteIndex].data.level) < Number(obj.level)) {\n        this.sprite[spriteIndex].data.level = obj.level;\n        this.sprite[spriteIndex].material.color.set(\n          this.alarmColor[\"level\" + obj.level]\n        );\n      }\n      let flag = true; //默认是新的告警\n      for (let i = 0; i < arr.length; i++) {\n        if (arr[i].devid == obj.devid && arr[i].pointid == obj.pointid) {\n          //已经存在的告警再次告警\n          arr.splice(i, 1, obj);\n          flag = false;\n        }\n      }\n      if (flag) {\n        arr.push(obj);\n      }\n      if (this.equipment[equipmentIndex].material.length > 0) {\n        for (\n          let i = 0;\n          i < this.equipment[equipmentIndex].material.length;\n          i++\n        ) {\n          this.equipment[equipmentIndex].material[i].color.set(\n            this.alarmColor[\"level\" + obj.level]\n          );\n        }\n      }\n      this.equipment[equipmentIndex].data.isalarm = true;\n      this.sprite[spriteIndex].visible = obj.isalarm;\n      let info = obj.name + obj.alarmInfo;\n      this.alarmPlay(info);\n    } else {\n      if (arr.length > 0) {\n        for (let i = 0; i < arr.length; i++) {\n          if (arr[i].devid == obj.devid && arr[i].pointid == obj.pointid) {\n            arr.splice(i, 1);\n          }\n        }\n        if (arr.length > 0) {\n          let levelArr = [];\n          for (let i = 0; i < arr.length; i++) {\n            levelArr.push(arr[i].level);\n          }\n          let max = Math.max(...levelArr);\n          this.sprite[spriteIndex].data.level = max;\n          this.sprite[spriteIndex].material.color.set(\n            this.alarmColor[\"level\" + max]\n          );\n        } else {\n          this.sprite[spriteIndex].data.level = \"1\";\n          this.sprite[spriteIndex].visible = false;\n        }\n      }\n      if (this.equipment[equipmentIndex].material.length > 0) {\n        for (\n          let i = 0;\n          i < this.equipment[equipmentIndex].material.length;\n          i++\n        ) {\n          this.equipment[equipmentIndex].material[i].color.set(\"#ffffff\");\n        }\n      }\n    }\n  }\n  //告警播放\n  alarmPlay(info) {\n    let utterThis = new window.SpeechSynthesisUtterance();\n    utterThis.text = info;\n    utterThis.lang = \"zh-CN\"; //使用语言\n    utterThis.pitch = 2; //表示说话的音高，数值，范围从0（最小）到2（最大）。默认值为1\n    utterThis.rate = 1; // 语速，数值，默认值是1，范围是0.1到10，表示语速的倍数，例如2表示正常语速的两倍\n    utterThis.volume = 1; //声音的音量，区间范围是0到1，默认是1\n    window.speechSynthesis.speak(utterThis);\n  }\n  commonFunc = {\n    _this: this,\n    //判断对象\n    hasObj: function(obj) {\n      if (obj != null && typeof obj != \"undefined\") {\n        return true;\n      } else {\n        return false;\n      }\n    },\n    //查找对象\n    findObject: function(objname) {\n      var findedobj = null;\n      this.objects.forEach(function(obj, index) {\n        if (obj.name != null && obj.name != \"\" && obj.name == objname) {\n          findedobj = obj;\n          return findedobj;\n        }\n      });\n      return findedobj;\n    },\n    //获取路径\n    getPath: function(file) {\n      return this._this.BASE_PATH + file;\n    },\n    //生成GUID\n    guid: function() {\n      return (\n        this.guidRandom() +\n        this.guidRandom() +\n        \"-\" +\n        this.guidRandom() +\n        \"-\" +\n        this.guidRandom() +\n        \"-\" +\n        this.guidRandom() +\n        \"-\" +\n        this.guidRandom() +\n        this.guidRandom() +\n        this.guidRandom()\n      );\n    },\n    guidRandom() {\n      return (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);\n    },\n  };\n\n  /*\n   *事件部分\n   */\n\n  //鼠标按下事件\n  onDocumentMouseDown(event) {\n    this.dbclick++;\n    var _this = this;\n    setTimeout(function() {\n      _this.dbclick = 0;\n    }, 500);\n    event.preventDefault();\n    if (this.dbclick >= 2) {\n      // 将鼠标位置归一化为设备坐标。x 和 y 方向的取值范围是 (-1 to +1)\n      this.mouseClick.x = (event.offsetX / this.dom.offsetWidth) * 2 - 1;\n      this.mouseClick.y = -(event.offsetY / this.dom.offsetHeight) * 2 + 1;\n      this.raycaster.setFromCamera(this.mouseClick, this.camera);\n      var intersects = this.raycaster.intersectObjects(this.objects);\n      let point = this.raycaster.intersectObjects(this.scene.children)[0];\n      console.log(point.point.x, point.point.z);\n      if (intersects.length > 0) {\n        this.controls.enabled = false;\n        let SELECTED = intersects[0].object;\n        if (\n          this.eventList != null &&\n          this.eventList.dbclick != null &&\n          this.eventList.dbclick.length > 0\n        ) {\n          this.eventList.dbclick.forEach(function(_obj, index) {\n            if (\"string\" == typeof _obj.obj_name) {\n              if (_obj.obj_name == SELECTED.name) {\n                _obj.obj_event(SELECTED, _this);\n              }\n            } else if (\n              _obj.findObject != null ||\n              \"function\" == typeof _obj.findObject\n            ) {\n              if (_obj.findObject(SELECTED.name)) {\n                _obj.obj_event(SELECTED, _this);\n              }\n            }\n          });\n        }\n        this.controls.enabled = true;\n      }\n    }\n  }\n  openCloseDoor(obj, x, y, z, info) {\n    console.log(obj);\n    var doorstate = \"close\";\n    var tempobj = null;\n    if (obj.doorState != null && typeof obj.doorState != \"undefined\") {\n      doorstate = obj.doorState;\n      tempobj = obj.parent;\n    } else {\n      console.log(\"add parent\");\n      var objparent = obj.parent;\n      tempobj = new THREE.Object3D();\n      tempobj.position.set(\n        obj.position.x + x,\n        obj.position.y + y,\n        obj.position.z + z\n      );\n      obj.position.set(-x, -y, -z);\n      tempobj.add(obj);\n      objparent.add(tempobj);\n    }\n    obj.doorState = doorstate == \"close\" ? \"open\" : \"close\";\n    if (info == \"left\" || info == \"right\") {\n      let sign = info == \"left\" ? 1 : -1;\n      if (obj.doorState == \"close\") {\n        tempobj.rotateOnAxis(new THREE.Vector3(0, 1, 0), 0.5 * sign * Math.PI);\n      } else {\n        tempobj.rotateOnAxis(new THREE.Vector3(0, 1, 0), -0.5 * sign * Math.PI);\n      }\n    } else if (info == \"outin\") {\n      //沿点击的法向量移动\n      // var intersects = this.raycaster.intersectObjects([obj]);\n      // if (intersects.length > 0) {\n      //     // 射线位置赋值给移动网格模型\n      //     tempobj.position.copy(intersects[0].point);\n      //     // 沿着法线方向平移移动的网格模型\n      //     var normal = intersects[0].face.normal;// 当前位置曲面法线\n      //     tempobj.translateOnAxis(normal,50); //平移50\n      // }\n\n      var targetPos = new THREE.Vector3(1, 0, 0);\n      // var euler = new THREE.Euler( 1, 0,0);\n      // var matrix = new THREE.Matrix4();  //创建一个4维矩阵\n      // matrix.lookAt(obj.position.clone() , obj.position.clone() , targetPos) //设置朝向\n      // matrix.multiply(new THREE.Matrix4().makeRotationFromEuler(euler))\n      // var toRot = new THREE.Quaternion().setFromRotationMatrix(matrix)\n      // tempobj.translateOnAxis(toRot,50);\n      if (obj.doorState == \"close\") {\n        tempobj.translateOnAxis(targetPos, -obj.geometry.parameters.depth + 20);\n      } else {\n        tempobj.translateOnAxis(targetPos, obj.geometry.parameters.depth - 20);\n      }\n\n      //使用四元素朝某个角度移动\n      // var targetPos = new THREE.Vector3(0,0,1)   //目标位置点\n      // var offsetAngle = Math.PI/2  //目标移动时的朝向偏移\n      // // var obj =  你的三维模型(或者其他物体对象，object3D ,group ,或者mesh对象)\n      // //以下代码在多段路径时可重复执行\n      // var matrix = new THREE.Matrix4()  //创建一个4维矩阵\n      // matrix.lookAt(obj.position.clone() , obj.position.clone() ,targetPos) //设置朝向\n      // matrix.multiply(new THREE.Matrix4().makeRotationFromEuler(new THREE.Euler(0 , offsetAngle , 0 )))\n      // var toRot = new THREE.Quaternion().setFromRotationMatrix(matrix)  //计算出需要进行旋转的四元数值\n      // tempobj.translateOnAxis(toRot,50);\n\n      // if(obj.doorState==\"close\"){\n      //     tempobj.translateOnAxis(new THREE.Vector3(0, 0, 1),-obj.geometry.parameters.depth);\n      // }else{\n      //     tempobj.translateOnAxis(new THREE.Vector3(0, 0, 1),obj.geometry.parameters.depth);\n      // }\n    }\n  }\n  //开关左门\n  openLeftDoor(_obj, func) {\n    this.openCloseDoor(_obj, -_obj.geometry.parameters.width / 2, 0, 0, \"left\");\n  }\n  //开关右门\n  openRightDoor(_obj, func) {\n    this.openCloseDoor(_obj, _obj.geometry.parameters.width / 2, 0, 0, \"right\");\n  }\n  //开关机柜门\n  openCabinetDoor(_obj, func) {\n    this.openCloseDoor(\n      _obj,\n      _obj.geometry.parameters.width / 2,\n      0,\n      _obj.geometry.parameters.depth / 2,\n      \"right\"\n    );\n  }\n  //拉出放回设备\n  openEquipmentDoor(_obj, func) {\n    this.openCloseDoor(_obj, 0, 0, _obj.geometry.parameters.depth / 2, \"outin\");\n  }\n  //鼠标移动\n  onDocumentMouseMove(event) {\n    let _this = this;\n    var currentElement = null;\n    this.mouseClick.x = (event.offsetX / this.dom.offsetWidth) * 2 - 1;\n    this.mouseClick.y = -(event.offsetY / this.dom.offsetHeight) * 2 + 1;\n    this.raycaster.setFromCamera(this.mouseClick, this.camera);\n    var intersects = this.raycaster.intersectObjects(this.objects);\n    if (intersects.length > 0) {\n      let SELECTED = intersects[0].object;\n      // console.log(SELECTED)\n      if (\n        SELECTED.name.toString().indexOf(\"equipment\") != -1 ||\n        SELECTED.name.toString().indexOf(\"spriteAlarm\") != -1\n      ) {\n        currentElement = SELECTED;\n      }\n    }\n    if (this.lastElement != currentElement) {\n      clearTimeout(this.tipTimer);\n      if (currentElement) {\n        this.tipTimer = setTimeout(function() {\n          // console.log(currentElement)\n          let tipInfo = \"\";\n          if (currentElement.name.toString().indexOf(\"equipment\") != -1) {\n            tipInfo = currentElement.data.tipInfo;\n            _this.tooltip.style.background = _this.tooltipBG;\n            _this.tooltip.querySelector(\"span\").style.borderTop =\n              \"10px solid \" + _this.tooltipBG;\n          }\n          if (currentElement.name.toString().indexOf(\"spriteAlarm\") != -1) {\n            // console.log(currentElement)\n            tipInfo = currentElement.data.tipInfo;\n            _this.tooltip.style.background = _this.tooltipBG;\n            _this.tooltip.querySelector(\"span\").style.borderTop =\n              \"10px solid \" + _this.tooltipBG;\n          }\n          let tiplen = tipInfo.length;\n          _this.tooltip.querySelector(\"#tipdiv\").innerHTML = tipInfo;\n          _this.tooltip.style.width = tiplen * 15 + \"px\";\n          _this.tooltip.style.display = \"block\";\n          _this.tooltip.style.left =\n            _this.lastEvent.pageX - _this.tooltip.clientWidth / 2 + \"px\";\n          _this.tooltip.style.top =\n            _this.lastEvent.pageY - _this.tooltip.clientHeight - 15 + \"px\";\n        }, 1000);\n      }\n    }\n    //设置上一次的网元为当前网元\n    this.lastElement = currentElement;\n    //如果当前鼠标下没有网元，隐藏tooltip\n    if (currentElement == null) {\n      _this.tooltip.style.display = \"none\";\n    }\n    //设置每次移动时鼠标的事件对象\n    this.lastEvent = event;\n  }\n  //测试\n  add() {\n    var _this = this;\n    //测试生成obj带材质\n    // this.createObjContainMtl()\n\n    //3,测点管道\n    // var points = [];\n    // points.push(new THREE.Vector3(0, 0, -10));\n    // points.push(new THREE.Vector3(0, 0, 10));\n    // var curvePath = new THREE.CatmullRomCurve3(points);\n    // var geometry = new THREE.TubeGeometry( curvePath, 20, 2, 8, false );\n    // var material = new THREE.MeshBasicMaterial( { color: 0xff0000 ,side:THREE.DoubleSide } );\n    // var mesh = new THREE.Mesh( geometry, material );\n    // this.scene.add( mesh );\n    ////自定义管道\n    // var cylinderGeo = new THREE.CylinderGeometry(4, 4 ,20 ,48,48);\n    // var cylinderMat = new THREE.MeshLambertMaterial({\n    //     color:0xffffff,\n    //     side:THREE.DoubleSide,\n    //     // map: this.createSkin(64,64,{imgurl:\"./images/rack_inside.png\"})\n    // });\n    // var cylinderMat2 = new THREE.MeshLambertMaterial({\n    //     color:0xffffff,\n    //     side:THREE.DoubleSide,\n    //     // map: this.createSkin(64,64,{imgurl:\"./images/test/camera.png\"})\n    // });\n    // var cylinder = new THREE.Mesh(cylinderGeo, cylinderMat);\n    // var cubeGeometry = new THREE.CubeGeometry(6.5, 20, 6.5, 0, 0, 1);\n    // var cube = new THREE.Mesh(cubeGeometry, cylinderMat);\n    // var pipe = this.mergeModel('+',cylinder,cube);\n    // var cylinderGeo1 = new THREE.CylinderGeometry(3.5, 3.5 ,20 ,48,48);\n    // var cylinder1 = new THREE.Mesh(cylinderGeo1, cylinderMat);\n    // pipe=this.mergeModel(\"-\",pipe,cylinder1);\n    // var cylinderGeo2 = new THREE.CylinderGeometry(2.5, 2.5 ,20 ,48,48);\n    // var cylinder2 = new THREE.Mesh(cylinderGeo2, cylinderMat2);\n    // pipe=this.mergeModel(\"+\",pipe,cylinder2);\n    // pipe.rotateX(0.5*Math.PI);\n    // this.scene.add(pipe);//网格模型添加到场景中\n\n    //4.测试加载模型\n    // var texture = new THREE.TextureLoader().load( './images/test/metal.png' );\n    // var texture1 = new THREE.TextureLoader().load( './images/test/camera_light.png' );\n    // var texture2 = new THREE.TextureLoader().load( './images/test/camera_dot.png' );\n    // var loader =new OBJLoader();\n    // loader.load( './images/test/camera.obj', function ( group ) {\n    //     console.log(group)\n    //     group.traverse( function ( child ) {\n    //         console.log(child)\n    //         if ( child instanceof THREE.Mesh) {\n    //             if(child.name==\"archmodels95_044_001\"){\n    //                 child.material.map = texture;\n    //             }else if(child.name==\"archmodels95_044_003\"){\n    //                 child.material.map = texture1;\n    //             }else{\n    //                 child.material.map = texture2;\n    //             }\n\n    //         }\n    //     });\n    //     _this.scene.add( group );\n    // })\n\n    //测试加载材质模型\n    // var mtlLoader = new MTLLoader();\n    // mtlLoader.load('./images/test/plant.mtl', function(materials) {\n    //     materials.preload();\n    //     console.log(materials)-\n    //     var objLoader = new OBJLoader();\n    //     objLoader.setMaterials(materials);\n    //     objLoader.load('./images/test/plant.obj', function(object) {\n    //         console.log(object)\n    //         _this.scene.add(object);\n    //     }, onProgress, onError);\n    // });\n    // var onProgress = function(xhr) {\n    //     if (xhr.lengthComputable) {\n    //         var percentComplete = xhr.loaded / xhr.total * 100;\n    //         console.log(Math.round(percentComplete, 2) + '% 已经加载')\n    //     }\n    // }\n    // var onError =function(){}\n\n    //1、测试ThreeBSP用的\n    //几何体对象\n    // let cylinder = new THREE.CylinderGeometry(50,50,5,40);//圆柱\n    // let box = new THREE.BoxGeometry(40,5,40);//立方体\n    // //材质对象\n    // let material=new THREE.MeshPhongMaterial({color:0x0000ff});\n    // //网格模型对象\n    // let cylinderMesh=new THREE.Mesh(cylinder,material);//圆柱\n    // let boxMesh=new THREE.Mesh(box,material);//立方体\n    // //包装成ThreeBSP对象\n    // let cylinderBSP = new ThreeBSP(cylinderMesh);\n    // let boxBSP = new ThreeBSP(boxMesh);\n    // let result = cylinderBSP.subtract(boxBSP);\n    // //ThreeBSP对象转化为网格模型对象\n    // let mesh = result.toMesh();\n    // this.scene.add(mesh);//网格模型添加到场景中\n\n    // //2、试圆柱体贴图\n    // //创建圆柱体\n    // var cylinderGeo = new THREE.CylinderGeometry(28, 30 ,200 ,48,48);\n    // cylinderGeo.computeBoundingBox();\n    // var max = cylinderGeo.boundingBox.max,\n    //         min = cylinderGeo.boundingBox.min;\n    //         console.log(cylinderGeo)\n    //         console.log(max)\n    //         console.log(min)\n    // var offset = new THREE.Vector2(0 - min.x, 0 - min.y);\n    // var range = new THREE.Vector2(max.x - min.x, max.y - min.y);\n    // var faces = cylinderGeo.faces;\n    // cylinderGeo.faceVertexUvs[0] = [];\n    // for (var i = 0; i < faces.length ; i++) {\n    //     var v1 = cylinderGeo.vertices[faces[i].a],\n    //             v2 = cylinderGeo.vertices[faces[i].b],\n    //             v3 = cylinderGeo.vertices[faces[i].c];\n    //     cylinderGeo.faceVertexUvs[0].push([\n    //         new THREE.Vector2((v1.x + offset.x) / range.x, (v1.y + offset.y) / range.y),\n    //         new THREE.Vector2((v2.x + offset.x) / range.x, (v2.y + offset.y) / range.y),\n    //         new THREE.Vector2((v3.x + offset.x) / range.x, (v3.y + offset.y) / range.y)\n    //     ]);\n    // }\n    // cylinderGeo.uvsNeedUpdate = true;\n\n    // console.log(cylinderGeo)\n    // var cylinderMat = new THREE.MeshLambertMaterial({//创建材料\n    //     color:0xffffff,\n    //     wireframe:false,\n    //     opacity: 0.1,\n    //     map: this.createSkin(60,200,{imgurl:\"./images/aircondition.png\"})\n    // });\n    // //创建圆柱体网格模型\n    // var cylinder = new THREE.Mesh(cylinderGeo, cylinderMat);\n    // this.scene.add(cylinder);//网格模型添加到场景中\n  }\n  //测试自己生成obj文件带mtl材质的\n  createObjContainMtl() {\n    //如果obj文件没有包含材质关联的时候，自己生成带材质的关联obj文件\n    let _this = this;\n    var leaftexture = new THREE.TextureLoader().load(\n      \"./images/plant/Archmodels66_leaf_33.jpg\"\n    );\n    var soiltexture = new THREE.TextureLoader().load(\n      \"./images/plant/Archmodels66_dirt_1.jpg\"\n    );\n    var barktexture = new THREE.TextureLoader().load(\n      \"./images/plant/Archmodels66_bark_1.jpg\"\n    );\n    var jardinieretexture = new THREE.TextureLoader().load(\n      \"./images/plant/Archmodels66_jardiniere.jpg\"\n    );\n    var objLoader = new OBJLoader();\n    objLoader.load(\n      \"./images/plant/plant.obj\",\n      function(object) {\n        object.traverse(function(child) {\n          if (child instanceof THREE.Mesh) {\n            child.material = new THREE.MeshBasicMaterial({ color: 0xffffff });\n            if (\n              child.name == \"3DXY_geometry_769\" ||\n              child.name == \"3DXY_geometry_773\"\n            ) {\n              child.material.name = \"wire_153228214\";\n              child.material.map = leaftexture;\n            } else if (\n              child.name == \"3DXY_geometry_772\" ||\n              child.name == \"3DXY_geometry_776\" ||\n              child.name == \"3DXY_geometry_777\" ||\n              child.name == \"3DXY_geometry_778\"\n            ) {\n              child.material.name = \"wire_108008136\";\n              child.material.map = barktexture;\n            } else if (\n              child.name == \"3DXY_geometry_774\" ||\n              child.name == \"3DXY_geometry_775\"\n            ) {\n              child.material.name = \"wire_177148027\";\n              child.material.map = soiltexture;\n            } else if (child.name == \"3DXY_geometry_770\") {\n              child.material.name = \"wire_198225087\";\n              child.material.map = jardinieretexture;\n            }\n          }\n        });\n        // _this.scene.add(object)\n        let objExporter = new OBJExporter();\n        var output = objExporter.parse(object);\n        var link = document.createElement(\"a\");\n        link.style.display = \"none\";\n        document.body.appendChild(link);\n        link.href = URL.createObjectURL(\n          new Blob([output], { type: \"text/plain\" })\n        );\n        link.download = \"object.obj\";\n        link.click();\n        //然后自己制作mtl文件就可以了\n      },\n      this.onProgress,\n      this.onError\n    );\n  }\n  //测试GLTF文件\n  exportGLTF() {\n    let box = new THREE.BoxGeometry(40, 5, 40);\n    let material = new THREE.MeshPhongMaterial({ color: 0x0000ff });\n    let obj = new THREE.Mesh(box, material); //立方体\n    // 单个模型数据 GLTF导出\n    let gltfExporter = new GLTFExporter();\n    gltfExporter.parse(obj, function(result) {\n      console.log(result);\n      var output = JSON.stringify(result, null, 2);\n      var link = document.createElement(\"a\");\n      link.style.display = \"none\";\n      document.body.appendChild(link);\n      link.href = URL.createObjectURL(\n        new Blob([output], { type: \"text/plain\" })\n      );\n      link.download = \"object.gltf\";\n      link.click();\n    });\n    //加载GLTF\n    var _this = this;\n    var loader = new GLTFLoader();\n    loader.load(\"./images/test/object.gltf\", function(gltf) {\n      console.log(\"控制台查看加载gltf文件返回的对象结构\", gltf);\n      console.log(\"gltf对象场景属性\", gltf.scene);\n      console.log(\"gltf对象相机属性\", gltf.cameras);\n      _this.scene.add(gltf.scene);\n    });\n  }\n  //测试OBJ文件\n  exportOBJ() {\n    let box = new THREE.BoxGeometry(40, 5, 40);\n    let material = new THREE.MeshPhongMaterial({ color: 0x0000ff });\n    let obj = new THREE.Mesh(box, material); //立方体\n    // 单个模型数据 OBJ导出\n    let objExporter = new OBJExporter();\n    var output = objExporter.parse(obj);\n    var link = document.createElement(\"a\");\n    link.style.display = \"none\";\n    document.body.appendChild(link);\n    link.href = URL.createObjectURL(new Blob([output], { type: \"text/plain\" }));\n    link.download = \"object.obj\";\n    link.click();\n    //加载OBJ\n    var _this = this;\n    var loader = new OBJLoader();\n    var loader2 = new OBJLoader2();\n    loader.load(\"./images/test/object.obj\", function(obj) {\n      console.log(obj);\n      _this.scene.add(obj);\n    });\n    // loader2.load( './images/test/object.obj', function ( obj ) {\n    //     _this.scene.add( obj );\n    // })\n  }\n\n  /* 创建字体精灵 */\n  // makeTextSprite(message, parameters) {\n  //\n  //     if ( parameters === undefined ) parameters = {};\n  //\n  //     var fontface = parameters.hasOwnProperty(\"fontface\") ?\n  //         parameters[\"fontface\"] : \"Arial\";\n  //\n  //     /* 字体大小 */\n  //     var fontsize = parameters.hasOwnProperty(\"fontsize\") ?\n  //         parameters[\"fontsize\"] : 20;\n  //\n  //     /* 边框厚度 */\n  //     var borderThickness = parameters.hasOwnProperty(\"borderThickness\") ?\n  //         parameters[\"borderThickness\"] : 4;\n  //\n  //     /* 边框颜色 */\n  //     var borderColor = parameters.hasOwnProperty(\"borderColor\") ?\n  //         parameters[\"borderColor\"] : { r:0, g:0, b:0, a:1.0 };\n  //\n  //     /* 背景颜色 */\n  //     var backgroundColor = parameters.hasOwnProperty(\"backgroundColor\") ?\n  //         parameters[\"backgroundColor\"] : { r: 97, g: 139, b: 249, a: 1 };\n  //\n  //     /* 创建画布 */\n  //     var canvas = document.createElement('canvas');\n  //     var context = canvas.getContext('2d');\n  //\n  //     /* 字体加粗 */\n  //     context.font = fontsize + \"px \" + fontface;\n  //\n  //     /* 获取文字的大小数据，高度取决于文字的大小 */\n  //     var metrics = context.measureText( message );\n  //     var textWidth = metrics.width;\n  //\n  //     /* 背景颜色 */\n  //     context.fillStyle   = \"rgba(\" + backgroundColor.r + \",\" + backgroundColor.g + \",\"\n  //         + backgroundColor.b + \",\" + backgroundColor.a + \")\";\n  //\n  //     /* 边框的颜色 */\n  //     context.strokeStyle = \"rgba(\" + borderColor.r + \",\" + borderColor.g + \",\"\n  //         + borderColor.b + \",\" + borderColor.a + \")\";\n  //     context.lineWidth = borderThickness;\n  //\n  //     /* 绘制圆角矩形 */\n  //     this.roundRect(context, borderThickness/2, borderThickness/2, textWidth + borderThickness, fontsize * 1.4 + borderThickness, 6);\n  //\n  //     /* 字体颜色 */\n  //     context.fillStyle = \"rgba(0, 0, 0, 1.0)\";\n  //     context.fillText( message, borderThickness, fontsize + borderThickness);\n  //\n  //     /* 画布内容用于纹理贴图 */\n  //     var texture = new THREE.Texture(canvas);\n  //     texture.needsUpdate = true;\n  //\n  //     var spriteMaterial = new THREE.SpriteMaterial({ map: texture } );\n  //     var sprite = new THREE.Sprite( spriteMaterial );\n  //\n  //     /* 缩放比例 */\n  //     sprite.scale.set(10,5,0);\n  //\n  //     return sprite;\n  // }\n  makeTexture(data) {\n    const fontface = \"Arial\";\n\n    /* 字体大小 */\n    const fontsize = 40;\n\n    /* 边框厚度 */\n    const borderThickness = 4;\n\n    /* 边框颜色 */\n    const borderColor = { r: 0, g: 0, b: 0, a: 1.0 };\n\n    /* 背景颜色 */\n    // const backgroundColor = { r: 97, g: 139, b: 249, a: 1 }\n    const backgroundColor = { r: 255, g: 0, b: 0, a: 1 };\n\n    /* 创建画布 */\n    const canvas = document.createElement(\"canvas\");\n    const context = canvas.getContext(\"2d\");\n\n    /* 字体加粗 */\n    context.font = fontsize + \"px \" + fontface;\n\n    /* 获取文字的大小数据，高度取决于文字的大小 */\n    const metrics = [];\n    data.forEach((ele) => {\n      metrics.push(\n        context.measureText((ele.name ? ele.name + \": \" : \"\") + ele.value)\n      );\n      // metrics.push(context.measureText('温度：45℃'))\n    });\n\n    let textWidth = metrics[0].width;\n    metrics.forEach((ele) => {\n      if (ele.width > textWidth) {\n        textWidth = ele.width;\n      }\n    });\n\n    /* 背景颜色 */\n    context.fillStyle =\n      data[0].background ||\n      \"rgba(\" +\n        backgroundColor.r +\n        \",\" +\n        backgroundColor.g +\n        \",\" +\n        backgroundColor.b +\n        \",\" +\n        backgroundColor.a +\n        \")\";\n\n    /* 边框的颜色 */\n    context.strokeStyle =\n      \"rgba(\" +\n      borderColor.r +\n      \",\" +\n      borderColor.g +\n      \",\" +\n      borderColor.b +\n      \",\" +\n      borderColor.a +\n      \")\";\n    context.lineWidth = borderThickness;\n\n    /* 绘制圆角矩形 */\n    this.roundRect(\n      context,\n      borderThickness / 2,\n      borderThickness / 2,\n      textWidth * 1.2,\n      (fontsize + 10) * (metrics.length + 0.2) +\n        borderThickness * metrics.length,\n      6\n    );\n\n    /* 字体颜色 */\n    canvas.style.letterSpacing = \"5px\";\n    for (let i = 0; i < data.length; i++) {\n      // context.fillStyle = data[i].color\n      // context.fillStyle = data[i].color || '#fff'\n      context.fillStyle = \"#000\";\n      let text = data[i].value;\n      if (data[i].name) {\n        text = data[i].name + \":\" + text;\n      }\n      context.fillText(\n        \" \" + text + \" \",\n        borderThickness,\n        fontsize * (i + 1) + borderThickness\n      );\n    }\n\n    /* 画布内容用于纹理贴图 */\n    const texture = new THREE.Texture(canvas);\n    texture.needsUpdate = true;\n\n    return texture;\n  }\n\n  createSprite(obj) {\n    // let sprite = this.makeTextSprite(' 温度：' + 12 + '℃ 湿度：' + 12% + ' ')\n    const texture = this.makeTexture([\n      {\n        name: \"湿度\",\n        value: \"24.15%\",\n      },\n      {\n        name: \"温度\",\n        value: \"29.02°C\",\n      },\n    ]);\n    const spriteMaterial = new THREE.SpriteMaterial({ map: texture });\n    const sprite = new THREE.Sprite(spriteMaterial);\n    sprite.position.set(obj.x + 50, obj.y + 24, obj.z - 20);\n    // const geometry = new THREE.PlaneGeometry(300, 300, 1, 1);\n    // sprite.geometry = geometry\n    sprite.scale.set(300, 100, 1); // 控制精灵大小，比如可视化中精灵大小表征数据大小 只需要设置x、y两个分量就可以\n    sprite.data = obj.data; //告警等级默认给1，给最低告警\n\n    sprite.name = \"spriteAlarm\";\n    sprite.visible = true;\n    this.addObject(sprite);\n    this.sprite.push(sprite);\n  }\n\n  createSwitchSprite(obj) {\n    let sprite = this.makeTextSprite(\" 温度：\" + 12 + \"℃ 湿度：\" + (12 % +\" \"));\n    sprite.position.set(obj.x + 50, obj.y + 24, obj.z - 20);\n    sprite.scale.set(300, 100, 1); // 控制精灵大小，比如可视化中精灵大小表征数据大小 只需要设置x、y两个分量就可以\n    sprite.data = obj.data; //告警等级默认给1，给最低告警\n    sprite.name = \"spriteAlarm\";\n    sprite.visible = true;\n    this.addObject(sprite);\n    this.sprite.push(sprite);\n  }\n\n  createSwitch(obj) {\n    let switchObj = null;\n    let bottomObj = {\n      show: true,\n      name: \"cubedown\",\n      uuid: \"\",\n      objType: \"cube\",\n      width: 30,\n      height: 30,\n      depth: 10,\n      x: 0,\n      y: 0,\n      z: 0,\n      style: {\n        skinColor: 0x02e0f3,\n      },\n    };\n    let bottomCube = this.createCube(bottomObj);\n    let buttonObj = {\n      show: true,\n      name: \"cubedown\",\n      uuid: \"\",\n      objType: \"cube\",\n      width: 20,\n      height: 20,\n      depth: 5,\n      rotation: [\n        {\n          direction: \"x\",\n          degree: -Math.PI / 10,\n        },\n      ],\n      x: 0,\n      y: 0,\n      z: 5,\n      style: {\n        skinColor: obj.style.skinColor || 0xf8ede2,\n      },\n    };\n    let buttonCube = this.createCube(buttonObj);\n    switchObj = this.mergeModel(\"+\", bottomCube, buttonCube);\n\n    switchObj.position.set(obj.x, obj.y, obj.z);\n    switchObj.objHandle = obj.objHandle;\n    switchObj = this.handleObj(switchObj);\n    this.addObject(switchObj);\n  }\n\n  /* 绘制圆角矩形 */\n  roundRect(ctx, x, y, w, h, r) {\n    ctx.beginPath();\n    ctx.moveTo(x + r, y);\n    ctx.lineTo(x + w - r, y);\n    ctx.quadraticCurveTo(x + w, y, x + w, y + r);\n    ctx.lineTo(x + w, y + h - r);\n    ctx.quadraticCurveTo(x + w, y + h, x + w - r, y + h);\n    ctx.lineTo(x + r, y + h);\n    ctx.quadraticCurveTo(x, y + h, x, y + h - r);\n    ctx.lineTo(x, y + r);\n    ctx.quadraticCurveTo(x, y, x + r, y);\n    ctx.closePath();\n    ctx.fill();\n    ctx.stroke();\n  }\n}\n"]}]}